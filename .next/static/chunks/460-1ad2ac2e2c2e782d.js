"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[460],{1643:(e,t,a)=>{a.d(t,{Lx:()=>n,PU:()=>l,RJ:()=>i,an:()=>r,r3:()=>o,vh:()=>s});var r=function(e){return e.Event="Event",e.Region="Region",e.Province="Province",e.Reward="Reward",e.RewardEvent="RewardEvent",e.GoldenHour="GoldenHour",e.SpinHistory="SpinHistory",e.AuditLog="AuditLog",e.Statistics="Statistics",e.User="User",e.Role="Role",e.Permission="Permission",e.Configuration="Configuration",e.BlacklistedToken="BlacklistedToken",e.EventLocation="EventLocation",e.Participant="Participant",e.ParticipantEvent="ParticipantEvent",e.JobImportHistory="JobImportHistory",e.JobImportHistoryDetail="JobImportHistoryDetail",e.RewardDistribute="RewardDistribute",e.DailyRewardDistribution="DailyRewardDistribution",e}({}),n=function(e){return e.SUCCESS="SUCCESS",e.NO_DATA="NO_DATA",e.ERROR="ERROR",e.INVALID_REQUEST="INVALID_REQUEST",e.ACCESS_DENIED="ACCESS_DENIED",e}({}),o=function(e){return e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING",e.NONE="NONE",e.UNSORTABLE="UNSORTABLE",e}({}),i=function(e){return e.EQUALS="EQUALS",e.NOT_EQUALS="NOT_EQUALS",e.LESS_THAN="LESS_THAN",e.LESS_THAN_OR_EQUALS="LESS_THAN_OR_EQUALS",e.GREATER_THAN="GREATER_THAN",e.GREATER_THAN_OR_EQUALS="GREATER_THAN_OR_EQUALS",e.BETWEEN="BETWEEN",e.IN="IN",e.NOT_IN="NOT_IN",e.CONTAINS="CONTAINS",e.STARTS_WITH="STARTS_WITH",e.ENDS_WITH="ENDS_WITH",e}({}),l=function(e){return e.STRING="STRING",e.NUMBER="NUMBER",e.BOOLEAN="BOOLEAN",e.DATE="DATE",e.DATETIME="DATETIME",e.TIME="TIME",e.OBJECT="OBJECT",e}({}),s=function(e){return e.ADD="ADD",e.UPDATE="UPDATE",e.DELETE="DELETE",e.VIEW="VIEW",e.EXPORT="EXPORT",e.IMPORT="IMPORT",e}({})},2460:(e,t,a)=>{a.d(t,{A:()=>to});var r=a(5155),n=a(2115),o=a(5695),i=a(4995),l=a(5562),s=a(1643);function d(e){let t={id:{objectType:e,fieldName:"ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},version:{objectType:e,fieldName:"Version",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},createdBy:{objectType:e,fieldName:"Created By",fieldType:s.PU.STRING,sortType:s.r3.NONE},createdDate:{objectType:e,fieldName:"Created Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},lastModifiedBy:{objectType:e,fieldName:"Last Modified By",fieldType:s.PU.STRING,sortType:s.r3.NONE},lastModifiedDate:{objectType:e,fieldName:"Last Modified Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},status:{objectType:e,fieldName:"Status",fieldType:s.PU.STRING,sortType:s.r3.NONE}};return({[s.an.JobImportHistory]:{...t,name:{objectType:s.an.JobImportHistoryDetail,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},description:{objectType:s.an.JobImportHistoryDetail,fieldName:"Description",fieldType:s.PU.STRING,sortType:s.r3.NONE},startDate:{objectType:s.an.JobImportHistoryDetail,fieldName:"Start Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},endDate:{objectType:s.an.JobImportHistoryDetail,fieldName:"End Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},location:{objectType:s.an.JobImportHistoryDetail,fieldName:"Location",fieldType:s.PU.STRING,sortType:s.r3.NONE},maxParticipants:{objectType:s.an.JobImportHistoryDetail,fieldName:"Max Participants",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},currentParticipants:{objectType:s.an.JobImportHistoryDetail,fieldName:"Current Participants",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}},[s.an.JobImportHistoryDetail]:{...t,importFile:{objectType:s.an.JobImportHistoryDetail,fieldName:"Import File",fieldType:s.PU.STRING,sortType:s.r3.NONE},importStatus:{objectType:s.an.JobImportHistoryDetail,fieldName:"Import Status",fieldType:s.PU.STRING,sortType:s.r3.NONE},totalRecords:{objectType:s.an.JobImportHistoryDetail,fieldName:"Total Records",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},successRecords:{objectType:s.an.JobImportHistoryDetail,fieldName:"Success Records",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},failedRecords:{objectType:s.an.JobImportHistoryDetail,fieldName:"Failed Records",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},jobImportHistoryId:{objectType:s.an.JobImportHistoryDetail,fieldName:"Job Import History ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}},[s.an.Event]:{...t,name:{objectType:s.an.Event,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},description:{objectType:s.an.Event,fieldName:"Description",fieldType:s.PU.STRING,sortType:s.r3.NONE},startDate:{objectType:s.an.Event,fieldName:"Start Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},endDate:{objectType:s.an.Event,fieldName:"End Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},location:{objectType:s.an.Event,fieldName:"Location",fieldType:s.PU.STRING,sortType:s.r3.NONE},maxParticipants:{objectType:s.an.Event,fieldName:"Max Participants",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},currentParticipants:{objectType:s.an.Event,fieldName:"Current Participants",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}},[s.an.Participant]:{...t,name:{objectType:s.an.Participant,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},email:{objectType:s.an.Participant,fieldName:"Email",fieldType:s.PU.STRING,sortType:s.r3.NONE},phone:{objectType:s.an.Participant,fieldName:"Phone",fieldType:s.PU.STRING,sortType:s.r3.NONE},joinDate:{objectType:s.an.Participant,fieldName:"Join Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},points:{objectType:s.an.Participant,fieldName:"Points",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},eventId:{objectType:s.an.Participant,fieldName:"Event ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}},[s.an.Reward]:{...t,name:{objectType:s.an.Reward,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},description:{objectType:s.an.Reward,fieldName:"Description",fieldType:s.PU.STRING,sortType:s.r3.NONE},points:{objectType:s.an.Reward,fieldName:"Points",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},quantity:{objectType:s.an.Reward,fieldName:"Quantity",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},eventId:{objectType:s.an.Reward,fieldName:"Event ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},redeemCount:{objectType:s.an.Reward,fieldName:"Redeem Count",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}},[s.an.RewardEvent]:{...t,rewardId:{objectType:s.an.RewardEvent,fieldName:"Reward ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},eventId:{objectType:s.an.RewardEvent,fieldName:"Event ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},quantity:{objectType:s.an.RewardEvent,fieldName:"Quantity",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},status:{objectType:s.an.RewardEvent,fieldName:"Status",fieldType:s.PU.STRING,sortType:s.r3.NONE}},[s.an.Region]:{...t,name:{objectType:s.an.Region,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},code:{objectType:s.an.Region,fieldName:"Code",fieldType:s.PU.STRING,sortType:s.r3.NONE},description:{objectType:s.an.Region,fieldName:"Description",fieldType:s.PU.STRING,sortType:s.r3.NONE}},[s.an.Province]:{...t,name:{objectType:s.an.Province,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},code:{objectType:s.an.Province,fieldName:"Code",fieldType:s.PU.STRING,sortType:s.r3.NONE},regionId:{objectType:s.an.Province,fieldName:"Region ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}},[s.an.GoldenHour]:{...t,name:{objectType:s.an.GoldenHour,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},startTime:{objectType:s.an.GoldenHour,fieldName:"Start Time",fieldType:s.PU.STRING,sortType:s.r3.NONE},endTime:{objectType:s.an.GoldenHour,fieldName:"End Time",fieldType:s.PU.STRING,sortType:s.r3.NONE},multiplier:{objectType:s.an.GoldenHour,fieldName:"Multiplier",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},eventId:{objectType:s.an.GoldenHour,fieldName:"Event ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}},[s.an.User]:{...t,username:{objectType:s.an.User,fieldName:"Username",fieldType:s.PU.STRING,sortType:s.r3.NONE},email:{objectType:s.an.User,fieldName:"Email",fieldType:s.PU.STRING,sortType:s.r3.NONE},fullName:{objectType:s.an.User,fieldName:"Full Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},roleId:{objectType:s.an.User,fieldName:"Role ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},lastLogin:{objectType:s.an.User,fieldName:"Last Login",fieldType:s.PU.DATETIME,sortType:s.r3.NONE}},[s.an.Role]:{...t,name:{objectType:s.an.Role,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},description:{objectType:s.an.Role,fieldName:"Description",fieldType:s.PU.STRING,sortType:s.r3.NONE},permissions:{objectType:s.an.Role,fieldName:"Permissions",fieldType:s.PU.STRING,sortType:s.r3.NONE}},[s.an.AuditLog]:{...t,action:{objectType:s.an.AuditLog,fieldName:"Action",fieldType:s.PU.STRING,sortType:s.r3.NONE},entityType:{objectType:s.an.AuditLog,fieldName:"Entity Type",fieldType:s.PU.STRING,sortType:s.r3.NONE},entityId:{objectType:s.an.AuditLog,fieldName:"Entity ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},userId:{objectType:s.an.AuditLog,fieldName:"User ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},details:{objectType:s.an.AuditLog,fieldName:"Details",fieldType:s.PU.STRING,sortType:s.r3.NONE}},[s.an.SpinHistory]:{...t,participantId:{objectType:s.an.SpinHistory,fieldName:"Participant ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},eventId:{objectType:s.an.SpinHistory,fieldName:"Event ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},rewardId:{objectType:s.an.SpinHistory,fieldName:"Reward ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},spinDate:{objectType:s.an.SpinHistory,fieldName:"Spin Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},pointsUsed:{objectType:s.an.SpinHistory,fieldName:"Points Used",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},result:{objectType:s.an.SpinHistory,fieldName:"Result",fieldType:s.PU.STRING,sortType:s.r3.NONE}},[s.an.Statistics]:{...t,name:{objectType:s.an.Statistics,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},category:{objectType:s.an.Statistics,fieldName:"Category",fieldType:s.PU.STRING,sortType:s.r3.NONE},value:{objectType:s.an.Statistics,fieldName:"Value",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},period:{objectType:s.an.Statistics,fieldName:"Period",fieldType:s.PU.STRING,sortType:s.r3.NONE},date:{objectType:s.an.Statistics,fieldName:"Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE}},[s.an.Permission]:{...t,name:{objectType:s.an.Permission,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},code:{objectType:s.an.Permission,fieldName:"Code",fieldType:s.PU.STRING,sortType:s.r3.NONE},description:{objectType:s.an.Permission,fieldName:"Description",fieldType:s.PU.STRING,sortType:s.r3.NONE},roleId:{objectType:s.an.Permission,fieldName:"Role ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}},[s.an.Configuration]:{...t,key:{objectType:s.an.Configuration,fieldName:"Key",fieldType:s.PU.STRING,sortType:s.r3.NONE},value:{objectType:s.an.Configuration,fieldName:"Value",fieldType:s.PU.STRING,sortType:s.r3.NONE},description:{objectType:s.an.Configuration,fieldName:"Description",fieldType:s.PU.STRING,sortType:s.r3.NONE},type:{objectType:s.an.Configuration,fieldName:"Type",fieldType:s.PU.STRING,sortType:s.r3.NONE}},[s.an.BlacklistedToken]:{...t,token:{objectType:s.an.BlacklistedToken,fieldName:"Token",fieldType:s.PU.STRING,sortType:s.r3.NONE},expiryDate:{objectType:s.an.BlacklistedToken,fieldName:"Expiry Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},reason:{objectType:s.an.BlacklistedToken,fieldName:"Reason",fieldType:s.PU.STRING,sortType:s.r3.NONE},userId:{objectType:s.an.BlacklistedToken,fieldName:"User ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}},[s.an.EventLocation]:{...t,name:{objectType:s.an.EventLocation,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},address:{objectType:s.an.EventLocation,fieldName:"Address",fieldType:s.PU.STRING,sortType:s.r3.NONE},city:{objectType:s.an.EventLocation,fieldName:"City",fieldType:s.PU.STRING,sortType:s.r3.NONE},state:{objectType:s.an.EventLocation,fieldName:"State",fieldType:s.PU.STRING,sortType:s.r3.NONE},country:{objectType:s.an.EventLocation,fieldName:"Country",fieldType:s.PU.STRING,sortType:s.r3.NONE},zipCode:{objectType:s.an.EventLocation,fieldName:"Zip Code",fieldType:s.PU.STRING,sortType:s.r3.NONE},capacity:{objectType:s.an.EventLocation,fieldName:"Capacity",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},eventId:{objectType:s.an.EventLocation,fieldName:"Event ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}},[s.an.ParticipantEvent]:{...t,participantId:{objectType:s.an.ParticipantEvent,fieldName:"Participant ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},eventId:{objectType:s.an.ParticipantEvent,fieldName:"Event ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},joinDate:{objectType:s.an.ParticipantEvent,fieldName:"Join Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},checkInDate:{objectType:s.an.ParticipantEvent,fieldName:"Check-in Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},attendance:{objectType:s.an.ParticipantEvent,fieldName:"Attendance",fieldType:s.PU.BOOLEAN,sortType:s.r3.NONE},notes:{objectType:s.an.ParticipantEvent,fieldName:"Notes",fieldType:s.PU.STRING,sortType:s.r3.NONE}},[s.an.RewardDistribute]:{...t,name:{objectType:s.an.RewardDistribute,fieldName:"Name",fieldType:s.PU.STRING,sortType:s.r3.NONE},description:{objectType:s.an.RewardDistribute,fieldName:"Description",fieldType:s.PU.STRING,sortType:s.r3.NONE},startDate:{objectType:s.an.RewardDistribute,fieldName:"Start Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},endDate:{objectType:s.an.RewardDistribute,fieldName:"End Date",fieldType:s.PU.DATETIME,sortType:s.r3.NONE},totalRewards:{objectType:s.an.RewardDistribute,fieldName:"Total Rewards",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},distributedRewards:{objectType:s.an.RewardDistribute,fieldName:"Distributed Rewards",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},participantId:{objectType:s.an.RewardDistribute,fieldName:"Participant ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}},[s.an.DailyRewardDistribution]:{...t,date:{objectType:s.an.DailyRewardDistribution,fieldName:"Date",fieldType:s.PU.DATE,sortType:s.r3.NONE},amount:{objectType:s.an.DailyRewardDistribution,fieldName:"Amount",fieldType:s.PU.NUMBER,sortType:s.r3.NONE},status:{objectType:s.an.DailyRewardDistribution,fieldName:"Status",fieldType:s.PU.STRING,sortType:s.r3.NONE},rewardDistributeId:{objectType:s.an.DailyRewardDistribution,fieldName:"Reward Distribute ID",fieldType:s.PU.NUMBER,sortType:s.r3.NONE}}})[e]||t}var c=a(6556);let p=["Summer Giveaway","Winter Promo","Back to School Special","New Year Celebration","Holiday Bonanza","Spring Festival","Lunar New Year","Anniversary Event","Grand Opening","Black Friday Special","Customer Appreciation","VIP Member Event"],u=["ACTIVE","SCHEDULED","COMPLETED","CANCELLED"],m=Array(15).fill(null).map((e,t)=>{let[a,r]=(0,c.RT)(),n=(0,c.Ob)(.7),o=(0,c.BB)(u),i="".concat((0,c.BB)(p)," ").concat(new Date().getFullYear());return{data:{id:t+1,name:i,description:"Description for ".concat(i),startDate:a,endDate:r,status:o,active:n,participantCount:Math.floor(1e4*Math.random()),winnerCount:Math.floor(1e3*Math.random()),spinCount:Math.floor(15e3*Math.random()),rewardCount:Math.floor(500*Math.random()),createdAt:new Date(Date.now()-1e10*Math.random()).toISOString(),updatedAt:new Date().toISOString()}}}),h=(0,c.he)(s.an.Event,"events",m,m.length);h.relatedLinkedObjects={rewards:{id:1,objectType:s.an.Reward,description:"Rewards for this event",key:{keys:["id"]}},participants:{id:2,objectType:s.an.Participant,description:"Participants in this event",key:{keys:["id"]}},eventLocations:{id:3,objectType:s.an.EventLocation,description:"Locations for this event",key:{keys:["id"]}}},h.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["rewards","participants","eventLocations"])});let f=["North","South","East","West","Central","Northeast","Northwest","Southeast","Southwest","Highlands","Coastal","Delta"].map((e,t)=>({data:{id:t+1,name:e,code:e.substring(0,3).toUpperCase(),description:"".concat(e," region of the country"),active:Math.random()>.2,createdAt:new Date(Date.now()-1e10*Math.random()).toISOString()}})),y=(0,c.he)(s.an.Region,"regions",f,f.length);y.relatedLinkedObjects={provinces:{id:1,objectType:s.an.Province,description:"Provinces in this region",key:{keys:["id"]}}},y.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["provinces"])});let g=[{name:"Hanoi",regionId:1},{name:"Hai Phong",regionId:1},{name:"Bac Ninh",regionId:1},{name:"Ho Chi Minh City",regionId:2},{name:"Vung Tau",regionId:2},{name:"Can Tho",regionId:2},{name:"Hue",regionId:3},{name:"Da Nang",regionId:3},{name:"Quang Nam",regionId:3},{name:"Dien Bien",regionId:4},{name:"Son La",regionId:4},{name:"Lai Chau",regionId:4},{name:"Nghe An",regionId:5},{name:"Ha Tinh",regionId:5},{name:"Thanh Hoa",regionId:5}],b=g.map((e,t)=>({data:{id:t+1,name:e.name,code:e.name.substring(0,3).toUpperCase(),regionId:e.regionId,population:Math.floor(5e6*Math.random())+5e5,area:Math.floor(5e3*Math.random())+500,active:Math.random()>.1,createdAt:new Date(Date.now()-1e10*Math.random()).toISOString()}})),N=(0,c.he)(s.an.Province,"provinces",b,b.length);N.relatedLinkedObjects={eventLocations:{id:1,objectType:s.an.EventLocation,description:"Event locations in this province",key:{keys:["id"]}},participants:{id:2,objectType:s.an.Participant,description:"Participants from this province",key:{keys:["id"]}}},N.rows.forEach((e,t)=>{let a=g[t].regionId;N.relatedLinkedObjects["region_".concat(a)]={id:a,name:"Region ".concat(a),objectType:s.an.Region,description:"Parent region",key:{keys:["id"]}},"data"in e&&e.data.id&&(e.relatedTables=["eventLocations","participants"])});let T=["CASH","VOUCHER","PRODUCT","SERVICE","DISCOUNT"],v=["Cash Prize","Gift Card","Shopping Voucher","Free Product","Discount Coupon","Free Subscription","Movie Tickets","Restaurant Voucher","Travel Package","Electronics"],x=Array(25).fill(null).map((e,t)=>{let a=(0,c.BB)(T),r="".concat((0,c.BB)(v)," - ").concat(a),n=10*Math.floor(500*Math.random()),o=Math.floor(100*Math.random())+1,i=Math.floor(5*Math.random())+1;return{data:{id:t+1,name:r,type:a,description:"".concat(r," - ").concat(n," value"),value:n,quantity:o,quantityRemaining:Math.floor(Math.random()*o),imageUrl:"/assets/images/rewards/".concat(a.toLowerCase(),"_").concat(Math.floor(5*Math.random())+1,".jpg"),active:Math.random()>.2,createdAt:(0,c.DJ)(),eventId:i}}}),E=(0,c.he)(s.an.Reward,"rewards",x,x.length);E.relatedLinkedObjects={spinHistory:{id:1,objectType:s.an.SpinHistory,description:"Spin history for this reward",key:{keys:["id"]}}},E.rows.forEach(e=>{let t=e.data.eventId;E.relatedLinkedObjects["event_".concat(t)]={id:t,name:"Event ".concat(t),objectType:s.an.Event,description:"Parent event",key:{keys:["id"]}},"data"in e&&e.data.id&&(e.relatedTables=["spinHistory"])});let j=["08:00-10:00","10:00-12:00","12:00-14:00","14:00-16:00","16:00-18:00","18:00-20:00","20:00-22:00","22:00-00:00"],w=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],I=Array(15).fill(null).map((e,t)=>{let a=Math.floor(5*Math.random())+1,r=(0,c.BB)(j),n=Math.floor(3*Math.random())+2,o=Array.from({length:Math.floor(7*Math.random())+1}).map(()=>(0,c.BB)(w)).filter((e,t,a)=>a.indexOf(e)===t);return{data:{id:t+1,name:"".concat(n,"X Rewards - ").concat(r),eventId:a,startTime:r.split("-")[0],endTime:r.split("-")[1],multiplier:n,applicableDays:o.join(","),active:Math.random()>.3,description:"".concat(n,"X reward multiplier during ").concat(r," on ").concat(o.join(", ")),createdAt:new Date(Date.now()-1e10*Math.random()).toISOString()}}}),D=(0,c.he)(s.an.GoldenHour,"golden_hours",I,I.length);D.relatedLinkedObjects={spinHistory:{id:1,objectType:s.an.SpinHistory,description:"Spin history during this golden hour",key:{keys:["id"]}}},D.rows.forEach(e=>{let t=e.data.eventId;D.relatedLinkedObjects["event_".concat(t)]={id:t,name:"Event ".concat(t),objectType:s.an.Event,description:"Parent event",key:{keys:["id"]}},"data"in e&&e.data.id&&(e.relatedTables=["spinHistory"])});var S=a(3589);let R=["CREATE","UPDATE","DELETE","LOGIN","LOGOUT","ACCESS","EXPORT","IMPORT"],M=["Event","Participant","Reward","User","Role","Configuration","SpinHistory"],A=["SUCCESS","FAILURE","WARNING","ERROR"],C=Array(100).fill(null).map((e,t)=>{let a=R[Math.floor(Math.random()*R.length)],r=M[Math.floor(Math.random()*M.length)],n=Math.floor(100*Math.random())+1,o=Math.floor(10*Math.random())+1,i=A[Math.floor(Math.random()*A.length)],l=(0,c.DJ)(),s="".concat(Math.floor(24*Math.random()).toString().padStart(2,"0"),":").concat(Math.floor(60*Math.random()).toString().padStart(2,"0"));return{data:{id:t+1,timestamp:"".concat(l,"T").concat(s,":").concat(Math.floor(60*Math.random()).toString().padStart(2,"0"),".").concat(Math.floor(1e3*Math.random()).toString().padStart(3,"0"),"Z"),actionType:a,entityType:r,entityId:n,userId:o,username:"user".concat(o),ipAddress:"".concat(Math.floor(256*Math.random()),".").concat(Math.floor(256*Math.random()),".").concat(Math.floor(256*Math.random()),".").concat(Math.floor(256*Math.random())),details:"".concat(a," operation on ").concat(r," with ID ").concat(n),status:i,requestData:"ACCESS"!==a?JSON.stringify({id:n,someField:"someValue"}):null,responseData:"SUCCESS"!==i?JSON.stringify({error:"Some error message"}):null}}}),P=(0,c.he)(s.an.AuditLog,"audit_log",C,200),O=[{data:{id:1,name:"Overall Statistics",description:"System-wide statistics overview",lastUpdated:new Date().toISOString()}}],U=(0,c.he)(s.an.Statistics,"statistics",O,O.length);U.statistics={charts:{participation:[{chartName:"Daily Participation",chartType:"line",chartData:{labels:Array.from({length:30}).map((e,t)=>{let a=new Date;return a.setDate(a.getDate()-29+t),a.toISOString().split("T")[0]}),values:Array.from({length:30}).map(()=>String(Math.floor(1e3*Math.random())+100))}},{chartName:"Participation by Region",chartType:"pie",chartData:{labels:["North","South","East","West","Central"],values:Array.from({length:5}).map(()=>String(Math.floor(1e4*Math.random())+1e3))}}],rewards:[{chartName:"Reward Distribution",chartType:"pie",chartData:{labels:["Cash","Voucher","Product","Service","Discount"],values:Array.from({length:5}).map(()=>String(Math.floor(500*Math.random())+50))}},{chartName:"Claims Over Time",chartType:"bar",chartData:{labels:Array.from({length:12}).map((e,t)=>{let a=new Date;return a.setMonth(a.getMonth()-11+t),a.toLocaleDateString("en-US",{month:"short",year:"numeric"})}),values:Array.from({length:12}).map(()=>String(Math.floor(200*Math.random())+20))}}],events:[{chartName:"Event Performance",chartType:"bar",chartData:{labels:["Summer Giveaway","Winter Promo","Back to School","New Year"],values:Array.from({length:4}).map(()=>String(Math.floor(5e3*Math.random())+1e3))}}]}};let k=["John","Jane","Robert","Sarah","Michael","Emily","David","Laura"],L=["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson"],B=["ACTIVE","INACTIVE","LOCKED","PENDING"],G=Array(10).fill(null).map((e,t)=>{let a=t+1,r=k[Math.floor(Math.random()*k.length)],n=L[Math.floor(Math.random()*L.length)],o="".concat(r.toLowerCase()).concat(n.toLowerCase()).concat(a),i=B[Math.floor(Math.random()*B.length)];return{data:{id:a,username:o,firstName:r,lastName:n,email:"".concat(o,"@example.com"),phone:"+84".concat(Math.floor(1e9*Math.random())),status:i,lastLogin:Math.random()>.3?(0,c.DJ)()+"T"+"".concat(Math.floor(24*Math.random()).toString().padStart(2,"0"),":").concat(Math.floor(60*Math.random()).toString().padStart(2,"0"),":").concat(Math.floor(60*Math.random()).toString().padStart(2,"0"),"Z"):null,createdAt:(0,c.DJ)(),createdBy:"system",updatedAt:(0,c.DJ)(),updatedBy:"system",roleIds:Array.from({length:Math.floor(3*Math.random())+1}).map(()=>Math.floor(5*Math.random())+1).filter((e,t,a)=>a.indexOf(e)===t)}}}),H=(0,c.he)(s.an.User,"users",G,G.length);H.relatedLinkedObjects={roles:{id:1,objectType:s.an.Role,description:"User roles",key:{keys:["id"]}},auditLog:{id:2,objectType:s.an.AuditLog,description:"User audit log",key:{keys:["id"]}}},H.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["roles","auditLog"])});let _=[{name:"ADMIN",description:"Administrator with full access"},{name:"EVENT_MANAGER",description:"Can manage events and rewards"},{name:"PARTICIPANT_MANAGER",description:"Can manage participants"},{name:"REPORT_VIEWER",description:"Can view reports and statistics"},{name:"USER",description:"Regular user with limited access"}].map((e,t)=>({data:{id:t+1,name:e.name,description:e.description,active:!0,createdAt:new Date(Date.now()-1e10*Math.random()).toISOString(),createdBy:"system",updatedAt:new Date().toISOString(),updatedBy:"system"}})),F=(0,c.he)(s.an.Role,"roles",_,_.length);F.relatedLinkedObjects={users:{id:1,objectType:s.an.User,description:"Users with this role",key:{keys:["id"]}},permissions:{id:2,objectType:s.an.Permission,description:"Permissions for this role",key:{keys:["id"]}}},F.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["users","permissions"])});let J=[{name:"VIEW_EVENTS",description:"View events"},{name:"CREATE_EVENT",description:"Create a new event"},{name:"EDIT_EVENT",description:"Edit existing events"},{name:"DELETE_EVENT",description:"Delete events"},{name:"VIEW_PARTICIPANTS",description:"View participants"},{name:"CREATE_PARTICIPANT",description:"Create participants"},{name:"EDIT_PARTICIPANT",description:"Edit participants"},{name:"DELETE_PARTICIPANT",description:"Delete participants"},{name:"VIEW_REWARDS",description:"View rewards"},{name:"CREATE_REWARD",description:"Create rewards"},{name:"EDIT_REWARD",description:"Edit rewards"},{name:"DELETE_REWARD",description:"Delete rewards"},{name:"VIEW_REPORTS",description:"View reports"},{name:"EXPORT_DATA",description:"Export data"},{name:"MANAGE_USERS",description:"Manage users"},{name:"MANAGE_ROLES",description:"Manage roles"},{name:"ACCESS_ADMIN",description:"Access admin area"},{name:"ACCESS_API",description:"Access API"}].map((e,t)=>({data:{id:t+1,name:e.name,description:e.description,active:!0,category:e.name.split("_")[0],action:e.name.split("_")[1],createdAt:new Date(Date.now()-1e10*Math.random()).toISOString()}})),V=(0,c.he)(s.an.Permission,"permissions",J,J.length);V.relatedLinkedObjects={roles:{id:1,objectType:s.an.Role,description:"Roles with this permission",key:{keys:["id"]}}},V.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["roles"])});let W=[{name:"DEFAULT_EVENT_DURATION_DAYS",value:"30",description:"Default event duration in days"},{name:"MAX_DAILY_SPINS",value:"3",description:"Maximum spins allowed per day per participant"},{name:"LOGIN_ATTEMPTS_BEFORE_LOCKOUT",value:"5",description:"Number of failed login attempts before account is locked"},{name:"PASSWORD_EXPIRY_DAYS",value:"90",description:"Number of days before password expires"},{name:"SESSION_TIMEOUT_MINUTES",value:"30",description:"User session timeout in minutes"},{name:"EMAIL_NOTIFICATION_ENABLED",value:"true",description:"Enable email notifications"},{name:"SMS_NOTIFICATION_ENABLED",value:"false",description:"Enable SMS notifications"},{name:"MAINTENANCE_MODE",value:"false",description:"Enable maintenance mode"},{name:"DEFAULT_LANGUAGE",value:"en",description:"Default application language"},{name:"MAX_FILE_UPLOAD_SIZE",value:"5242880",description:"Maximum file upload size in bytes"},{name:"ALLOWED_FILE_TYPES",value:"jpg,jpeg,png,pdf",description:"Allowed file types for upload"},{name:"SYSTEM_EMAIL",value:"system@example.com",description:"System email address"}].map((e,t)=>({data:{id:t+1,name:e.name,value:e.value,description:e.description,dataType:"number"==typeof e.value?"NUMBER":"true"===e.value||"false"===e.value?"BOOLEAN":"STRING",editable:!0,category:e.name.split("_")[0],lastModified:new Date().toISOString(),modifiedBy:"system"}}));(0,c.he)(s.an.Configuration,"configurations",W,W.length);var z=a(9641).Buffer;let q=Array(20).fill(null).map((e,t)=>{let a=t+1,r=Math.floor(10*Math.random())+1,n=(0,c.DJ)();return{data:{id:a,token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.".concat(z.from(JSON.stringify({userId:r,exp:Date.now()+36e5})).toString("base64"),".signature").concat(a),userId:r,username:"user".concat(r),blacklistedAt:"".concat(n,"T").concat(Math.floor(24*Math.random()).toString().padStart(2,"0"),":").concat(Math.floor(60*Math.random()).toString().padStart(2,"0"),":").concat(Math.floor(60*Math.random()).toString().padStart(2,"0"),"Z"),reason:["LOGOUT","PASSWORD_CHANGE","ADMIN_ACTION","SUSPICIOUS_ACTIVITY"][Math.floor(4*Math.random())],expirationDate:new Date(Date.now()+864e5*Math.random()*30).toISOString()}}});(0,c.he)(s.an.BlacklistedToken,"blacklisted_tokens",q,q.length);let K=["STORE","MALL","OFFICE","POPUP","OUTDOOR","ONLINE"],Y=Array(30).fill(null).map((e,t)=>{let a=t+1,r=Math.floor(5*Math.random())+1,n=Math.floor(15*Math.random())+1,o=K[Math.floor(Math.random()*K.length)];return{data:{id:a,name:"Location ".concat(a),address:"".concat(Math.floor(1e3*Math.random())," Main Street"),city:["Hanoi","Ho Chi Minh City","Da Nang","Hue","Can Tho"][Math.floor(5*Math.random())],provinceId:n,eventId:r,type:o,capacity:Math.floor(500*Math.random())+50,active:Math.random()>.2,startDate:new Date(Date.now()-864e5*Math.random()*30).toISOString().split("T")[0],endDate:new Date(Date.now()+864e5*Math.random()*30).toISOString().split("T")[0],latitude:10*Math.random()+10,longitude:10*Math.random()+105,createdAt:new Date(Date.now()-1e10*Math.random()).toISOString(),updatedAt:new Date().toISOString()}}}),Q=(0,c.he)(s.an.EventLocation,"event_locations",Y,Y.length);Q.relatedLinkedObjects={participants:{id:1,objectType:s.an.Participant,description:"Participants at this location",key:{keys:["id"]}}},Q.rows.forEach(e=>{let t=e.data.eventId,a=e.data.provinceId;Q.relatedLinkedObjects["event_".concat(t)]={id:t,name:"Event ".concat(t),objectType:s.an.Event,description:"Parent event",key:{keys:["id"]}},Q.relatedLinkedObjects["province_".concat(a)]={id:a,name:"Province ".concat(a),objectType:s.an.Province,description:"Location province",key:{keys:["id"]}},"data"in e&&e.data.id&&(e.relatedTables=["participants"])});let X=["John","Mary","Robert","Lisa","James","Jennifer","David","Sarah","Michael","Emily"],Z=["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor"],$=Array(50).fill(null).map((e,t)=>{let a=X[Math.floor(Math.random()*X.length)],r=Z[Math.floor(Math.random()*Z.length)],n="".concat(a.toLowerCase(),".").concat(r.toLowerCase()).concat(Math.floor(100*Math.random()),"@example.com"),o=Math.floor(15*Math.random())+1;return{data:{id:t+1,firstName:a,lastName:r,email:n,phone:"+84".concat(Math.floor(1e9*Math.random())),gender:["MALE","FEMALE","OTHER"][Math.floor(3*Math.random())],age:Math.floor(60*Math.random())+18,address:"".concat(Math.floor(1e3*Math.random())," ").concat(["Main St","Oak Ave","Maple Rd","Pine Blvd"][Math.floor(4*Math.random())]),city:["Hanoi","Ho Chi Minh City","Da Nang","Hue","Can Tho"][Math.floor(5*Math.random())],provinceId:o,registrationDate:(0,c.DJ)(),totalSpins:Math.floor(50*Math.random()),winCount:Math.floor(10*Math.random()),active:Math.random()>.1}}}),ee=(0,c.he)(s.an.Participant,"participants",$,100);ee.relatedLinkedObjects={participantEvents:{id:1,objectType:s.an.ParticipantEvent,description:"Events this participant joined",key:{keys:["id"]}},spinHistory:{id:2,objectType:s.an.SpinHistory,description:"Spin history for this participant",key:{keys:["id"]}}},ee.rows.forEach(e=>{let t=e.data.provinceId;ee.relatedLinkedObjects["province_".concat(t)]={id:t,name:"Province ".concat(t),objectType:s.an.Province,description:"Participant's province",key:{keys:["id"]}},"data"in e&&e.data.id&&(e.relatedTables=["participantEvents","spinHistory"])});let et=Array(100).fill(null).map((e,t)=>{let a=Math.floor(50*Math.random())+1,r=Math.floor(5*Math.random())+1,n=Math.floor(30*Math.random())+1;return{data:{id:t+1,participantId:a,eventId:r,joinDate:(0,c.DJ)(),locationId:Math.random()>.3?n:null,status:["ACTIVE","INACTIVE","BANNED","COMPLETED"][Math.floor(4*Math.random())],totalSpins:Math.floor(20*Math.random()),lastSpinDate:Math.random()>.6?(0,c.DJ)():null,notes:Math.random()>.8?"Note for participant ".concat(a," in event ").concat(r):null,createdAt:(0,c.DJ)()}}}),ea=(0,c.he)(s.an.ParticipantEvent,"participant_events",et,200),er=new Set;ea.rows.forEach(e=>{let t=e.data.participantId,a=e.data.eventId,r=e.data.locationId;t&&!er.has("participant_".concat(t))&&(ea.relatedLinkedObjects["participant_".concat(t)]={id:t,name:"Participant ".concat(t),objectType:s.an.Participant,description:"Participant",key:{keys:["id"]}},er.add("participant_".concat(t))),a&&!er.has("event_".concat(a))&&(ea.relatedLinkedObjects["event_".concat(a)]={id:a,name:"Event ".concat(a),objectType:s.an.Event,description:"Event",key:{keys:["id"]}},er.add("event_".concat(a))),r&&!er.has("location_".concat(r))&&(ea.relatedLinkedObjects["location_".concat(r)]={id:r,name:"Location ".concat(r),objectType:s.an.EventLocation,description:"Event location where participant joined",key:{keys:["id"]}},er.add("location_".concat(r)))}),ea.relatedLinkedObjects.spinHistory={id:1,objectType:s.an.SpinHistory,description:"Spin history for this participation",key:{keys:["id"]}},ea.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["spinHistory"])});var en=a(9509);let eo=localStorage.getItem("token"),ei={baseUrl:en.env.NEXT_PUBLIC_API_BASE_URL||"http://opsched.deltavn.vn:8014/luckydraw/api",useMockData:"true"===en.env.NEXT_PUBLIC_USE_MOCK_DATA,timeout:3e4,headers:{"Content-Type":"application/json",...eo?{Authorization:"Bearer ".concat(eo)}:{}}},el={events:h,participants:ee,regions:y,provinces:N,rewards:E,golden_hours:D,audit_log:P,spin_history:S.B,users:H,roles:F};function es(e){let t=s.an[e.objectType].toLowerCase(),a=el[t];if(!a){let e={participant:"participants",event:"events",reward:"rewards",user:"users",role:"roles",region:"regions",province:"provinces",goldenhour:"golden_hours",auditlog:"audit_log",spinhistory:"spin_history"}[t];e&&(a=el[e])}return a?{...a,currentPage:e.page,pageSize:e.size,originalRequest:e}:function(e){let{objectType:t,page:a,size:r,sorts:n,filters:o,search:i}=e;try{var l,c;let p=function(e,t){let a=[],r=new Date,n=["ACTIVE","INACTIVE","PENDING","COMPLETED"];for(let t=1;t<=100;t++){let o=new Date(r);o.setDate(r.getDate()-Math.floor(30*Math.random()));let i={id:t,version:0,createdBy:"user".concat(Math.floor(5*Math.random())+1),createdDate:o.toISOString(),lastModifiedBy:"user".concat(Math.floor(5*Math.random())+1),lastModifiedDate:new Date().toISOString(),status:n[Math.floor(Math.random()*n.length)]};switch(e){case s.an.Event:a.push({...i,name:"Event ".concat(t),description:"Description for Event ".concat(t),startDate:new Date(r.getTime()+864e5*t).toISOString(),endDate:new Date(r.getTime()+864e5*(t+7)).toISOString(),location:"Location ".concat(t),maxParticipants:100+10*t,currentParticipants:Math.floor(Math.random()*(100+10*t))});break;case s.an.Participant:a.push({...i,name:"Participant ".concat(t),email:"participant".concat(t,"@example.com"),phone:"+1".concat(Math.floor(1e9+9e9*Math.random())),joinDate:o.toISOString(),points:Math.floor(1e3*Math.random()),eventId:Math.floor(5*Math.random())+1});break;case s.an.Reward:a.push({...i,name:"Reward ".concat(t),description:"Description for Reward ".concat(t),points:Math.floor(500*Math.random())+50,quantity:Math.floor(100*Math.random()),eventId:Math.floor(5*Math.random())+1,redeemCount:Math.floor(50*Math.random())});break;case s.an.Region:a.push({...i,name:"Region ".concat(t),code:"R".concat(t),description:"Description for Region ".concat(t)});break;case s.an.Province:a.push({...i,name:"Province ".concat(t),code:"P".concat(t),regionId:Math.floor(5*Math.random())+1});break;case s.an.GoldenHour:a.push({...i,name:"Golden Hour ".concat(t),startTime:"".concat(Math.floor(24*Math.random()),":00"),endTime:"".concat(Math.floor(24*Math.random()),":00"),multiplier:3*Math.random()+1,eventId:Math.floor(5*Math.random())+1});break;case s.an.User:a.push({...i,username:"user".concat(t),email:"user".concat(t,"@example.com"),fullName:"User ".concat(t),roleId:Math.floor(3*Math.random())+1,lastLogin:new Date(r.getTime()-Math.floor(864e5*Math.random()*7)).toISOString()});break;case s.an.Role:a.push({...i,name:"Role ".concat(t),description:"Description for Role ".concat(t),permissions:["READ","WRITE","DELETE"].slice(0,Math.floor(3*Math.random())+1).join(",")});break;case s.an.AuditLog:a.push({...i,action:["CREATE","UPDATE","DELETE","LOGIN","LOGOUT"][Math.floor(5*Math.random())],entityType:Object.values(s.an)[Math.floor(Math.random()*Object.values(s.an).length)],entityId:Math.floor(100*Math.random())+1,userId:Math.floor(5*Math.random())+1,details:"User performed action on ".concat(new Date(r.getTime()-Math.floor(864e5*Math.random()*30)).toISOString())});break;case s.an.SpinHistory:a.push({...i,participantId:Math.floor(100*Math.random())+1,eventId:Math.floor(5*Math.random())+1,rewardId:Math.floor(20*Math.random())+1,spinDate:new Date(r.getTime()-Math.floor(864e5*Math.random()*30)).toISOString(),pointsUsed:Math.floor(100*Math.random())+10,result:Math.random()>.3?"WIN":"LOSE"});break;default:a.push({...i,name:"Item ".concat(t),description:"Generic item ".concat(t," description")})}}return a}(t,100),u=(l=function(e,t,a){var r,n;if(!t||0===Object.keys(t).length)return e;let o=t[a];if(!(null==o||null==(n=o.data)||null==(r=n.data)?void 0:r._search))return e;let i=o.data.data._search.toLowerCase();return e.filter(e=>Object.values(e).some(e=>null!=e&&String(e).toLowerCase().includes(i)))}(p,i,t),c=o&&0!==o.length?l.filter(e=>o.every(t=>{let{field:a,filterType:r,minValue:n,maxValue:o}=t,i=e[a];if(void 0===i)return!0;switch(r){case s.RJ.EQUALS:if("number"==typeof i)return i===Number(n);return i===n;case s.RJ.CONTAINS:return"string"==typeof i&&i.toLowerCase().includes(n.toLowerCase());case s.RJ.STARTS_WITH:return"string"==typeof i&&i.toLowerCase().startsWith(n.toLowerCase());case s.RJ.ENDS_WITH:return"string"==typeof i&&i.toLowerCase().endsWith(n.toLowerCase());case s.RJ.BETWEEN:if("number"==typeof i){let e=""!==n?Number(n):null,t=""!==o?Number(o):null;return(null===e||i>=e)&&(null===t||i<=t)}if(i instanceof Date||"string"==typeof i&&!isNaN(Date.parse(i))){let e=new Date(i).getTime(),t=""!==n?new Date(n).getTime():null,a=""!==o?new Date(o).getTime():null;return(null===t||e>=t)&&(null===a||e<=a)}return!0;default:return!0}})):l,n&&0!==n.length?[...c].sort((e,t)=>{for(let a of n){let{field:r,sortType:n}=a;if(void 0!==e[r]&&void 0!==t[r]){if(e[r]<t[r])return n===s.r3.ASCENDING?-1:1;if(e[r]>t[r])return n===s.r3.ASCENDING?1:-1}}return 0}):c),{items:m,totalItems:h,totalPages:f}=function(e,t,a){let r=e.length,n=Math.ceil(r/a),o=t*a;return{items:e.slice(o,o+a),totalItems:r,totalPages:n}}(u,a,r),y=m.map(e=>({data:e,tableInfo:{key:{keys:[]},status:s.Lx.SUCCESS,message:"",totalPage:f,currentPage:a,pageSize:r,totalElements:h,tableName:t,fieldNameMap:d(t),rows:[],relatedLinkedObjects:{}}}));return{key:{keys:[]},status:s.Lx.SUCCESS,message:"",totalPage:f,currentPage:a,pageSize:r,totalElements:h,tableName:t,rows:y,fieldNameMap:d(t),originalRequest:e,statistics:{charts:{statusDistribution:[{chartName:"Status Distribution",chartType:"pie",chartData:{ACTIVE:[Math.floor(30*Math.random())+20+""],INACTIVE:[Math.floor(20*Math.random())+10+""],PENDING:[Math.floor(15*Math.random())+5+""],COMPLETED:[Math.floor(10*Math.random())+2+""]}}]}},relatedLinkedObjects:{},first:0===a,last:a===f-1,empty:0===y.length,numberOfElements:y.length}}catch(a){return console.error("Error generating mock data:",a),{key:{keys:[]},status:s.Lx.ERROR,message:"Error generating mock data: ".concat(a.message),totalPage:0,currentPage:0,pageSize:0,totalElements:0,tableName:t,rows:[],fieldNameMap:{},originalRequest:e,statistics:{charts:{}},relatedLinkedObjects:{},first:!0,last:!0,empty:!0,numberOfElements:0}}}(e)}let ed={[s.an.Event]:"events",[s.an.Region]:"regions",[s.an.Province]:"provinces",[s.an.Reward]:"rewards",[s.an.GoldenHour]:"goldenHours",[s.an.Participant]:"participants",[s.an.SpinHistory]:"spinHistories",[s.an.AuditLog]:"auditLogs",[s.an.Statistics]:"statistics",[s.an.User]:"users",[s.an.Role]:"roles",[s.an.Permission]:"permissions",[s.an.Configuration]:"configurations",[s.an.BlacklistedToken]:"blacklistedTokens",[s.an.EventLocation]:"eventLocations",[s.an.ParticipantEvent]:"participantEvents",[s.an.RewardEvent]:"rewardEvents",[s.an.JobImportHistory]:"jobImportHistory",[s.an.JobImportHistoryDetail]:"jobImportHistoryDetail",[s.an.RewardDistribute]:"rewardDistribute",[s.an.DailyRewardDistribution]:"dailyRewardDistribution"};function ec(e){let t=ei.baseUrl.endsWith("/")?ei.baseUrl.slice(0,-1):ei.baseUrl,a=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(a)}let ep=new Map;async function eu(e){try{if(void 0===e.objectType)throw console.error("Missing objectType in request:",e),Error("objectType is required in the request");if(ei.useMockData)return es(e);let t=JSON.stringify({objectType:e.objectType,page:e.page,size:e.size,sorts:e.sorts,filters:e.filters}),a=ep.get(t);if(a){if(Date.now()-a.timestamp<5e3)return console.log("Using cached response for ".concat(e.objectType)),a.response||a.promise;ep.delete(t)}console.log("Sending table data request:",e);let r=ed[e.objectType];if(!r)throw Error("No API endpoint mapping found for ObjectType: ".concat(e.objectType));let n="".concat(ei.baseUrl,"/table-data/fetch/").concat(r),o={...e,entityName:r};console.log("Fetching data from: ".concat(n),o);let i=(async()=>{try{let a=await fetch(n,{method:"POST",headers:{...ei.headers,"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(o),cache:"no-store"});if(!a.ok){let e=await a.text();throw console.error("API request failed with status ".concat(a.status,":"),e),Error("API error: ".concat(a.status," ").concat(e?"- "+e:""))}let r=await a.json();if(ep.has(t)&&(ep.get(t).response=r),ei.useMockData&&(!r||!r.rows||0===r.rows.length))return console.log("No data returned from API for ".concat(e.objectType,", using mock data instead.")),es(e);return r}catch(a){if(ep.delete(t),console.error("Error fetching table data:",a),ei.useMockData)return console.log("API request failed, using mock data as fallback for ".concat(e.objectType)),es(e);throw a}})();return ep.set(t,{timestamp:Date.now(),promise:i}),i}catch(e){throw console.error("Error in fetchTableData:",e),e}}async function em(e,t,a,r,n){console.log("Performing ".concat(e," for entity type:"),t,"with data:",a);try{let o={objectType:t,action:e,entityName:t.toString(),data:a};n&&(o.uploadFile=n),r&&r.originalRequest&&r.originalRequest.filters&&(o.filters=r.originalRequest.filters),r&&r.originalRequest&&r.originalRequest.sorts&&(o.sorts=r.originalRequest.sorts),r&&r.originalRequest&&r.originalRequest.search&&(o.search=r.originalRequest.search);let i=ec("table-data/action/".concat("object"==typeof t&&ed[t]?ed[t]:"".concat(String(t).toLowerCase(),"s").replace(/\/+$/,"")));console.log("Making API call to:",i);let l=await fetch(i,{method:"POST",headers:{...ei.headers},body:JSON.stringify(o)});if(!l.ok){let t=await l.text();return console.error("Error performing ".concat(e,":"),t),{success:!1,message:"API error: ".concat(l.status," ").concat(t||"")}}let d=await l.json();if(console.log("".concat(e," API response:"),d),e===s.vh.EXPORT&&d.data&&d.data.data&&d.data.data.downloadToken){let e=d.data.data.downloadToken,t=d.data.data.fileName||"export.xlsx",a=ec("table-data/download/".concat(t,"?token=").concat(e)),r=document.createElement("a");r.href=a,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}return{success:!0,...d}}catch(t){return console.error("Error performing ".concat(e,":"),t),{success:!1,message:t instanceof Error?t.message:"Unknown error"}}}async function eh(e,t,a){return em(s.vh.ADD,e,t,a)}async function ef(e,t,a){return em(s.vh.UPDATE,e,t,a)}async function ey(e,t,a){return em(s.vh.DELETE,e,t,a)}setInterval(()=>{let e=Date.now();ep.forEach((t,a)=>{e-t.timestamp>5e3&&ep.delete(a)})},6e4);let eg=async(e,t)=>{try{var a,r,n,o,i,l,s;let d=eT("Export started","Your export is being prepared...","info"),c="string"==typeof e?e.toLowerCase():"object"==typeof e&&ed[e]?ed[e]:String(e).toLowerCase(),p=c.endsWith("s")?c:"".concat(c,"s"),u=ec("table-data/action/".concat(p));console.log("Using final API URL:",u);let m={action:"EXPORT",objectType:e,filters:(null==(a=t.originalRequest)?void 0:a.filters)||[],sorts:(null==(r=t.originalRequest)?void 0:r.sorts)||[],search:(null==(n=t.originalRequest)?void 0:n.search)||{}};console.log("Export request payload:",m);let h=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!h.ok){let e=await h.text();return console.error("Export failed with status:",h.status),console.error("Error response:",e),ev(d,"Export failed","Server error: ".concat(h.status),"error"),!1}let f=await h.json(),y=null==(i=f.data)||null==(o=i.data)?void 0:o.downloadToken,g=null==(s=f.data)||null==(l=s.data)?void 0:l.fileName;if(!y||!g)return console.error("Invalid export response:",f),ev(d,"Export failed","Invalid response from server","error"),!1;{let e=ec("table-data/download/".concat(g,"?token=").concat(y));return ev(d,"Export in progress","Your file is being prepared...","info"),await eb(e,g,d)}}catch(e){return console.error("Error exporting data:",e),!1}},eb=async function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2e3,o=1;for(;-1===r||o<=r;)try{ev(a,"Export in progress",-1===r?"Waiting for file to be ready... (attempt ".concat(o,")"):"Waiting for file to be ready... (attempt ".concat(o,"/").concat(r,")"),"info"),await new Promise(e=>setTimeout(e,n));let i=await fetch(e,{method:"HEAD"});console.log("HEAD request status: ".concat(i.status));let l={};if(i.headers.forEach((e,t)=>{l[t]=e}),console.log("Response headers:",l),200===i.status||202!==i.status&&i.headers.get("Content-Disposition")){if(await eN(e,t))return ev(a,"Export complete","Your file is ready","success"),!0;return ev(a,"Export failed","Download could not be started","error"),!1}if(202===i.status){let e,t=i.headers.get("Retry-After");t?(e=1e3*parseInt(t,10),console.log("Server requested retry after ".concat(e,"ms"))):e=Math.min(1.5*n,1e4),n=e,o++;continue}return ev(a,"Export failed","Server returned status ".concat(i.status),"error"),!1}catch(e){console.error("Error polling for file:",e),o++}return ev(a,"Export timed out","File took too long to prepare","error"),!1},eN=async(e,t)=>new Promise(a=>{try{console.log("Attempting to download file from: ".concat(e)),fetch(e,{method:"GET",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/octet-stream"}}).then(e=>{console.log("GET request status: ".concat(e.status));let t={};e.headers.forEach((e,a)=>{t[a]=e}),console.log("Response headers:",t);let a=e.headers.get("Content-Type"),r=e.headers.get("Content-Disposition"),n=e.headers.get("Content-Length");if(console.log("Content-Type:",a),console.log("Content-Disposition:",r),console.log("Content-Length:",n),!e.ok)throw Error("HTTP error! Status: ".concat(e.status));if(202===e.status)return console.log("File still not ready (202 status)"),null;if(n&&0>=parseInt(n,10))throw console.error("Empty response received"),Error("Server returned empty file");return e.blob()}).then(e=>{if(!e)return void a(!1);if(console.log("Received blob of type: ".concat(e.type,", size: ").concat(e.size," bytes")),e.size<=0){console.error("Empty blob received"),a(!1);return}let r=window.URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),setTimeout(()=>{window.URL.revokeObjectURL(r),document.body.removeChild(n),a(!0)},100)}).catch(e=>{console.error("Download error:",e),a(!1)})}catch(e){console.error("Error triggering download:",e),a(!1)}}),eT=(e,t,a)=>{let r="notification-".concat(Date.now()),n=document.getElementById("notification-container");n||((n=document.createElement("div")).id="notification-container",n.style.position="fixed",n.style.bottom="20px",n.style.right="20px",n.style.zIndex="9999",document.body.appendChild(n));let o=document.createElement("div");o.id=r,o.className="notification notification-".concat(a),o.style.padding="12px 16px",o.style.margin="8px 0",o.style.borderRadius="4px",o.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)",o.style.backgroundColor="info"===a?"#007acc":"success"===a?"#28a745":"#dc3545",o.style.color="white",o.style.position="relative",o.innerHTML='\n        <div style="font-weight: bold;">'.concat(e,'</div>\n        <div style="font-size: 0.875em;">').concat(t,"</div>\n    ");let i=document.createElement("button");return i.innerHTML="&times;",i.style.position="absolute",i.style.top="8px",i.style.right="8px",i.style.background="none",i.style.border="none",i.style.color="white",i.style.fontSize="16px",i.style.cursor="pointer",i.onclick=()=>n.removeChild(o),o.appendChild(i),n.appendChild(o),"error"!==a&&setTimeout(()=>{document.getElementById(r)&&n.removeChild(o)},2e4),r},ev=(e,t,a,r)=>{let n=document.getElementById(e);if(!n)return;n.style.backgroundColor="info"===r?"#007acc":"success"===r?"#28a745":"#dc3545",n.innerHTML='\n        <div style="font-weight: bold;">'.concat(t,'</div>\n        <div style="font-size: 0.875em;">').concat(a,"</div>\n    ");let o=document.createElement("button");o.innerHTML="&times;",o.style.position="absolute",o.style.top="8px",o.style.right="8px",o.style.background="none",o.style.border="none",o.style.color="white",o.style.fontSize="16px",o.style.cursor="pointer",o.onclick=()=>{let e=n.parentElement;e&&e.removeChild(n)},n.appendChild(o),"success"===r&&setTimeout(()=>{if(document.getElementById(e)){let e=n.parentElement;e&&e.removeChild(n)}},5e3)},ex=async function(e,t){try{let a=eT("Import started","Your import result is being prepared...","info"),r=await t.arrayBuffer(),n=new Uint8Array(r),o="";for(let e=0;e<n.length;e++)o+=String.fromCharCode(n[e]);let i=btoa(o),l=String(e).toLowerCase(),s={action:"IMPORT",objectType:e,filters:[],sorts:[],search:{},uploadFile:{fileName:t.name,fileContent:i}},d=ec("/table-data/action/".concat(l)),c=await fetch(d,{method:"POST",headers:{...ei.headers},body:JSON.stringify(s)});if(!c.ok){let e=await c.text();return console.error("Import failed with status:",c.status),console.error("Error response:",e),ev(a,"Import failed","Server error: ".concat(c.status),"error"),!1}let p=await c.json(),u=p.jobId;if(!u)return console.error("Invalid import response:",p),ev(a,"Import failed","Invalid response from server","error"),!1;{let e=ec("table-data/import-status/".concat(u));return ev(a,"Import in progress","Import file is processing...","info"),await eE(e,a)}}catch(e){return console.error("Error importing table data:",e),!1}},eE=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3,n=1;for(;-1===a||n<=a;)try{ev(t,"Import in progress",-1===a?"Waiting for process complete... (attempt ".concat(n,")"):"Waiting for process complate... (attempt ".concat(n,"/").concat(a,")"),"info"),await new Promise(e=>setTimeout(e,r));let o=await fetch(e,{method:"GET"}),i=await o.json();if(200!==o.status)return ev(t,"Export failed","Import could not be started","error"),!1;if("PROGRESS"!==i.status)return ev(t,"Import complete","Check in import history is ready","success"),!0;{let e;e=1e3*parseInt("2",10),console.log("Server requested retry after ".concat(e,"ms")),r=e,n++;continue}}catch(e){console.error("Error polling for file:",e),n++}return ev(t,"Import timed out","File took too long to prepare","error"),!1},ej=e=>null==e?"-":"object"==typeof e?e instanceof Date?e.toLocaleString():"string"==typeof e&&e.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(e).toLocaleString():(null==e?void 0:e.id)&&(null==e?void 0:e.name)?e.name:(null==e?void 0:e.token)&&(null==e?void 0:e.tokenType)?"".concat(e.tokenType,": ").concat(e.token.substring(0,10),"..."):"{Object}":"boolean"==typeof e?e?"":"":String(e),ew=e=>e?Object.entries(e).map(e=>{let t,[a,n]=e,o=n.fieldName.charAt(0).toUpperCase()+n.fieldName.slice(1).replace(/([A-Z])/g," $1");"BOOLEAN"===n.fieldType&&(t=e=>!0===e?"":!1===e?"":"-"),["DATETIME","DATE"].includes(n.fieldType)&&(t=e=>e?new Date(e).toLocaleString():"-"),"status"===a&&(t=e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("ACTIVE"===e?"bg-green-800 text-green-200":"INACTIVE"===e?"bg-red-800 text-red-200":"bg-gray-800 text-gray-200"),children:e}));let i="id"===a,l="viewId"===a,d=n.sortType===s.r3.UNSORTABLE&&!l,c=i||"currentServerTime"===a,p=!["id","viewId","version","createdBy","updatedBy","createdDate","lastModifiedDate"].includes(a);return{key:a,header:"viewId"===a?"ID":o,fieldType:n.fieldType,sortable:!!l||!d,filterable:!0,render:t,editable:p&&!1!==n.editable,hidden:c}}).sort((e,t)=>"viewId"===e.key?-1:"viewId"===t.key?1:"status"===e.key?-1:"status"===t.key?1:e.key.localeCompare(t.key)):[],eI=e=>{let{initialData:t,columns:a,actions:o,entityType:i,fetchData:l,onEdit:d,onDelete:c,onSave:p,onAdd:u,onSearchChange:m,onSortChange:h,onPageChange:f,onFilterChange:y}=e,g={totalPage:0,currentPage:0,pageSize:10,totalElements:0,tableName:i||"empty",rows:[],status:"NO_DATA",message:"No data available",fieldNameMap:{},originalRequest:{page:0,size:10,sorts:[],filters:[],search:Object.values(s.an).reduce((e,t)=>(e[t]={objectType:t,key:{keys:[]},fieldNameMap:{},description:"",data:{data:{}},order:0},e),{}),objectType:i},statistics:{charts:{}},relatedLinkedObjects:{},first:!0,last:!0,empty:!0,numberOfElements:0},b=t||g,N=(0,n.useRef)(b),[T,v]=(0,n.useState)(b),[x,E]=(0,n.useState)(null),[j,w]=(0,n.useState)(""),[I,D]=(0,n.useState)({}),[S,R]=(0,n.useState)(null),[M,A]=(0,n.useState)({pageIndex:0,pageSize:10,totalItems:b.totalElements,totalPages:Math.max(1,b.totalPage)}),[C,P]=(0,n.useState)(null),[O,U]=(0,n.useState)(!1),[k,L]=(0,n.useState)(null),[B,G]=(0,n.useState)(null),[H,_]=(0,n.useState)("asc"),[F,J]=(0,n.useState)(!1),[V,W]=(0,n.useState)(!1),[z,q]=(0,n.useState)(!1),[K,Y]=(0,n.useState)(!1),[Q,X]=(0,n.useState)(null),[Z,$]=(0,n.useState)(null),[ee,et]=(0,n.useState)(null),[ea,er]=(0,n.useState)(!1),en=(0,n.useRef)(!1),eo=(0,n.useRef)(!1),ei=(0,n.useRef)(null),el=(0,n.useRef)(null),es=(0,n.useRef)(null),ed=(0,n.useRef)("asc"),ec=(0,n.useMemo)(()=>(a||((null==T?void 0:T.fieldNameMap)?ew(T.fieldNameMap):[])).filter(e=>!e.hidden),[a,null==T?void 0:T.fieldNameMap]),ep=(0,n.useCallback)(e=>{var t,a,r,n;(null==(t=e.data)?void 0:t.id)&&x!==(null==(a=e.data)?void 0:a.id)&&E(null==(r=e.data)?void 0:r.id),P((null==(n=e.data)?void 0:n.id)||null),$(e),d&&d(e)},[x,d]),em=(0,n.useCallback)(()=>{et("cancel"),W(!0)},[]),eb=(0,n.useCallback)((e,t)=>{let a=Object.entries(t).reduce((e,t)=>{let[a,r]=t;return("id"===a||null!==r&&"object"!=typeof r)&&(e[a]=r),e},{});console.log("Clean data:",a),$({data:a}),et("save"),requestAnimationFrame(()=>{q(!0)})},[]),eN=(0,n.useCallback)(e=>{X({data:e}),et("delete"),Y(!0)},[]),eT=(0,n.useMemo)(()=>[{label:"Edit",onClick:e=>{e&&ep(e)},color:"blue",iconLeft:(0,r.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,r.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),showDetail:!0},{label:"Delete",onClick:e=>{(null==e?void 0:e.data)&&eN(e.data)},color:"red",iconLeft:(0,r.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,r.jsx)("path",{d:"M10 11v6"}),(0,r.jsx)("path",{d:"M14 11v6"})]})}],[ep,eN]),ev=(0,n.useMemo)(()=>{let e=(o||[]).filter(e=>!e.isTableAction);return e.length>0?e.concat(eT):eT},[o,eT]),eE=(0,n.useMemo)(()=>(o||[]).filter(e=>e.isTableAction),[o]),ej=(0,n.useMemo)(()=>Object.entries(I).filter(e=>{let[t,a]=e;return a.active}).map(e=>{let[t]=e;return t}),[I]),eI=async e=>{try{let t=i&&("string"==typeof i?s.an[i.toUpperCase()]:i),a={...e,objectType:e.objectType||t};if(!a.objectType)return console.error("No objectType provided for request:",a),g;return await eu(a)}catch(e){return console.error("Error fetching ".concat(i," data:"),e),g}},eD=l||eI,eS=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};el.current&&(clearTimeout(el.current),el.current=null);let{pageIndex:a=M.pageIndex,pageSize:r=M.pageSize,sortField:n=es.current||B,sortDirection:o=ed.current||H,filters:l=I,searchTerm:d=j,isInitialLoad:c=!1,isForceReload:p=!1,isSortChange:u=!1}=e;if(t&&!p&&!c&&!u||!en.current)return;let m=JSON.stringify({pageIndex:a,pageSize:r,sortField:n,sortDirection:o,filters:l,searchTerm:d});if((m!==ei.current||p)&&(!c||!eo.current)){ei.current=m,J(!0);try{var h;let e=Object.entries(l).filter(e=>{let[t,a]=e;return a.active}).map(e=>{let t,[a,r]=e,n=String(r.value||""),o=String(r.secondValue||"");switch(r.operator){case"equals":default:t=s.RJ.EQUALS;break;case"contains":t=s.RJ.CONTAINS;break;case"startsWith":t=s.RJ.STARTS_WITH;break;case"endsWith":t=s.RJ.ENDS_WITH;break;case"greaterThan":t=s.RJ.GREATER_THAN;break;case"lessThan":t=s.RJ.LESS_THAN;break;case"between":t=s.RJ.BETWEEN}return{field:a,filterType:t,minValue:n,maxValue:o}}),t={page:a,size:r,sorts:n?[{field:n,sortType:"asc"===o?s.r3.ASCENDING:s.r3.DESCENDING}]:[],filters:e,search:(null==(h=N.current.originalRequest)?void 0:h.search)||{},objectType:i};"string"==typeof i?t.entityName=i.toLowerCase():t.entityName=String(i).toLowerCase(),console.log("Sending table data request:",t);let d=await eD(t);N.current=d,v(d),A({pageIndex:d.currentPage,pageSize:d.pageSize,totalItems:d.totalElements,totalPages:Math.max(1,d.totalPage)}),c&&(eo.current=!0)}catch(e){console.error("Error fetching data for ".concat(i,":"),e)}finally{J(!1)}}},[i,t,M,B,H,I,j,eD]);(0,n.useEffect)(()=>(en.current=!0,t||(el.current=setTimeout(()=>eS({isInitialLoad:!0}),50)),()=>{en.current=!1,el.current&&clearTimeout(el.current)}),[i,t,eS]),(0,n.useEffect)(()=>{if(!t&&eo.current)return el.current&&clearTimeout(el.current),el.current=setTimeout(()=>{es.current=B,ed.current=H,eS()},300),()=>{el.current&&clearTimeout(el.current)}},[M.pageIndex,M.pageSize,B,H,I,j,eS,t]);let eR=(0,n.useCallback)(()=>{let e={};ec.forEach(t=>e[t.key]=null),L({data:{id:-1,...e}}),U(!0),u&&u()},[ec,u]),eM=(0,n.useCallback)(async e=>{if("cancel"===ee)W(!1),e&&(P(null),U(!1));else if("save"===ee){if(q(!1),e&&Z)try{var t,a;let e=O||(null==(t=Z.data)?void 0:t.id)===void 0||(null==(a=Z.data)?void 0:a.id)<0;if(p)await p(null,Z)&&(P(null),U(!1),eS({isForceReload:!0}));else{let t={data:Z.data},a=e?await eh(i,t,T):await ef(i,t,T);a.success?(P(null),U(!1),eS({isForceReload:!0})):console.error("Error saving record:",a.message)}}catch(e){console.error("Error during save operation:",e)}}else if("delete"===ee&&(Y(!1),e&&Q))try{if(c)await c(Q);else{let e=await ey(i,Q,T);e.success?eS({isForceReload:!0}):console.error("Error deleting record:",e.message)}}catch(e){console.error("Error during delete operation:",e)}},[ee,Z,C,O,eS,p,i,T,Q,c]),eA=async()=>{J(!0);try{await eg(i,T)}catch(e){console.error("Export error:",e)}finally{J(!1)}},eC=async(e,t)=>{if(er(!1),J(!0),e)try{console.log("Import action confirmed"),await ex(i,t)}catch(e){console.error("Import error:",e)}finally{J(!1)}};return{data:T,pagination:M,setPagination:e=>{A(t=>({...t,...e})),eS({pageIndex:e.pageIndex,pageSize:e.pageSize,isSortChange:!0})},activeFilters:I,setActiveFilters:e=>{D(e),eS({filters:e,isSortChange:!0})},openFilterColumn:S,setOpenFilterColumn:R,expandedRowId:x,setExpandedRowId:e=>{null!==C||O||E(x===e?null:e)},editingRowId:C,isAddingNewRow:O,newRowData:k,isLoading:F,searchTerm:j,setSearchTerm:e=>{w(e),m&&m(e),el.current&&clearTimeout(el.current),el.current=setTimeout(()=>eS({searchTerm:e}),500)},sortField:B,sortDirection:H,handleSortClick:e=>{let t=B===e&&"asc"===H?"desc":"asc";es.current=e,ed.current=t,G(e),_(t),h&&h(e,t),el.current&&clearTimeout(el.current),eS({sortField:e,sortDirection:t,isSortChange:!0})},handleEdit:ep,handleCancelEdit:em,handleSaveEdit:eb,handleDeleteClick:eN,handleAddNewRow:eR,handleConfirmation:eM,isEditConfirmOpen:V,isSaveConfirmOpen:z,isDeleteConfirmOpen:K,editAction:ee,effectiveColumns:ec,effectiveActions:ev,tableActions:eE,columnsWithActiveFilters:ej,handleExportTable:eA,handleImportTable:e=>{er(e)},isImportDialogOpen:ea,setIsImportDialogOpen:er,handleImportComplete:()=>{eS({isForceReload:!0})},handleActionImportTable:eC}};var eD=a(4416);let eS=e=>{let{column:t,filterState:a,onChange:n,onClose:o}=e;return(0,r.jsxs)("div",{className:"p-2 bg-[#2d2d2d] border border-[#3c3c3c] rounded shadow-lg absolute z-[200] w-64 mt-1",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium",children:["Filter ",t.header]}),(0,r.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-white","aria-label":"Close filter",children:(0,r.jsx)(eD.A,{size:16})})]}),(0,r.jsxs)("select",{className:"mb-2 w-full bg-[#3c3c3c] text-white p-1 rounded",value:a.operator,onChange:e=>n({...a,operator:e.target.value}),children:[(0,r.jsx)("option",{value:"equals",children:"Equals"}),(0,r.jsx)("option",{value:"contains",children:"Contains"}),(0,r.jsx)("option",{value:"startsWith",children:"Starts with"}),(0,r.jsx)("option",{value:"endsWith",children:"Ends with"})]}),(0,r.jsx)("input",{type:"text",className:"w-full bg-[#3c3c3c] text-white p-1 rounded mb-2",value:a.value||"",onChange:e=>n({...a,value:e.target.value}),placeholder:"Enter value..."}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{className:"bg-red-700 text-white px-2 py-1 rounded text-xs",onClick:()=>n({...a,active:!1,value:""}),children:"Clear"}),(0,r.jsx)("button",{className:"bg-[#007acc] text-white px-2 py-1 rounded text-xs",onClick:()=>{n({...a,active:!0}),o()},children:"Apply"})]})]})},eR=e=>{let{column:t,filterState:a,onChange:n,onClose:o}=e,i=["DATE","DATETIME","TIME"].includes(t.fieldType),l=i?"TIME"===t.fieldType?"time":"datetime-local":"number";return(0,r.jsxs)("div",{className:"p-2 bg-[#2d2d2d] border border-[#3c3c3c] rounded shadow-lg absolute z-[200] w-64 mt-1",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium",children:["Filter ",t.header]}),(0,r.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-white","aria-label":"Close filter",children:(0,r.jsx)(eD.A,{size:16})})]}),(0,r.jsxs)("select",{className:"mb-2 w-full bg-[#3c3c3c] text-white p-1 rounded",value:a.operator,onChange:e=>n({...a,operator:e.target.value}),children:[(0,r.jsx)("option",{value:"equals",children:"Equals"}),(0,r.jsx)("option",{value:"greaterThan",children:"Greater than"}),(0,r.jsx)("option",{value:"lessThan",children:"Less than"}),(0,r.jsx)("option",{value:"between",children:"Between"})]}),"between"===a.operator?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("input",{type:l,className:"flex-1 bg-[#3c3c3c] text-white p-1 rounded",value:a.value||"",onChange:e=>n({...a,value:e.target.value}),placeholder:"Min value"}),(0,r.jsx)("span",{children:"to"}),(0,r.jsx)("input",{type:l,className:"flex-1 bg-[#3c3c3c] text-white p-1 rounded",value:a.secondValue||"",onChange:e=>n({...a,secondValue:e.target.value}),placeholder:"Max value"})]})}):(0,r.jsx)("input",{type:l,className:"w-full bg-[#3c3c3c] text-white p-1 rounded mb-2",value:a.value||"",onChange:e=>n({...a,value:e.target.value}),placeholder:i?"Select date/time...":"Enter value..."}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{className:"bg-red-700 text-white px-2 py-1 rounded text-xs",onClick:()=>n({...a,active:!1,value:"",secondValue:""}),children:"Clear"}),(0,r.jsx)("button",{className:"bg-[#007acc] text-white px-2 py-1 rounded text-xs",onClick:()=>{n({...a,active:!0}),o()},children:"Apply"})]})]})},eM=e=>{let{column:t,filterState:a,onChange:n,onClose:o}=e;return(0,r.jsxs)("div",{className:"p-2 bg-[#2d2d2d] border border-[#3c3c3c] rounded shadow-lg absolute z-[200] w-64 mt-1",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium",children:["Filter ",t.header]}),(0,r.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-white","aria-label":"Close filter",children:(0,r.jsx)(eD.A,{size:16})})]}),(0,r.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:"bool-filter-".concat(t.key),checked:!0===a.value,onChange:()=>n({...a,value:!0}),className:"mr-1"}),"True"]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:"bool-filter-".concat(t.key),checked:!1===a.value,onChange:()=>n({...a,value:!1}),className:"mr-1"}),"False"]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:"bool-filter-".concat(t.key),checked:null===a.value||void 0===a.value,onChange:()=>n({...a,value:null}),className:"mr-1"}),"All"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{className:"bg-red-700 text-white px-2 py-1 rounded text-xs",onClick:()=>n({...a,active:!1,value:null}),children:"Clear"}),(0,r.jsx)("button",{className:"bg-[#007acc] text-white px-2 py-1 rounded text-xs",onClick:()=>{n({...a,active:null!==a.value}),o()},children:"Apply"})]})]})},eA=e=>{let{column:t,filterState:a,onChange:n,onClose:o}=e;return"BOOLEAN"===t.fieldType?(0,r.jsx)(eM,{column:t,filterState:a,onChange:n,onClose:o}):["NUMBER","DATE","DATETIME","TIME"].includes(t.fieldType)?(0,r.jsx)(eR,{column:t,filterState:a,onChange:n,onClose:o}):(0,r.jsx)(eS,{column:t,filterState:a,onChange:n,onClose:o})};var eC=a(7863),eP=a(6474),eO=a(1482),eU=a(4616);let ek=e=>{let{columns:t,sortField:a,sortDirection:n,handleSortClick:o,activeFilters:i,openFilterColumn:l,setOpenFilterColumn:s,setActiveFilters:d,showDetailView:c,showDefaultActions:p,handleAddNewRow:u,isAddingNewRow:m,editingRowId:h}=e;return(0,r.jsx)("thead",{className:"bg-[#2d2d2d] text-white font-medium sticky top-0 z-[10]",children:(0,r.jsxs)("tr",{children:[c&&(0,r.jsx)("th",{className:"w-10 p-3 whitespace-nowrap",scope:"col"}),t.map(e=>{var t;return(0,r.jsxs)("th",{className:"text-left p-3 relative",scope:"col",style:{width:"viewId"===e.key?"80px":"auto",minWidth:"viewId"===e.key?"80px":"120px"},children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsxs)("button",{className:"flex-grow flex flex-wrap items-center mr-5 ".concat(e.sortable?"cursor-pointer hover:text-[#007acc]":""," ").concat(a===e.key?"text-[#007acc]":""),onClick:()=>e.sortable&&o(e.key),disabled:!e.sortable,"aria-sort":a===e.key?"asc"===n?"ascending":"descending":"none","aria-label":"Sort by ".concat(e.header),children:[(0,r.jsx)("span",{className:"break-words hyphens-auto pr-1",children:e.header}),a===e.key&&("asc"===n?(0,r.jsx)(eC.A,{className:"h-4 w-4"}):(0,r.jsx)(eP.A,{className:"h-4 w-4"}))]}),e.filterable&&(0,r.jsx)("button",{className:"absolute right-3 top-3 p-1 rounded-full hover:bg-[#3c3c3c] ".concat((null==(t=i[e.key])?void 0:t.active)?"text-[#007acc]":"text-gray-400"),onClick:t=>{t.stopPropagation(),s(l===e.key?null:e.key)},"aria-label":"Filter by ".concat(e.header),children:(0,r.jsx)(eO.A,{size:14})})]}),l===e.key&&(0,r.jsx)(eA,{column:e,filterState:i[e.key]||{field:e.key,operator:"BOOLEAN"===e.fieldType||["NUMBER","DATE","DATETIME","TIME"].includes(e.fieldType)?"equals":"contains",value:null,active:!1},onChange:t=>d({...i,[e.key]:t}),onClose:()=>s(null)})]},e.key)}),p&&(0,r.jsx)("th",{className:"text-right p-3 whitespace-nowrap",scope:"col",style:{width:"auto",minWidth:"150px"},children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Actions"}),(0,r.jsx)("button",{onClick:u,className:"flex items-center justify-center p-1 bg-green-700 text-white rounded hover:bg-green-800",title:"Add new row",disabled:m||null!==h,"aria-label":"Add new row",children:(0,r.jsx)(eU.A,{size:16})})]})})]})})};var eL=a(7183),eB=a(3999);let eG=eL.bL,eH=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(eL.B8,{ref:t,className:(0,eB.cn)("inline-flex items-center justify-center rounded-md bg-[#252525] p-1 text-white",a),...n})});eH.displayName=eL.B8.displayName;let e_=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(eL.l9,{ref:t,className:(0,eB.cn)("inline-flex items-center justify-center whitespace-nowrap px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-[#37373d] data-[state=active]:text-white data-[state=active]:shadow-sm",a),...n})});e_.displayName=eL.l9.displayName;let eF=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(eL.UC,{ref:t,className:(0,eB.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2",a),...n})});eF.displayName=eL.UC.displayName;var eJ=a(4631),eV=a(4229),eW=a(8533);let ez={[s.an.Province]:{region:{relatedEntity:s.an.Region,dropdownKey:"regions",idField:"regionId",displayField:"name",labelField:"Region"}},[s.an.EventLocation]:{region:{relatedEntity:s.an.Region,dropdownKey:"regions",idField:"regionId",displayField:"name",labelField:"Region"},event:{relatedEntity:s.an.Event,dropdownKey:"events",idField:"eventId",displayField:"name",labelField:"Event"}},[s.an.Participant]:{province:{relatedEntity:s.an.Province,dropdownKey:"provinces",idField:"provinceId",displayField:"name",labelField:"Province"}},[s.an.User]:{role:{relatedEntity:s.an.Role,dropdownKey:"roles",idField:"roleId",displayField:"name",labelField:"Role"}},[s.an.Reward]:{},[s.an.GoldenHour]:{},[s.an.Event]:{},[s.an.Region]:{},[s.an.RewardEvent]:{reward:{relatedEntity:s.an.Reward,dropdownKey:"rewards",idField:"rewardId",displayField:"name",labelField:"Reward"},event:{relatedEntity:s.an.Event,dropdownKey:"events",idField:"eventId",displayField:"name",labelField:"Event"}},[s.an.SpinHistory]:{participant:{relatedEntity:s.an.Participant,dropdownKey:"participants",idField:"participantId",displayField:"name",labelField:"Participant"},reward:{relatedEntity:s.an.Reward,dropdownKey:"rewards",idField:"rewardId",displayField:"name",labelField:"Reward"}},[s.an.ParticipantEvent]:{participant:{relatedEntity:s.an.Participant,dropdownKey:"participants",idField:"participantId",displayField:"name",labelField:"Participant"},eventLocation:{relatedEntity:s.an.EventLocation,dropdownKey:"eventLocations",idField:"eventLocationId",displayField:"description",labelField:"Event Location"}},[s.an.Role]:{},[s.an.Permission]:{},[s.an.AuditLog]:{},[s.an.BlacklistedToken]:{},[s.an.Configuration]:{},[s.an.Statistics]:{},[s.an.JobImportHistory]:{},[s.an.JobImportHistoryDetail]:{jobImportHistory:{relatedEntity:s.an.JobImportHistory,dropdownKey:"jobImportHistories",idField:"jobImportHistoryId",displayField:"id",labelField:"Job Import History"}},[s.an.RewardDistribute]:{},[s.an.DailyRewardDistribution]:{}};var eq=a(2076);let eK=e=>{let{initialImage:t,onImageChange:a,className:o=""}=e,[i,l]=(0,n.useState)(t||null),[s,d]=(0,n.useState)(!1),c=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),p=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),d(!0)},[]),u=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),d(!1)},[]),m=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),d(!1);let t=e.dataTransfer.files[0];t&&t.type.startsWith("image/")&&h(t)},[]),h=(0,n.useCallback)(e=>{if(!["image/jpeg","image/png","image/gif","image/webp"].includes(e.type))return void alert("Please upload a valid image file (JPEG, PNG, GIF, or WebP)");if(e.size>5242880)return void alert("Image size should be less than 5MB");let t=new FileReader;t.onloadend=()=>{l(t.result)},t.readAsDataURL(e),a(e)},[a]),f=(0,n.useCallback)(e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&h(a)},[h]),y=(0,n.useCallback)(()=>{l(null),a(null)},[a]);return(0,r.jsx)("div",{className:"relative bg-[#1e1e1e] rounded-lg border-2 border-dashed \n        ".concat(s?"border-blue-500 bg-[#252525]":"border-[#3c3c3c]"," \n        ").concat(o),onDragEnter:p,onDragLeave:u,onDragOver:c,onDrop:m,children:i?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:i,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}),(0,r.jsx)("button",{onClick:y,className:"absolute top-2 right-2 p-1.5 bg-red-500/80 text-white rounded-full hover:bg-red-600 focus:outline-none transition-colors",type:"button",title:"Remove image",children:(0,r.jsx)(eD.A,{size:16})})]}):(0,r.jsxs)("label",{className:"flex flex-col items-center justify-center p-8 cursor-pointer",children:[(0,r.jsx)(eq.A,{className:"w-10 h-10 text-gray-400 mb-3"}),(0,r.jsxs)("span",{className:"text-sm text-gray-400 text-center",children:["Drag and drop an image here",(0,r.jsx)("br",{}),"or click to select"]}),(0,r.jsx)("span",{className:"mt-2 text-xs text-gray-500",children:"Supported formats: JPEG, PNG, GIF, WebP (max 5MB)"}),(0,r.jsx)("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:f})]})})};function eY(e){let{label:t,value:a,isEditing:n=!1,onChange:o,className:i=""}=e;return n?(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("span",{className:"text-gray-400",children:[t,":"]}),(0,r.jsx)(eK,{initialImage:a,onImageChange:null!=o?o:()=>{},className:"w-full aspect-video max-w-md"})]}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("span",{className:"text-gray-400",children:[t,":"]}),a?(0,r.jsx)("img",{src:a,alt:t,className:"w-full max-w-md aspect-video object-cover rounded-lg"}):(0,r.jsx)("span",{className:"text-gray-500",children:"No image"})]})}let eQ=e=>{let{tableRow:t,entityType:a,tableInfo:o,search:i,isEditing:l=!1,isNewRow:d=!1,onCancelEdit:c,onSaveEdit:p,columns:u,excludedStatusOptions:m=[]}=e,[h,f]=(0,n.useState)("details"),[y,g]=(0,n.useState)({details:!0}),[b,N]=(0,n.useState)({}),[T,v]=(0,n.useState)({}),[x,E]=(0,n.useState)({}),[j,w]=(0,n.useState)({}),[I,D]=(0,n.useState)({}),S=e=>{let t={[s.an.Event]:["eventLocations","rewards"],[s.an.Participant]:["participantEvents","spinHistory","province"],[s.an.Reward]:[],[s.an.EventLocation]:["participants"],[s.an.GoldenHour]:["spinHistory","event"],[s.an.SpinHistory]:["participant","reward","goldenHour"],[s.an.Province]:["participants","eventLocations"],[s.an.Region]:["provinces","eventLocations"],[s.an.User]:["participants","auditLogs","role"],[s.an.Role]:["users","permissions"],[s.an.Permission]:["roles"],[s.an.AuditLog]:["user"],[s.an.ParticipantEvent]:["participant","event"],[s.an.RewardEvent]:["reward","event"],[s.an.Statistics]:[],[s.an.Configuration]:[],[s.an.BlacklistedToken]:["user"],[s.an.JobImportHistory]:["jobImportHistoryDetail"],[s.an.JobImportHistoryDetail]:[],[s.an.RewardDistribute]:["dailyRewardDistribution"],[s.an.DailyRewardDistribution]:[]}[e]||[],a=s.an[e].toLowerCase(),r=a+"s";return t.filter(t=>t!==a&&t!==r&&t!==s.an[e])},R=()=>["ACTIVE","INACTIVE","DELETE"].filter(e=>!m.includes(e)),M=(0,n.useMemo)(()=>(console.log("\uD83D\uDD0D DEBUG: Normalizing tableRow data structure:",t),console.log("\uD83D\uDD0D DEBUG: tableRow type:",typeof t),console.log("\uD83D\uDD0D DEBUG: tableRow keys:",t?Object.keys(t):"no tableRow"),null==t?void 0:t.data)?(console.log("\uD83D\uDD0D DEBUG: Found tableRow.data:",t.data),console.log("\uD83D\uDD0D DEBUG: Row data keys:",Object.keys(t.data)),console.log("\uD83D\uDD0D DEBUG: locations field:",t.data.locations),t.data):!t||"object"!=typeof t||"relatedTables"in t||"tableInfo"in t?(console.warn("\uD83D\uDD0D DEBUG: No valid data found in tableRow"),null):(console.log("\uD83D\uDD0D DEBUG: TableRow appears to be direct data object, using as row data"),console.log("\uD83D\uDD0D DEBUG: Direct object keys:",Object.keys(t)),t),[t]);(0,n.useEffect)(()=>{(async()=>{if(!l)return;let e=ez[a];if(e)for(let[a,n]of Object.entries(e)){let e=n.idField.replace("Id","");if((null==M?void 0:M[e])&&"object"==typeof M[e]&&M[e].id){console.log("Using existing data for ".concat(n.dropdownKey," from rowData:"),M[e]),D(t=>({...t,[n.dropdownKey]:[M[e]]})),!d&&M[e].id&&w(t=>({...t,[n.idField]:M[e].id}));continue}v(e=>({...e,["".concat(n.dropdownKey,"Dropdown")]:!0}));try{var t,r;let e={page:0,size:100,sorts:[],filters:[],search:{},objectType:n.relatedEntity,entityName:n.relatedEntity};(null==M?void 0:M[n.idField])&&(e.filters=[{field:"id",filterType:s.RJ.EQUALS,minValue:String(M[n.idField]),maxValue:String(M[n.idField])}]);let a=await eu(e);if(console.log("Loaded ".concat(n.dropdownKey," for dropdown:"),a),(null==(t=a.rows)?void 0:t.length)>0){let e=a.rows.map(e=>e.data);if(D(t=>({...t,[n.dropdownKey]:e})),d&&e.length>0&&!j[n.idField]&&!n.isMultiple){let t=e[0].id;w(e=>e[n.idField]!==t?{...e,[n.idField]:t}:e)}else if(!d&&(null==M?void 0:M[n.idField])){let t=M[n.idField];if(!e.find(e=>e.id===t)){let a={page:0,size:1,sorts:[],filters:[{field:"id",filterType:s.RJ.EQUALS,minValue:String(t),maxValue:String(t)}],search:{},objectType:n.relatedEntity,entityName:n.relatedEntity},o=await eu(a);if((null==(r=o.rows)?void 0:r.length)>0){let t=o.rows[0].data;D(a=>({...a,[n.dropdownKey]:[...e,t]}))}}}}}catch(e){console.error("Failed to load ".concat(n.dropdownKey," for dropdown:"),e)}finally{v(e=>({...e,["".concat(n.dropdownKey,"Dropdown")]:!1}))}}})()},[a,M,l,d]),(0,n.useEffect)(()=>{if(l||!M)return;let e=ez[a];if(e)for(let[t,a]of Object.entries(e)){let e=a.idField.replace("Id","");M[e]&&"object"==typeof M[e]&&void 0!==M[e].id&&(console.log("Found nested relationship data for ".concat(a.dropdownKey,":"),M[e]),D(t=>({...t,[a.dropdownKey]:[M[e]]})))}},[a,M,l]),(0,n.useEffect)(()=>{l&&M&&w({...M})},[l,M]);let A=(0,n.useMemo)(()=>{if(console.log("\uD83D\uDD0D DEBUG: Getting related tables from tableRow.relatedTables"),console.log("\uD83D\uDD0D DEBUG: tableRow?.relatedTables:",null==t?void 0:t.relatedTables),console.log("\uD83D\uDD0D DEBUG: Is array?",Array.isArray(null==t?void 0:t.relatedTables)),console.log("\uD83D\uDD0D DEBUG: Is string?","string"==typeof(null==t?void 0:t.relatedTables)),null==t?void 0:t.relatedTables){let e;Array.isArray(t.relatedTables)?console.log("\uD83D\uDD0D DEBUG: Found related tables array from tableRow:",e=t.relatedTables):"string"==typeof t.relatedTables?console.log("\uD83D\uDD0D DEBUG: Parsed related tables string from tableRow:",e=t.relatedTables.trim().split(/\s+/).filter(Boolean)):e=[];let r=s.an[a].toLowerCase(),n=r+"s",o=e.filter(e=>e!==r&&e!==n&&e!==s.an[a]);return console.log("\uD83D\uDD0D DEBUG: Filtered related tables:",o),o}let e=S(a);return console.log("\uD83D\uDD0D DEBUG: Auto-determined related tables for",a,":",e),e},[t,a]),C=(0,n.useMemo)(()=>i?Object.keys(i).filter(e=>e!==String(s.an[a.toUpperCase()])):[],[i,a]),P=(0,n.useMemo)(()=>{console.log("\uD83D\uDD0D DEBUG: Building allTabs"),console.log("  searchTabs:",C),console.log("  relatedTables:",A);let e=["details",...C,...A];console.log("  final tabs array:",e);let t=Array.from(new Set(e));return console.log("  unique tabs:",t),t},[C,A]);(0,n.useEffect)(()=>{l&&f("details")},[l]);let O=(e,t)=>{w(a=>({...a,[e]:t}))},U=e=>{if(e in s.an||i&&e in i)return s.an[e];let t={PARTICIPANT:s.an.Participant,EVENT:s.an.Event,REWARD:s.an.Reward,SPIN_HISTORY:s.an.SpinHistory,USER:s.an.User,BLACKLISTED_TOKEN:s.an.BlacklistedToken,EVENT_LOCATION:s.an.EventLocation,PROVINCE:s.an.Province,REGION:s.an.Region,ROLE:s.an.Role,PERMISSION:s.an.Permission,GOLDEN_HOUR:s.an.GoldenHour,AUDIT_LOG:s.an.AuditLog,PARTICIPANT_EVENT:s.an.ParticipantEvent,participants:s.an.Participant,events:s.an.Event,rewards:s.an.Reward,spinHistory:s.an.SpinHistory,users:s.an.User,eventLocations:s.an.EventLocation,provinces:s.an.Province,province:s.an.Province,regions:s.an.Region,region:s.an.Region,roles:s.an.Role,role:s.an.Role,permissions:s.an.Permission,permission:s.an.Permission,goldenHours:s.an.GoldenHour,goldenHour:s.an.GoldenHour,auditLog:s.an.AuditLog,auditLogs:s.an.AuditLog,participantEvents:s.an.ParticipantEvent,event:s.an.Event,participant:s.an.Participant,reward:s.an.Reward,user:s.an.User,jobImportHistoryDetail:s.an.JobImportHistoryDetail,dailyRewardDistribution:s.an.DailyRewardDistribution};return t[e.toUpperCase()]||t[e]};(0,n.useEffect)(()=>{k(h,y,A)},[h,y,A]);let k=async(e,r,n)=>{if(console.log("\uD83D\uDD0D DEBUG: loadRelatedTableData called for tab:",e),console.log("\uD83D\uDD0D DEBUG: relatedTables:",n),console.log("\uD83D\uDD0D DEBUG: loadedTabs:",r),"details"!==e&&!r[e]&&(g(t=>({...t,[e]:!0})),n.includes(e))){let r=U(e);if(console.log("\uD83D\uDD0D DEBUG: objectType for tab",e,":",r),void 0!==r){let n=i||{};n[a]={objectType:a,key:(null==o?void 0:o.key)||"",fieldNameMap:(null==o?void 0:o.fieldNameMap)||{},description:"",data:t},console.log("\uD83D\uDD0D DEBUG: searchContext:",n);let l=String(r);if(T[l])return;v(e=>({...e,[l]:!0})),E(e=>({...e,[l]:null}));try{let t;if(K(a,e)&&(null==M?void 0:M.id)){let n=Y(a,e);console.log("\uD83D\uDD0D DEBUG: Using filter for one-to-many relationship. Field:",n,"Value:",M.id),t={page:0,size:20,sorts:[],filters:n?[{field:n,filterType:s.RJ.EQUALS,minValue:String(M.id),maxValue:String(M.id)}]:[],search:{},objectType:r,entityName:r}}else t={page:0,size:20,sorts:[],filters:[],search:n,objectType:r,entityName:r};console.log("\uD83D\uDD0D DEBUG: Making request for",e,":",t);let o=await eu(t);console.log("\uD83D\uDD0D DEBUG: Got response for",e,":",o),N(e=>({...e,[l]:o}))}catch(a){let t=a instanceof Error?a.message:"Failed to load data";console.error("\uD83D\uDD0D DEBUG: Error loading",e,":",a),E(e=>({...e,[l]:t}))}finally{v(e=>({...e,[l]:!1}))}}else console.error("\uD83D\uDD0D DEBUG: Unknown object type for tab:",e),E(t=>({...t,[e]:"Unknown object type for tab: ".concat(e)}))}},L=async(e,t)=>{let r=Q(e,a,M),n="".concat(t,"-single");if(console.log("\uD83D\uDD0D DEBUG: loadSingleObjectData called"),console.log("\uD83D\uDD0D DEBUG: tabName:",e,"objectType:",t),console.log("\uD83D\uDD0D DEBUG: relationshipValue:",r),!r)return void E(e=>({...e,[n]:"No relationship data available"}));g(e=>({...e,[n]:!0})),v(e=>({...e,[n]:!0})),E(e=>({...e,[n]:null}));try{let e={page:0,size:1,sorts:[],filters:[{field:"id",filterType:s.RJ.EQUALS,minValue:String(r),maxValue:String(r)}],search:{},objectType:t,entityName:t},a=await eu(e);N(e=>({...e,[n]:a}))}catch(t){let e=t instanceof Error?t.message:"Failed to load data";E(t=>({...t,[n]:e}))}finally{v(e=>({...e,[n]:!1}))}},B=e=>e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1").trim(),G=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),H=e=>{if(null==e)return"-";if(e instanceof Date)return e.toLocaleString();if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(e))try{return new Date(e).toLocaleString()}catch(e){}return e}return"boolean"==typeof e?e?"Yes":"No":"object"==typeof e?e.name?e.name:e.id?"ID: ".concat(e.id):JSON.stringify(e):String(e)},_=(e,t,a)=>"id"===e||"version"===e||e.includes("createdBy")||e.includes("updatedBy")||e.includes("createdDate")||e.includes("lastModifiedDate")?H(t):"boolean"===a||!0===t||!1===t?(0,r.jsxs)("select",{children:[(0,r.jsx)("option",{value:"",children:"Select"}),(0,r.jsx)("option",{value:"true",children:"Yes"}),(0,r.jsx)("option",{value:"false",children:"No"})]}):"date"===a?(t&&new Date(t).toISOString().split("T")[0],(0,r.jsx)("input",{type:"date",className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:j[e]?new Date(j[e]).toISOString().split("T")[0]:"",onChange:t=>O(e,t.target.value)})):"datetime"===a?(t&&new Date(t).toISOString().slice(0,16),(0,r.jsx)("input",{type:"datetime-local",className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:j[e]?new Date(j[e]).toISOString().slice(0,16):"",onChange:t=>O(e,t.target.value)})):"number"==typeof t?(0,r.jsx)("input",{type:"number",className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:j[e]||"",onChange:t=>O(e,t.target.value?Number(t.target.value):null)}):(0,r.jsx)("input",{type:"text",className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:j[e]||"",onChange:t=>O(e,t.target.value)}),F=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Details";if(console.log("renderEntityDetails called with data:",e),!e||0===Object.keys(e).length)return l?(0,r.jsxs)("div",{className:"space-y-6 p-4 bg-[#1e1e1e] rounded border border-[#3c3c3c]",children:[(0,r.jsxs)("h2",{className:"text-lg font-medium text-white border-b border-[#3c3c3c] pb-2",children:["Create New ",a," ",(0,r.jsx)("span",{className:"text-[#007acc] ml-2",children:"(Edit Mode)"})]}),F({status:"ACTIVE"},"New ".concat(a))]}):(console.warn("No data available for entity details"),(0,r.jsxs)("div",{className:"p-4 text-center text-gray-400",children:["No data available for ",n]}));let o=["relatedTables"];o.push("currentServerTime","id"),l&&d&&o.push("createdBy","updatedBy","lastUpdatedBy","createdDate","lastModifiedDate","updatedDate","createdAt","updatedAt","created","updated");let i=void 0!==e.viewId?{viewId:e.viewId}:{},m=void 0!==e.status?{status:e.status}:{},h={},f={},y={},g={};if(a){let e=ez[a];e&&Object.entries(e).forEach(e=>{let[t,a]=e,r=a.dropdownKey,n=(null==M?void 0:M[r])&&"object"==typeof M[r],o=[];if(l&&(o=I[a.dropdownKey]||[],n))if(Array.isArray(M[r])){let e=o.map(e=>e.id),t=M[r].filter(t=>t&&t.id&&!e.includes(t.id));t.length>0&&(o=[...o,...t])}else M[r].id&&(o.find(e=>e.id===M[r].id)||(o=[...o,M[r]]));g[t]={label:a.labelField||B(t),fieldName:a.idField,relationType:a.relatedEntity,relationData:o,isMultiple:a.isMultiple||Array.isArray(null==M?void 0:M[r])}})}let b=u?u.reduce((e,t)=>({...e,[t.key]:t}),{}):null;Object.entries(e).forEach(e=>{var t;let[a,r]=e;if(!(o.includes(a)||"id"===a||"status"===a||b&&(null==(t=b[a])?void 0:t.hidden)||d&&o.some(e=>a.toLowerCase().includes(e.toLowerCase()))||Object.values(g).some(e=>e.fieldName===a))){if(!d&&("createdBy"===a||"updatedBy"===a||"lastUpdatedBy"===a||"createdDate"===a||"lastModifiedDate"===a||"updatedDate"===a||"createdAt"===a||"updatedAt"===a||a.toLowerCase().includes("created")||a.toLowerCase().includes("updated")||a.toLowerCase().includes("modified"))){"string"==typeof r&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(r),y[a]=r;return}if(null!==r&&"object"==typeof r)if(!(r instanceof Date))return;else h[a]=r;else"string"==typeof r&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(r)?h[a]=r:f[a]=r}});let N=a===s.an.Reward?(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-300 mb-3 border-b border-[#3c3c3c] pb-1",children:"Image"}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(eY,{label:"Reward Image",value:(null==(t=e.media)?void 0:t.id)?"".concat(ei.baseUrl,"/public/media/file/").concat(e.media.id):void 0,isEditing:l,onChange:async e=>{if(e)try{var t;let a=new FormData;a.append("file",e);let r=await fetch("".concat(ei.baseUrl,"/upload/media"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:a});if(!r.ok)throw Error("Failed to upload image");let n=await r.json();O("mediaId",null==(t=n.data)?void 0:t.id)}catch(e){console.error("Error uploading image:",e)}else O("mediaId",null)}})})]}):null;return(0,r.jsxs)("div",{className:"space-y-6 p-4 bg-[#1e1e1e] rounded border border-[#3c3c3c]",children:[(0,r.jsxs)("h2",{className:"text-lg font-medium text-white border-b border-[#3c3c3c] pb-2",children:[n," ",l&&(0,r.jsx)("span",{className:"text-[#007acc] ml-2",children:"(Edit Mode)"})]}),N,(i.viewId||m.status)&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.viewId&&(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"ID"}),(0,r.jsx)("div",{className:"font-medium",children:i.viewId})]}),m.status&&(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"Status"}),(0,r.jsx)("div",{children:l?(0,r.jsx)("select",{className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:j.status||"",onChange:e=>O("status",e.target.value),children:R().map(e=>(0,r.jsx)("option",{value:e,children:e},e))}):(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("ACTIVE"===m.status?"bg-green-800 text-green-200":"INACTIVE"===m.status?"bg-red-800 text-red-200":"bg-gray-800 text-gray-200"),children:m.status})})]})]}),Object.keys(g).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-300 mb-3 border-b border-[#3c3c3c] pb-1",children:"Relationship Information"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(g).map(t=>{let[a,n]=t;return(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:n.label}),(0,r.jsx)("div",{className:"font-medium",children:l?(null==T?void 0:T.regionsDropdown)?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(eJ.A,{className:"h-4 w-4 text-[#007acc] animate-spin mr-2"}),(0,r.jsx)("span",{children:"Loading..."})]}):(0,r.jsxs)("select",{className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:j[n.fieldName]||"",onChange:e=>O(n.fieldName,e.target.value?Number(e.target.value):null),children:[(0,r.jsxs)("option",{value:"",children:["Select ",n.label]}),n.relationData.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name||e.code||"ID: ".concat(e.id)},e.id))]}):(()=>{console.log("check load details");let t=n.fieldName.replace("Id","");if(e[t]&&Array.isArray(e[t])){let a=e[t];if(a.length>0)return a.map(e=>e.name||e.code||"ID: ".concat(e.id)).join(", ")}if(e[t]&&"object"==typeof e[t]){let a=e[t];if(a&&a.id)return a.name||a.code||"ID: ".concat(a.id)}if(e[n.relationType.toLowerCase()+"s"]&&Array.isArray(e[n.relationType.toLowerCase()+"s"])){let t=e[n.relationType.toLowerCase()+"s"];if(t.length>0)return t.map(e=>e.name||e.code||"ID: ".concat(e.id)).join(", ")}let a=e[n.fieldName];if(null!=a){if(n.relationData&&n.relationData.length>0)if(Array.isArray(a)){let e=n.relationData.filter(e=>a.includes(e.id));if(e.length>0)return e.map(e=>e.name||e.code||"ID: ".concat(e.id)).join(", ")}else{let e=n.relationData.find(e=>e.id===a);if(e)return e.name||e.code||"ID: ".concat(e.id)}return Array.isArray(a)?a.map(e=>"ID: ".concat(e)).join(", "):"ID: ".concat(a)}return"-"})()})]},a)})})]}),Object.keys(f).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-300 mb-3 border-b border-[#3c3c3c] pb-1",children:"Basic Information"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(f).filter(e=>{let[t]=e;return!b||!b[t]||!l||!1!==b[t].editable}).map(e=>{var t,a;let[n,o]=e;return(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:B(n)}),(0,r.jsx)("div",{className:"font-medium overflow-hidden text-ellipsis",children:l?_(n,o,(null==b||null==(t=b[n])?void 0:t.fieldType)==="BOOLEAN"?"boolean":typeof o):(null==b||null==(a=b[n])?void 0:a.fieldType)==="BOOLEAN"?(0,r.jsx)("input",{type:"checkbox",disabled:!0,checked:!!o}):H(o)})]},n)})})]}),Object.keys(h).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-300 mb-3 border-b border-[#3c3c3c] pb-1",children:"Date & Time Information"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(h).filter(e=>{let[t]=e;return!(l&&"currentServerTime"===t||d&&("createdAt"===t||"updatedAt"===t||t.toLowerCase().includes("created")||t.toLowerCase().includes("updated")))&&(!b||!b[t]||!l||!1!==b[t].editable)}).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:B(t)}),(0,r.jsx)("div",{className:"font-medium",children:!l||t.includes("created")||t.includes("updated")||t.includes("modified")?H(a):_(t,a,"datetime")})]},t)})})]}),Object.keys(y).length>0&&!d&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-300 mb-3 border-b border-[#3c3c3c] pb-1",children:"Audit Information"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(y).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:B(t)}),(0,r.jsx)("div",{className:"font-medium",children:H(a)})]},t)})})]}),l&&(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 mt-4 border-t border-[#3c3c3c]",children:[(0,r.jsxs)("button",{className:"flex items-center px-4 py-2 bg-[#3c3c3c] text-white rounded hover:bg-[#4c4c4c]",onClick:c,type:"button",children:[(0,r.jsx)(eD.A,{size:16,className:"mr-2"})," ",d?"Cancel Add":"Cancel Edit"]}),(0,r.jsxs)("button",{className:"flex items-center px-4 py-2 bg-[#007acc] text-white rounded hover:bg-[#0069ac]",onClick:()=>p&&p(j),type:"button",children:[(0,r.jsx)(eV.A,{size:16,className:"mr-2"})," ",d?"Create":"Save Changes"]})]})]})},J=e=>{var t;if(console.log("Rendering search tab for key: ".concat(e,", search:"),i),!i||!i[e])return(0,r.jsxs)("div",{className:"p-4 text-center text-gray-400",children:["No search data available for ",e]});let a=i[e];return(console.log("Search item for ".concat(e,":"),a),null==a||null==(t=a.data)?void 0:t.data)?F(a.data.data,"".concat(G(e)," Information")):(0,r.jsxs)("div",{className:"p-4 text-center text-gray-400",children:["No details available for ",G(e)]})},V=e=>{let t=["region","province","event","user","role"],r=s.an[a].toLowerCase(),n=r+"s";return!(t.includes(e)&&S(U(e)).some(e=>e===r||e===n||e===s.an[a]))&&t.includes(e)},W=(e,t)=>{var n,o;let l=q(e,a),s=Q(e,a,M),d="".concat(t,"-single");if(console.log("\uD83D\uDD0D DEBUG: renderSingleObjectTab called"),console.log("\uD83D\uDD0D DEBUG: tabName:",e),console.log("\uD83D\uDD0D DEBUG: objectType:",t),console.log("\uD83D\uDD0D DEBUG: entityType:",a),console.log("\uD83D\uDD0D DEBUG: relationshipField:",l),console.log("\uD83D\uDD0D DEBUG: relationshipValue:",s),console.log("\uD83D\uDD0D DEBUG: rowData:",M),console.log("\uD83D\uDD0D DEBUG: rowData keys:",M?Object.keys(M):"no rowData"),!l)return console.log("\uD83D\uDD0D DEBUG: No relationship field configured"),(0,r.jsxs)("div",{className:"p-4 text-center text-gray-400",children:[(0,r.jsxs)("p",{children:["No relationship field configured for ",G(e)," in ",a.toLowerCase()]}),(0,r.jsxs)("p",{className:"text-xs mt-2",children:["Debug: relationshipField = ",l]})]});if(!s)return console.log("\uD83D\uDD0D DEBUG: No relationship data found"),(0,r.jsxs)("div",{className:"p-4 text-center text-gray-400",children:[(0,r.jsxs)("p",{children:["No ",G(e)," associated with this ",a.toLowerCase()]}),(0,r.jsxs)("p",{className:"text-xs mt-2",children:["Debug: looking for field '",l,"' in rowData"]}),(0,r.jsxs)("p",{className:"text-xs",children:["Available fields: ",M?Object.keys(M).join(", "):"none"]})]});if(T[d])return(0,r.jsxs)("div",{className:"p-8 flex flex-col items-center justify-center",children:[(0,r.jsx)(eJ.A,{className:"h-8 w-8 text-[#007acc] animate-spin mb-2"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["Loading ",G(e)," details..."]})]});if(x[d])return(0,r.jsx)("div",{className:"p-6 text-center",children:(0,r.jsxs)("div",{className:"bg-red-900/20 p-4 rounded-md mb-3",children:[(0,r.jsx)("p",{className:"text-red-400 mb-2",children:x[d]}),(0,r.jsx)("button",{onClick:()=>L(e,t),className:"bg-[#3c3c3c] hover:bg-[#4c4c4c] text-white px-3 py-1 rounded",children:"Retry"})]})});let c=b[d];if(null==c||null==(o=c.rows)||null==(n=o[0])?void 0:n.data)if(!V(e))return F(c.rows[0].data,"".concat(G(e)," Details"));else{let e={data:c.rows[0].data,relatedTables:S(t)};return(0,r.jsx)(eQ,{tableRow:e,entityType:t,tableInfo:c,search:i,columns:u,excludedStatusOptions:m})}return y[d]?(0,r.jsx)("div",{className:"p-4 text-center text-gray-400",children:(0,r.jsxs)("p",{children:["No ",G(e)," data available"]})}):(L(e,t),(0,r.jsxs)("div",{className:"p-8 flex flex-col items-center justify-center",children:[(0,r.jsx)(eJ.A,{className:"h-8 w-8 text-[#007acc] animate-spin mb-2"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["Loading ",G(e)," details..."]})]}))},z=e=>{var t;console.log("\uD83D\uDD0D DEBUG: renderRelatedTableTab called for:",e),console.log("\uD83D\uDD0D DEBUG: entityType:",a);let n=U(e);if(!n)return(0,r.jsxs)("div",{children:["Unknown object type for ",e]});let o=String(n),l=!K(a,e);if(console.log("\uD83D\uDD0D DEBUG: isOneToMany(",a,",",e,") =",K(a,e)),console.log("\uD83D\uDD0D DEBUG: isSingleObject:",l),l)return console.log("\uD83D\uDD0D DEBUG: Rendering single object tab for:",e),W(e,n);if(console.log("\uD83D\uDD0D DEBUG: Rendering table tab for:",e),console.log("\uD83D\uDD0D DEBUG: relatedTableData for",o,":",b[o]),T[o])return(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)(eJ.A,{className:"h-6 w-6 animate-spin text-blue-500"}),(0,r.jsxs)("span",{className:"ml-2 text-gray-400",children:["Loading ",G(e),"..."]})]});if(x[o])return(0,r.jsxs)("div",{className:"flex items-center justify-center py-8 text-red-400",children:[(0,r.jsx)(eW.A,{className:"h-6 w-6 mr-2"}),(0,r.jsxs)("span",{children:["Error loading ",G(e),": ",x[o]]})]});let s=b[o];if(!s)return(0,r.jsxs)("div",{className:"text-gray-400 py-4",children:["No ",G(e)," data available"]});if(console.log("\uD83D\uDD0D DEBUG: Table data for",e,":",s),console.log("\uD83D\uDD0D DEBUG: Number of rows:",(null==(t=s.rows)?void 0:t.length)||0),!s.rows||0===s.rows.length)return(0,r.jsxs)("div",{className:"text-gray-400 py-4",children:["No ",G(e)," found"]});let d=s.fieldNameMap?Object.entries(s.fieldNameMap).map(e=>{let[t,a]=e;return{key:t,header:B(t),fieldType:a.fieldType||"TEXT",editable:!0,hidden:!1,sortable:!0,filterable:!0,render:void 0}}):[];return console.log("\uD83D\uDD0D DEBUG: Using columns from related entity:",d),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(e7,{data:s,columns:d,entityType:n,search:i,showDetailView:!0,showSearchBox:!1})})},q=(e,t)=>{var a;return(null==(a=({province:{[s.an.Participant]:"provinceId"},region:{[s.an.Province]:"regionId",[s.an.EventLocation]:"regionId"},user:{[s.an.AuditLog]:"userId"},role:{[s.an.User]:"roleId"},permission:{[s.an.Role]:"permissionId"},event:{[s.an.ParticipantEvent]:"eventId",[s.an.Reward]:"eventId",[s.an.EventLocation]:"eventId",[s.an.GoldenHour]:"eventId"},participant:{[s.an.ParticipantEvent]:"participantId",[s.an.SpinHistory]:"participantId"},reward:{[s.an.SpinHistory]:"rewardId"},goldenHour:{[s.an.SpinHistory]:"goldenHourId"},auditLog:{}})[e])?void 0:a[t])||null},K=(e,t)=>{var a;return(null==(a=({[s.an.Event]:["eventLocations","rewards","participants","goldenHours"],[s.an.Participant]:["participantEvents","spinHistory"],[s.an.Province]:["participants","eventLocations"],[s.an.Region]:["provinces","eventLocations"],[s.an.User]:["participants","auditLogs"],[s.an.Role]:["users"],[s.an.Permission]:["roles"],[s.an.EventLocation]:["participants"],[s.an.Reward]:[],[s.an.GoldenHour]:[],[s.an.SpinHistory]:[],[s.an.ParticipantEvent]:[],[s.an.AuditLog]:[],[s.an.JobImportHistory]:["jobImportHistoryDetail"],[s.an.RewardDistribute]:["dailyRewardDistribution"]})[e])?void 0:a.includes(t))||!1},Y=(e,t)=>{var a;return(null==(a=({eventLocations:{[s.an.Event]:"event.id",[s.an.Reward]:"region.id",[s.an.Region]:"region.id",[s.an.Province]:"region.provinces.id"},rewards:{[s.an.Event]:"rewardEvents.eventLocation.event.id"},participants:{[s.an.EventLocation]:"eventId",[s.an.Province]:"province.id",[s.an.Event]:"participantEvents.eventLocation.event.id"},spinHistory:{[s.an.Participant]:"participantEvent.participant.id",[s.an.Reward]:"reward.d",[s.an.GoldenHour]:"goldenHour.id"},provinces:{[s.an.Region]:"regions.id"},auditLogs:{[s.an.User]:"user.id"},users:{[s.an.Role]:"role.id"},participantEvents:{[s.an.Participant]:"participant.id"},jobImportHistoryDetail:{[s.an.JobImportHistory]:"jobImportHistory.id"},goldenHours:{[s.an.Event]:"eventLocation.event.id"},event:{[s.an.Reward]:"locations.rewardEvents.reward.id"},dailyRewardDistribution:{[s.an.RewardDistribute]:"rewardDistribute.id"}})[t])?void 0:a[e])||null},Q=(e,t,a)=>{let r=q(e,t);if(console.log("\uD83D\uDD0D DEBUG: getRelationshipValue - tabName:",e),console.log("\uD83D\uDD0D DEBUG: getRelationshipValue - entityType:",t),console.log("\uD83D\uDD0D DEBUG: getRelationshipValue - relationshipField:",r),!r||!a)return null;if(console.log("\uD83D\uDD0D DEBUG: Full rowData:",a),void 0!==a[r]&&null!==a[r])return console.log("\uD83D\uDD0D DEBUG: Found direct field value:",a[r]),a[r];let n=r.replace("Id","");if(console.log("\uD83D\uDD0D DEBUG: Trying object field name:",n),void 0!==a[n]&&null!==a[n]){let e=a[n];if(console.log("\uD83D\uDD0D DEBUG: Found nested object:",e),console.log("\uD83D\uDD0D DEBUG: Nested object type:",typeof e),console.log("\uD83D\uDD0D DEBUG: Nested object keys:","object"==typeof e?Object.keys(e):"not an object"),"object"==typeof e&&void 0!==e.id)return console.log("\uD83D\uDD0D DEBUG: Found nested object ID:",e.id),e.id;if("object"!=typeof e)return console.log("\uD83D\uDD0D DEBUG: Found primitive nested value:",e),e}let o=[r,r.toLowerCase(),r.replace("Id","_id"),n+"_id",n,r.replace("Id",""),e+"Id",e.toLowerCase()+"Id",e+"_id"];for(let e of(console.log("\uD83D\uDD0D DEBUG: Trying common field names:",o),o))if(void 0!==a[e]&&null!==a[e]){let t=a[e];if(console.log("\uD83D\uDD0D DEBUG: Found field",e,"with value:",t,"type:",typeof t),"object"==typeof t&&void 0!==t.id)return console.log("\uD83D\uDD0D DEBUG: Found object with ID in field",e,":",t.id),t.id;if("object"!=typeof t)return console.log("\uD83D\uDD0D DEBUG: Found primitive value in field",e,":",t),t}for(let[t,r]of(console.log("\uD83D\uDD0D DEBUG: No relationship value found, tried fields:",o),console.log("\uD83D\uDD0D DEBUG: Available rowData keys:",Object.keys(a)),Object.entries(a)))if(t.toLowerCase().includes(e.toLowerCase())&&"object"==typeof r&&r&&r.id)return console.log("\uD83D\uDD0D DEBUG: Found potential match by name similarity:",t,"with ID:",r.id),r.id;return null};return((0,n.useEffect)(()=>{g({details:!0}),f("details")},[a,t]),M&&0!==Object.keys(M).length)?(0,r.jsxs)(eG,{value:h,onValueChange:f,className:"w-full",children:[(0,r.jsx)(eH,{className:"bg-[#252525] border-b border-[#3c3c3c] w-full flex overflow-x-auto",children:P.map(e=>(0,r.jsx)(e_,{value:e,className:"data-[state=active]:bg-[#2a2d2e] data-[state=active]:shadow-none",disabled:l&&"details"!==e,children:G(e)},e))}),(0,r.jsx)(eF,{value:"details",className:"pt-4",children:F(M,"".concat(a," Details"))}),C.map(e=>(0,r.jsx)(eF,{value:e,className:"pt-4",children:h===e&&J(e)},e)),A.map(e=>(0,r.jsx)(eF,{value:e,className:"pt-4",children:h===e&&z(e)},e))]}):l?(0,r.jsxs)("div",{className:"space-y-6 p-4 bg-[#1e1e1e] rounded border border-[#3c3c3c]",children:[(0,r.jsxs)("h2",{className:"text-lg font-medium text-white border-b border-[#3c3c3c] pb-2",children:["Create New ",a," ",(0,r.jsx)("span",{className:"text-[#007acc] ml-2",children:"(Edit Mode)"})]}),F({status:"ACTIVE"},"New ".concat(a))]}):(console.warn("EntityDetailTabs: No rowData available"),(0,r.jsx)("div",{className:"p-4 text-center text-gray-400",children:"No entity data available"}))};var eX=a(3052);let eZ=e=>{let{data:t,columns:a,actions:o,detailView:i,detailViewMode:l,entityType:s,search:d,showDetailView:c,expandedRowId:p,setExpandedRowId:u,editingRowId:m,isAddingNewRow:h,newRowData:f,handleRowClick:y,handleCancelEdit:g,handleSaveEdit:b,isLoading:N,emptyMessage:T,showDefaultActions:v}=e,x=e=>{var n;return m===(null==(n=e.data)?void 0:n.id)?(0,r.jsx)(eQ,{tableRow:e,entityType:s,tableInfo:t,search:d,isEditing:!0,onCancelEdit:g,onSaveEdit:t=>b(e,t),columns:a}):i&&"custom"===l?i(e):(0,r.jsx)(eQ,{tableRow:e,entityType:s,tableInfo:t,search:d,isEditing:!1,columns:a})};return(0,r.jsxs)("tbody",{className:"divide-y divide-[#3c3c3c]",children:[h&&f&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{className:"bg-[#2a2d2e] relative z-[200]",children:[c&&(0,r.jsx)("td",{className:"w-10 p-3",children:(0,r.jsx)(eP.A,{className:"h-4 w-4 text-[#007acc]"})}),a.map(e=>{var t,a;return(0,r.jsx)("td",{className:"p-3 break-words",children:e.render?e.render(null==(t=f.data)?void 0:t[e.key],f):ej(null==(a=f.data)?void 0:a[e.key])},e.key)}),v&&(0,r.jsx)("td",{className:"p-3 text-right",children:(0,r.jsx)("div",{className:"flex justify-end space-x-2",children:(0,r.jsxs)("button",{className:"flex items-center text-xs px-2 py-1 rounded bg-red-800 text-red-100",onClick:()=>g(),"aria-label":"Cancel adding new row",children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})}),"Cancel"]})})})]}),(0,r.jsx)("tr",{className:"relative z-[200]",children:(0,r.jsx)("td",{colSpan:a.length+ +!!c+ +!!v,className:"p-0 bg-[#252525] border-t border-[#3c3c3c]",children:(0,r.jsx)("table",{className:"w-full border-collapse",children:(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"p-4 relative",style:{width:"100%",maxWidth:"100%",overflow:"hidden",position:"relative",left:0,tableLayout:"fixed"},children:(0,r.jsx)(eQ,{tableRow:f,entityType:s,tableInfo:t,search:d,isEditing:!0,isNewRow:!0,onCancelEdit:g,onSaveEdit:e=>b(f,e),columns:a,excludedStatusOptions:["DELETE"]})})})})})})})]}),N?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:a.length+ +!!c+ +!!v,className:"p-8 text-center",children:(0,r.jsx)("table",{className:"w-full border-collapse",children:(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsxs)("td",{children:[(0,r.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-[#007acc] border-t-transparent rounded-full mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Loading data..."})]})})})})})}):t.rows.length>0?t.rows.map((e,t)=>{var i,l,s,d;let u=null==(i=e.data)?void 0:i.id,f="object"==typeof u?"row_".concat(t,"_").concat(JSON.stringify(u)):u?"row_".concat(u):"row_".concat(t);return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsxs)("tr",{className:"".concat(t%2==0?"bg-[#1e1e1e]":"bg-[#252525]"," ").concat(c?"cursor-pointer hover:bg-[#2a2d2e]":""," ").concat(p===(null==(l=e.data)?void 0:l.id)?"bg-[#2a2d2e]":""),onClick:()=>{if(null===m){var t;y((null==(t=e.data)?void 0:t.id)||null)}},role:"row",style:{tableLayout:"fixed",width:"100%"},children:[c&&(0,r.jsx)("td",{className:"w-10 p-3",style:{width:"40px",minWidth:"40px",maxWidth:"40px"},children:p===(null==(s=e.data)?void 0:s.id)?(0,r.jsx)(eP.A,{className:"h-4 w-4 text-[#007acc]"}):(0,r.jsx)(eX.A,{className:"h-4 w-4 text-gray-400"})}),a.map(t=>{let a="id"===t.key?"80px":"status"===t.key?"120px":"name"===t.key?"200px":"150px";return(0,r.jsx)("td",{className:"p-3 break-words","data-column-key":t.key,style:{width:a,minWidth:a,maxWidth:"description"===t.key?"300px":a},children:t.render?t.render(e.data[t.key],e):ej(e.data[t.key])},t.key)}),v&&(0,r.jsx)("td",{className:"p-3 text-right",style:{width:"150px",minWidth:"150px"},children:(0,r.jsx)("div",{className:"flex justify-end space-x-2",children:o.map(t=>{var a;return(0,r.jsxs)("button",{className:"flex items-center text-xs px-2 py-1 rounded ".concat("blue"===t.color?"bg-blue-800 text-blue-100":"red"===t.color?"bg-red-800 text-red-100":"green"===t.color?"bg-green-800 text-green-100":"yellow"===t.color?"bg-yellow-800 text-yellow-100":"bg-[#3c3c3c] text-white"),onClick:a=>{if(a.stopPropagation(),null===m&&!h&&(t.onClick(e),t.showDetail&&"Edit"!==t.label)){var r;y((null==(r=e.data)?void 0:r.id)||null)}},disabled:null!==m||h,"aria-label":"".concat(t.label," row ").concat(null==(a=e.data)?void 0:a.id),children:[t.iconLeft,(0,r.jsx)("span",{className:"mx-1",children:t.label}),t.iconRight]},t.label)})})})]}),(null==(d=e.data)?void 0:d.id)&&(p===e.data.id||m===e.data.id)&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:a.length+ +!!c+ +!!v,children:(0,r.jsx)("div",{className:"bg-[#252525] border-t border-[#3c3c3c] p-4",children:x(e)})})})]},f)}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:a.length+ +!!c+ +!!v,className:"p-8 text-center text-gray-400",children:(0,r.jsx)("table",{className:"w-full border-collapse",children:(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:T})})})})})})]})};var e$=a(2278),e0=a(2355),e1=a(2767);let e3=[10,20,30,50,100,500,1e3],e2=e=>{let{pagination:t,setPagination:a}=e,{pageIndex:n,pageSize:o,totalItems:i,totalPages:l}=t;return(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 px-2 py-1 border-t border-[#3c3c3c]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:i>0?"Showing ".concat(n*o+1,"-").concat(Math.min((n+1)*o,i)," of ").concat(i):"No results"}),(0,r.jsx)("select",{value:o,onChange:e=>a({pageSize:Number(e.target.value),pageIndex:0}),className:"bg-[#3c3c3c] text-white text-sm px-2 py-1 rounded","aria-label":"Items per page",children:e3.map(e=>(0,r.jsxs)("option",{value:e,children:[e," per page"]},e))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>a({pageIndex:0}),disabled:0===n,className:"p-1 rounded ".concat(0===n?"text-gray-600":"text-gray-400 hover:bg-[#3c3c3c]"),"aria-label":"Go to first page",children:(0,r.jsx)(e$.A,{size:18})}),(0,r.jsx)("button",{onClick:()=>a({pageIndex:n-1}),disabled:0===n,className:"p-1 rounded ".concat(0===n?"text-gray-600":"text-gray-400 hover:bg-[#3c3c3c]"),"aria-label":"Go to previous page",children:(0,r.jsx)(e0.A,{size:18})}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"number",min:1,max:l,value:n+1,onChange:e=>{let t=parseInt(e.target.value)-1;t>=0&&t<l&&a({pageIndex:t})},className:"w-12 bg-[#3c3c3c] text-white text-center py-1 rounded","aria-label":"Current page"}),(0,r.jsxs)("span",{className:"mx-1 text-sm text-gray-400",children:["of ",l]})]}),(0,r.jsx)("button",{onClick:()=>a({pageIndex:n+1}),disabled:n>=l-1,className:"p-1 rounded ".concat(n>=l-1?"text-gray-600":"text-gray-400 hover:bg-[#3c3c3c]"),"aria-label":"Go to next page",children:(0,r.jsx)(eX.A,{size:18})}),(0,r.jsx)("button",{onClick:()=>a({pageIndex:l-1}),disabled:n>=l-1,className:"p-1 rounded ".concat(n>=l-1?"text-gray-600":"text-gray-400 hover:bg-[#3c3c3c]"),"aria-label":"Go to last page",children:(0,r.jsx)(e1.A,{size:18})})]})]})};var e5=a(7924);let e4=e=>{let{showSearchBox:t,searchTerm:a,setSearchTerm:n,columnsWithActiveFilters:o,effectiveColumns:i,activeFilters:l,setActiveFilters:s,filterOptions:d,tableActions:c,addItemButton:p,entityType:u,isLoading:m,handleAddNewRow:h}=e,f="boolean"==typeof p&&p?{label:"Add ".concat(u.charAt(0).toUpperCase()+u.slice(1).toLowerCase()),onClick:h}:p;return(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[t&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(e5.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),(0,r.jsx)("input",{type:"text",placeholder:"Search...",className:"pl-9 py-2 pr-4 bg-[#3c3c3c] rounded focus:outline-none focus:ring-1 focus:ring-[#007acc]",value:a,onChange:e=>n(e.target.value),"aria-label":"Search table"})]}),o.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Filters:"}),o.map(e=>{let t=i.find(t=>t.key===e);return t?(0,r.jsxs)("div",{className:"bg-[#3c3c3c] text-white text-xs px-2 py-1 rounded flex items-center gap-1",children:[(0,r.jsx)("span",{children:t.header}),(0,r.jsx)("button",{onClick:()=>s({...l,[e]:{...l[e],active:!1}}),className:"text-gray-400 hover:text-white","aria-label":"Remove filter for ".concat(t.header),children:(0,r.jsx)(eD.A,{size:12})})]},e):null}),(0,r.jsx)("button",{onClick:()=>s(Object.keys(l).reduce((e,t)=>({...e,[t]:{...l[t],active:!1}}),{})),className:"text-xs text-[#007acc] hover:underline","aria-label":"Clear all filters",children:"Clear all"})]}),null==d?void 0:d.map(e=>{var t;return(0,r.jsx)("select",{className:"bg-[#3c3c3c] text-white px-3 py-2 rounded focus:outline-none focus:ring-1 focus:ring-[#007acc]",value:(null==(t=l[e.key])?void 0:t.value)||"all",onChange:t=>s({...l,[e.key]:{field:e.key,operator:"equals",value:t.target.value,active:"all"!==t.target.value}}),"aria-label":"Filter by ".concat(e.label),children:e.options.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))},e.key)})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[null==c?void 0:c.map((e,t)=>(0,r.jsxs)("button",{onClick:()=>e.onClick&&e.onClick(null),className:"px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-1.5 ".concat(e.color?"bg-".concat(e.color,"-700 hover:bg-").concat(e.color,"-600 text-white"):"bg-blue-700 hover:bg-blue-600 text-white"),disabled:m,children:[e.iconLeft&&(0,r.jsx)("span",{children:e.iconLeft}),e.label,e.iconRight&&(0,r.jsx)("span",{children:e.iconRight})]},t)),f&&(0,r.jsxs)("button",{onClick:f.onClick,className:"px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-1.5 bg-blue-700 hover:bg-blue-600 text-white",disabled:m,children:[(0,r.jsx)(eU.A,{className:"h-4 w-4 mr-2"}),f.label]})]})]})},e6=e=>{let{open:t,handleActionImportTable:a,handleImportTable:n}=e;var o=new File([],"tempFile");return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white rounded shadow-lg p-6 min-w-[350px]",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Import Data"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-bold text-gray-500 tracking-wide",children:"Attach file"}),(0,r.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,r.jsxs)("label",{className:"flex flex-col rounded-lg border-4 border-dashed w-full h-60 p-10 group text-center",children:[(0,r.jsxs)("div",{className:"h-full w-full text-center flex flex-col items-center justify-center items-center  ",children:[(0,r.jsx)("div",{className:"flex flex-auto max-h-48 w-2/5 mx-auto -mt-10",children:(0,r.jsx)("img",{className:"has-mask h-36 object-center",src:"https://img.freepik.com/free-vector/image-upload-concept-landing-page_52683-27130.jpg?size=338&ext=jpg",alt:"freepik image"})}),(0,r.jsx)("p",{className:"pointer-none text-gray-500 ",children:(0,r.jsx)("span",{className:"text-sm",children:"Click here to upload"})})]}),(0,r.jsx)("input",{type:"file",className:"hidden",id:"importFile",multiple:!0,onChange:e=>{let t=e.target.files;if(!t||0===t.length)return void console.error("No file selected.");o=t[0]}})]})})]}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:(0,r.jsx)("span",{children:"File type: doc,pdf,types of images"})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>n(!1),children:"Cancel"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>a(!0,o),children:"Import"})]})]})}):null},e8=e=>{let{isEditConfirmOpen:t,isSaveConfirmOpen:a,isDeleteConfirmOpen:n,handleConfirmation:o,editAction:i}=e;if(!t&&!a&&!n)return null;let l="cancel"===i?"Yes, discard changes":"save"===i?"Yes, save changes":"Yes, delete",s="cancel"===i||"save"===i?"No, continue editing":"No, cancel";return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[300] flex items-center justify-center",role:"dialog","aria-modal":"true","aria-labelledby":"".concat(i,"-confirm-title"),children:(0,r.jsxs)("div",{className:"bg-[#2d2d2d] p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,r.jsx)("h3",{id:"".concat(i,"-confirm-title"),className:"text-lg font-medium mb-4",children:"cancel"===i?"Confirm Cancel":"save"===i?"Confirm Save":"Confirm Delete"}),(0,r.jsx)("p",{className:"mb-6",children:"cancel"===i?"Are you sure you want to cancel? All unsaved changes will be lost.":"save"===i?"Are you sure you want to save these changes?":"Are you sure you want to delete this record? This action cannot be undone."}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-[#3c3c3c] text-white rounded hover:bg-[#4c4c4c]",onClick:()=>o(!1),"aria-label":s,children:s}),(0,r.jsx)("button",{className:"px-4 py-2 ".concat("cancel"===i?"bg-red-700 hover:bg-red-800":"save"===i?"bg-green-700 hover:bg-green-800":"bg-red-700 hover:bg-red-800"," text-white rounded"),onClick:()=>o(!0),"aria-label":l,children:l})]})]})})};function e7(e){let{data:t,columns:a,actions:o,detailView:i,detailViewMode:l="auto",entityType:s,addItemButton:d,filterOptions:c,urlStatePrefix:p,emptyMessage:u="No data found.",onPageChange:m,onSortChange:h,onSearchChange:f,onFilterChange:y,fetchData:g,showDetailView:b=!0,activeTab:N,statusField:T="status",search:v,showSearchBox:x=!1,onEdit:E,onDelete:j,showDefaultActions:w=!0,onSave:I,onAdd:D}=e,{data:S,pagination:R,setPagination:M,activeFilters:A,setActiveFilters:C,openFilterColumn:P,setOpenFilterColumn:O,expandedRowId:U,setExpandedRowId:k,editingRowId:L,isAddingNewRow:B,newRowData:G,isLoading:H,searchTerm:_,setSearchTerm:F,sortField:J,sortDirection:V,handleSortClick:W,handleEdit:z,handleCancelEdit:q,handleSaveEdit:K,handleDeleteClick:Y,handleAddNewRow:Q,handleConfirmation:X,isEditConfirmOpen:Z,isSaveConfirmOpen:$,isDeleteConfirmOpen:ee,editAction:et,effectiveColumns:ea,effectiveActions:er,tableActions:en,columnsWithActiveFilters:eo,isImportDialogOpen:ei,handleExportTable:el,handleImportTable:es,handleActionImportTable:ed}=eI({initialData:t,columns:a,actions:o,entityType:s,fetchData:g,onEdit:E,onDelete:j,onSave:I,onAdd:D,onSearchChange:f,onSortChange:h,onPageChange:m,onFilterChange:y}),ec=(0,n.useMemo)(()=>(en||[]).map(e=>"export"===e.label.toLowerCase()?{...e,onClick:()=>el()}:"import"===e.label.toLowerCase()?{...e,onClick:()=>es(!0)}:e),[en,el,es]);return(0,r.jsxs)("div",{className:"w-full relative flex flex-col",children:[(0,r.jsx)(e4,{showSearchBox:x,searchTerm:_,setSearchTerm:F,columnsWithActiveFilters:eo,effectiveColumns:ea,activeFilters:A,setActiveFilters:C,filterOptions:c,tableActions:ec,addItemButton:d,entityType:s,isLoading:H,handleAddNewRow:Q}),(0,r.jsx)("div",{className:"bg-[#1e1e1e] border border-[#3c3c3c] rounded-md overflow-hidden relative w-full flex-grow flex flex-col",children:(0,r.jsxs)("div",{className:"overflow-x-auto w-full flex-1",style:{maxWidth:"100%"},children:[(0,r.jsxs)("table",{className:"relative table-auto min-w-full table-fixed","aria-busy":H,role:"grid",style:{tableLayout:"fixed"},children:[(0,r.jsx)(ek,{columns:ea,sortField:J,sortDirection:V,handleSortClick:W,activeFilters:A,openFilterColumn:P,setOpenFilterColumn:O,setActiveFilters:C,showDetailView:b,showDefaultActions:w,handleAddNewRow:Q,isAddingNewRow:B,editingRowId:L}),(0,r.jsx)(eZ,{data:S,columns:ea,actions:er,detailView:i,detailViewMode:l,entityType:s,search:v,showDetailView:b,expandedRowId:U,setExpandedRowId:k,editingRowId:L,isAddingNewRow:B,newRowData:G,handleRowClick:k,handleCancelEdit:q,handleSaveEdit:K,isLoading:H,emptyMessage:u,showDefaultActions:w})]}),S.rows.length>0&&(0,r.jsx)(e2,{pagination:R,setPagination:M})]})}),(0,r.jsx)(e8,{isEditConfirmOpen:Z,isSaveConfirmOpen:$,isDeleteConfirmOpen:ee,handleConfirmation:X,editAction:et}),(0,r.jsx)(e6,{open:ei,handleImportTable:es,handleActionImportTable:ed})]})}var e9=a(8482),te=a(7580),tt=a(238),ta=a(4186),tr=a(2883);function tn(e){var t;let{title:a,entityType:d,breadcrumbPath:c,description:p="",statsCards:u=[],tabs:m=[],addButtonLabel:h,onAddButtonClick:f,actions:y,showSearchBox:g=!1,actionButtons:b}=e;(0,o.useRouter)(),(0,o.usePathname)(),(0,o.useSearchParams)();let[N,T]=(0,n.useState)(m.length>0?m[0].id:"all"),[v,x]=(0,n.useState)(null),[E,j]=(0,n.useState)(!1),[w,I]=(0,n.useState)(null);(0,n.useEffect)(()=>{D()},[N]);let D=async()=>{j(!0),I(null);try{"all"!==N&&"details"!==N&&[].push({field:"status",operator:"eq",value:N,filterType:"STRING",minValue:null,maxValue:null});let e={page:0,size:10,sorts:[{field:"id",sortType:s.r3.DESCENDING}],filters:[],search:{},objectType:s.an[d],entityName:s.an[d]},t=await eu(e);x(t)}catch(e){console.error("Error loading data:",e),I("Failed to load data. Please try again.")}finally{j(!1)}},S=(e,t)=>{if(t)return t;switch(e){case"blue":return(0,r.jsx)(te.A,{className:"h-5 w-5"});case"green":return(0,r.jsx)(tt.A,{className:"h-5 w-5"});case"yellow":return(0,r.jsx)(ta.A,{className:"h-5 w-5"});default:return(0,r.jsx)(tr.A,{className:"h-5 w-5"})}},R=e=>{switch(e){case"blue":return"bg-gradient-to-br from-[#2a4365] to-[#2c5282] text-white";case"green":return"bg-gradient-to-br from-[#276749] to-[#2f855a] text-white";case"yellow":return"bg-gradient-to-br from-[#975a16] to-[#b7791f] text-white";case"red":return"bg-gradient-to-br from-[#9b2c2c] to-[#c53030] text-white";default:return"bg-[#252526] text-[#cccccc]"}};return(0,r.jsx)(l.default,{children:(0,r.jsxs)("div",{className:"container mx-auto py-6 px-4 max-w-full",children:[(0,r.jsxs)(i.Qp,{className:"mb-6",children:[(0,r.jsx)(i.J5,{children:(0,r.jsx)(i.w1,{href:"/",children:"Home"})}),(0,r.jsx)(i.J5,{isCurrentPage:!0,children:(0,r.jsx)(i.w1,{children:a})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:a}),p&&(0,r.jsx)("p",{className:"text-gray-400 mt-1",children:p})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[b,!b&&h&&(0,r.jsxs)("button",{onClick:f,className:"bg-[#007acc] text-white px-3 py-2 rounded flex items-center hover:bg-[#0069ac]",children:[(0,r.jsx)(eU.A,{className:"h-4 w-4 mr-2"}),h]})]})]}),u.length>0&&(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:u.map((e,t)=>(0,r.jsx)(e9.Zp,{className:R(e.color),children:(0,r.jsx)(e9.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium opacity-80",children:e.label}),(0,r.jsx)("p",{className:"text-2xl font-bold mt-1",children:e.value})]}),(0,r.jsx)("div",{className:"p-2 rounded-full ".concat(e.color?"bg-white bg-opacity-20":"bg-[#3c3c3c]"),children:S(e.color,e.icon)})]})})},t))}),m.length>0&&(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("div",{className:"flex space-x-1 rounded-lg bg-[#252525] p-1 w-fit",children:m.map(e=>(0,r.jsx)("button",{onClick:()=>T(e.id),className:"px-4 py-2 text-sm font-medium transition-colors rounded-md ".concat(N===e.id?"bg-[#37373d] text-white shadow-sm":"text-gray-400 hover:text-white"),children:e.label},e.id))})}),(0,r.jsxs)("div",{className:"bg-[#252526] rounded-lg shadow p-4 w-full",style:{maxWidth:"100%"},children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsxs)("h2",{className:"font-semibold",children:[(null==(t=m.find(e=>e.id===N))?void 0:t.label)||a," List"]})})}),E?(0,r.jsxs)("div",{className:"flex justify-center items-center py-16",children:[(0,r.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-[#007acc] border-t-transparent rounded-full mr-3"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["Loading ",a.toLowerCase(),"..."]})]}):w?(0,r.jsx)("div",{className:"bg-[#442222] text-red-300 p-4 rounded text-center",children:w}):(0,r.jsx)(e7,{data:v,entityType:d,showDetailView:!0,actions:y,showSearchBox:g})]})]})})}function to(e){return(0,r.jsx)(n.Suspense,{fallback:(0,r.jsxs)("div",{className:"flex justify-center items-center py-16",children:[(0,r.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-[#007acc] border-t-transparent rounded-full mr-3"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Loading..."})]}),children:(0,r.jsx)(tn,{...e})})}},3589:(e,t,a)=>{a.d(t,{B:()=>s});var r=a(1643),n=a(6556);let o=["WIN","LOSE","INVALID","ERROR"],i=["MOBILE","DESKTOP","TABLET","KIOSK"],l=Array(50).fill(null).map((e,t)=>{let a=Math.floor(20*Math.random())+1,r=Math.floor(5*Math.random())+1,l=Math.random()>.3?Math.floor(25*Math.random())+1:null,s=l?"WIN":o[Math.floor(Math.random()*o.length)],d=(0,n.DJ)(),c="".concat(Math.floor(24*Math.random()).toString().padStart(2,"0"),":").concat(Math.floor(60*Math.random()).toString().padStart(2,"0"));return{data:{id:t+1,participantId:a,eventId:r,rewardId:l,outcome:s,spinDate:d,spinTime:c,deviceType:i[Math.floor(Math.random()*i.length)],ipAddress:"".concat(Math.floor(256*Math.random()),".").concat(Math.floor(256*Math.random()),".").concat(Math.floor(256*Math.random()),".").concat(Math.floor(256*Math.random())),claimed:"WIN"===s&&Math.random()>.5,claimedDate:"WIN"===s&&Math.random()>.5?(0,n.DJ)():null,goldenHourId:Math.random()>.7?Math.floor(15*Math.random())+1:null,createdAt:d+"T"+c}}}),s=(0,n.he)(r.an.SpinHistory,"spin_history",l,100),d=new Set;s.rows.forEach(e=>{let t=e.data.eventId,a=e.data.participantId,n=e.data.rewardId,o=e.data.goldenHourId;t&&!d.has("event_".concat(t))&&(s.relatedLinkedObjects["event_".concat(t)]={id:t,name:"Event ".concat(t),objectType:r.an.Event,description:"Parent event",key:{keys:["id"]}},d.add("event_".concat(t))),a&&!d.has("participant_".concat(a))&&(s.relatedLinkedObjects["participant_".concat(a)]={id:a,name:"Participant ".concat(a),objectType:r.an.Participant,description:"Participant who spun",key:{keys:["id"]}},d.add("participant_".concat(a))),n&&!d.has("reward_".concat(n))&&(s.relatedLinkedObjects["reward_".concat(n)]={id:n,name:"Reward ".concat(n),objectType:r.an.Reward,description:"Won reward",key:{keys:["id"]}},d.add("reward_".concat(n))),o&&!d.has("goldenHour_".concat(o))&&(s.relatedLinkedObjects["goldenHour_".concat(o)]={id:o,name:"Golden Hour ".concat(o),objectType:r.an.GoldenHour,description:"Golden hour when spin occurred",key:{keys:["id"]}},d.add("goldenHour_".concat(o)))})},3999:(e,t,a)=>{a.d(t,{cn:()=>o});var r=a(2596),n=a(9688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}},4995:(e,t,a)=>{a.d(t,{J5:()=>c,Qp:()=>d,w1:()=>p});var r=a(5155),n=a(2115),o=a(6874),i=a.n(o),l=a(3999),s=a(3052);let d=n.forwardRef((e,t)=>{let{className:a,children:n,...o}=e;return(0,r.jsx)("nav",{ref:t,"aria-label":"breadcrumb",className:(0,l.cn)("inline-flex items-center space-x-1 text-sm text-gray-400",a),...o,children:n})});d.displayName="Breadcrumb";let c=n.forwardRef((e,t)=>{let{className:a,isCurrentPage:n,...o}=e;return(0,r.jsx)("li",{ref:t,className:(0,l.cn)("inline-flex items-center",a),"aria-current":n?"page":void 0,...o})});c.displayName="BreadcrumbItem";let p=n.forwardRef((e,t)=>{let{href:a,children:n,className:o,asChild:d,...c}=e;return(0,r.jsxs)("div",{className:"inline-flex items-center",children:[void 0===a?(0,r.jsx)("span",{className:(0,l.cn)("font-medium text-white",o),children:n}):(0,r.jsx)(i(),{href:a,className:(0,l.cn)("hover:text-white transition-colors",o),...c,ref:t,children:n}),(0,r.jsx)(s.A,{className:"mx-1 h-4 w-4"})]})});p.displayName="BreadcrumbLink"},5562:(e,t,a)=>{a.d(t,{default:()=>n});var r=a(5155);function n(e){let{children:t}=e;return(0,r.jsx)("div",{className:"h-full overflow-auto",children:t})}},6556:(e,t,a)=>{a.d(t,{BB:()=>l,DJ:()=>o,Ob:()=>s,RT:()=>i,he:()=>n});var r=a(1643);function n(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.length,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:10,l={};return a.length>0&&Object.keys(a[0].data).forEach(t=>{let n={objectType:e,fieldName:t,fieldType:function(e){if(null==e)return r.PU.STRING;switch(typeof e){case"number":return r.PU.NUMBER;case"boolean":return r.PU.BOOLEAN;case"string":if(!isNaN(Date.parse(e))&&e.includes("-"))return r.PU.DATE;return r.PU.STRING;case"object":if(e instanceof Date)return r.PU.DATE;return r.PU.OBJECT;default:return r.PU.STRING}}(a[0].data[t]),sortType:r.r3.NONE};l[t]=n}),{status:r.Lx.SUCCESS,message:"Success",originalRequest:{page:o,size:i,sorts:[],filters:[],search:{},objectType:e},key:{keys:["id"]},totalPage:Math.ceil(n/i),currentPage:o,pageSize:i,totalElements:n,tableName:t,fieldNameMap:l,rows:a,relatedLinkedObjects:{},statistics:{charts:{}},first:0===o,last:o>=Math.ceil(n/i)-1,empty:0===a.length,numberOfElements:a.length}}function o(){let e=new Date,t=new Date;return t.setFullYear(e.getFullYear()-1),new Date(t.getTime()+Math.random()*(e.getTime()-t.getTime())).toISOString().split("T")[0]}function i(){let e=new Date,t=new Date;t.setMonth(e.getMonth()-Math.floor(6*Math.random()));let a=new Date;return a.setMonth(e.getMonth()+1+Math.floor(12*Math.random())),[t.toISOString().split("T")[0],a.toISOString().split("T")[0]]}function l(e){return e[Math.floor(Math.random()*e.length)]}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return Math.random()<e}},8482:(e,t,a)=>{a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>s,Zp:()=>i,aR:()=>l});var r=a(5155),n=a(2115),o=a(3999);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border border-[#3c3c3c] bg-[#252526] text-card-foreground shadow-sm",a),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...n})});l.displayName="CardHeader";let s=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight text-white",a),...n})});s.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-gray-400",a),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"}}]);