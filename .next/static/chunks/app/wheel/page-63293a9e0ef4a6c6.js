(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{238:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(2895).A)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},1643:(e,t,a)=>{"use strict";a.d(t,{Lx:()=>n,PU:()=>l,RJ:()=>s,an:()=>r,r3:()=>i,vh:()=>c});var r=function(e){return e.Event="Event",e.Region="Region",e.Province="Province",e.Reward="Reward",e.RewardEvent="RewardEvent",e.GoldenHour="GoldenHour",e.SpinHistory="SpinHistory",e.AuditLog="AuditLog",e.Statistics="Statistics",e.User="User",e.Role="Role",e.Permission="Permission",e.Configuration="Configuration",e.BlacklistedToken="BlacklistedToken",e.EventLocation="EventLocation",e.Participant="Participant",e.ParticipantEvent="ParticipantEvent",e.JobImportHistory="JobImportHistory",e.JobImportHistoryDetail="JobImportHistoryDetail",e.RewardDistribute="RewardDistribute",e.DailyRewardDistribution="DailyRewardDistribution",e}({}),n=function(e){return e.SUCCESS="SUCCESS",e.NO_DATA="NO_DATA",e.ERROR="ERROR",e.INVALID_REQUEST="INVALID_REQUEST",e.ACCESS_DENIED="ACCESS_DENIED",e}({}),i=function(e){return e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING",e.NONE="NONE",e.UNSORTABLE="UNSORTABLE",e}({}),s=function(e){return e.EQUALS="EQUALS",e.NOT_EQUALS="NOT_EQUALS",e.LESS_THAN="LESS_THAN",e.LESS_THAN_OR_EQUALS="LESS_THAN_OR_EQUALS",e.GREATER_THAN="GREATER_THAN",e.GREATER_THAN_OR_EQUALS="GREATER_THAN_OR_EQUALS",e.BETWEEN="BETWEEN",e.IN="IN",e.NOT_IN="NOT_IN",e.CONTAINS="CONTAINS",e.STARTS_WITH="STARTS_WITH",e.ENDS_WITH="ENDS_WITH",e}({}),l=function(e){return e.STRING="STRING",e.NUMBER="NUMBER",e.BOOLEAN="BOOLEAN",e.DATE="DATE",e.DATETIME="DATETIME",e.TIME="TIME",e.OBJECT="OBJECT",e}({}),c=function(e){return e.ADD="ADD",e.UPDATE="UPDATE",e.DELETE="DELETE",e.VIEW="VIEW",e.EXPORT="EXPORT",e.IMPORT="IMPORT",e}({})},3589:(e,t,a)=>{"use strict";a.d(t,{B:()=>c});var r=a(1643),n=a(6556);let i=["WIN","LOSE","INVALID","ERROR"],s=["MOBILE","DESKTOP","TABLET","KIOSK"],l=Array(50).fill(null).map((e,t)=>{let a=Math.floor(20*Math.random())+1,r=Math.floor(5*Math.random())+1,l=Math.random()>.3?Math.floor(25*Math.random())+1:null,c=l?"WIN":i[Math.floor(Math.random()*i.length)],o=(0,n.DJ)(),d="".concat(Math.floor(24*Math.random()).toString().padStart(2,"0"),":").concat(Math.floor(60*Math.random()).toString().padStart(2,"0"));return{data:{id:t+1,participantId:a,eventId:r,rewardId:l,outcome:c,spinDate:o,spinTime:d,deviceType:s[Math.floor(Math.random()*s.length)],ipAddress:"".concat(Math.floor(256*Math.random()),".").concat(Math.floor(256*Math.random()),".").concat(Math.floor(256*Math.random()),".").concat(Math.floor(256*Math.random())),claimed:"WIN"===c&&Math.random()>.5,claimedDate:"WIN"===c&&Math.random()>.5?(0,n.DJ)():null,goldenHourId:Math.random()>.7?Math.floor(15*Math.random())+1:null,createdAt:o+"T"+d}}}),c=(0,n.he)(r.an.SpinHistory,"spin_history",l,100),o=new Set;c.rows.forEach(e=>{let t=e.data.eventId,a=e.data.participantId,n=e.data.rewardId,i=e.data.goldenHourId;t&&!o.has("event_".concat(t))&&(c.relatedLinkedObjects["event_".concat(t)]={id:t,name:"Event ".concat(t),objectType:r.an.Event,description:"Parent event",key:{keys:["id"]}},o.add("event_".concat(t))),a&&!o.has("participant_".concat(a))&&(c.relatedLinkedObjects["participant_".concat(a)]={id:a,name:"Participant ".concat(a),objectType:r.an.Participant,description:"Participant who spun",key:{keys:["id"]}},o.add("participant_".concat(a))),n&&!o.has("reward_".concat(n))&&(c.relatedLinkedObjects["reward_".concat(n)]={id:n,name:"Reward ".concat(n),objectType:r.an.Reward,description:"Won reward",key:{keys:["id"]}},o.add("reward_".concat(n))),i&&!o.has("goldenHour_".concat(i))&&(c.relatedLinkedObjects["goldenHour_".concat(i)]={id:i,name:"Golden Hour ".concat(i),objectType:r.an.GoldenHour,description:"Golden hour when spin occurred",key:{keys:["id"]}},o.add("goldenHour_".concat(i)))})},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var r=a(2596),n=a(9688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}},4416:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(2895).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4631:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(2895).A)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},4995:(e,t,a)=>{"use strict";a.d(t,{J5:()=>d,Qp:()=>o,w1:()=>h});var r=a(5155),n=a(2115),i=a(6874),s=a.n(i),l=a(3999),c=a(3052);let o=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,r.jsx)("nav",{ref:t,"aria-label":"breadcrumb",className:(0,l.cn)("inline-flex items-center space-x-1 text-sm text-gray-400",a),...i,children:n})});o.displayName="Breadcrumb";let d=n.forwardRef((e,t)=>{let{className:a,isCurrentPage:n,...i}=e;return(0,r.jsx)("li",{ref:t,className:(0,l.cn)("inline-flex items-center",a),"aria-current":n?"page":void 0,...i})});d.displayName="BreadcrumbItem";let h=n.forwardRef((e,t)=>{let{href:a,children:n,className:i,asChild:o,...d}=e;return(0,r.jsxs)("div",{className:"inline-flex items-center",children:[void 0===a?(0,r.jsx)("span",{className:(0,l.cn)("font-medium text-white",i),children:n}):(0,r.jsx)(s(),{href:a,className:(0,l.cn)("hover:text-white transition-colors",i),...d,ref:t,children:n}),(0,r.jsx)(c.A,{className:"mx-1 h-4 w-4"})]})});h.displayName="BreadcrumbLink"},5562:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var r=a(5155);function n(e){let{children:t}=e;return(0,r.jsx)("div",{className:"h-full overflow-auto",children:t})}},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},6556:(e,t,a)=>{"use strict";a.d(t,{BB:()=>l,DJ:()=>i,Ob:()=>c,RT:()=>s,he:()=>n});var r=a(1643);function n(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.length,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:10,l={};return a.length>0&&Object.keys(a[0].data).forEach(t=>{let n={objectType:e,fieldName:t,fieldType:function(e){if(null==e)return r.PU.STRING;switch(typeof e){case"number":return r.PU.NUMBER;case"boolean":return r.PU.BOOLEAN;case"string":if(!isNaN(Date.parse(e))&&e.includes("-"))return r.PU.DATE;return r.PU.STRING;case"object":if(e instanceof Date)return r.PU.DATE;return r.PU.OBJECT;default:return r.PU.STRING}}(a[0].data[t]),sortType:r.r3.NONE};l[t]=n}),{status:r.Lx.SUCCESS,message:"Success",originalRequest:{page:i,size:s,sorts:[],filters:[],search:{},objectType:e},key:{keys:["id"]},totalPage:Math.ceil(n/s),currentPage:i,pageSize:s,totalElements:n,tableName:t,fieldNameMap:l,rows:a,relatedLinkedObjects:{},statistics:{charts:{}},first:0===i,last:i>=Math.ceil(n/s)-1,empty:0===a.length,numberOfElements:a.length}}function i(){let e=new Date,t=new Date;return t.setFullYear(e.getFullYear()-1),new Date(t.getTime()+Math.random()*(e.getTime()-t.getTime())).toISOString().split("T")[0]}function s(){let e=new Date,t=new Date;t.setMonth(e.getMonth()-Math.floor(6*Math.random()));let a=new Date;return a.setMonth(e.getMonth()+1+Math.floor(12*Math.random())),[t.toISOString().split("T")[0],a.toISOString().split("T")[0]]}function l(e){return e[Math.floor(Math.random()*e.length)]}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return Math.random()<e}},6679:(e,t,a)=>{Promise.resolve().then(a.bind(a,6681))},6681:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>U});var r=a(5155),n=a(2115),i=a(5695),s=a(5562),l=a(2895);let c=(0,l.A)("ArrowBigDown",[["path",{d:"M15 6v6h4l-7 7-7-7h4V6h6z",key:"1thax2"}]]),o=e=>{let{segments:t,segColors:a,winningSegment:i=null,onFinished:s,primaryColor:l="#007acc",contrastColor:o="#ffffff",buttonText:d="SPIN",isOnlyOnce:h=!1,size:u=290,upDuration:m=100,downDuration:x=1e3,fontFamily:f="Geist, sans-serif",spinning:p,setSpinning:y}=e,[g,v]=(0,n.useState)(!1),[N,w]=(0,n.useState)(0),[b,j]=(0,n.useState)(!1),E=(0,n.useRef)(null),S="boolean"==typeof p&&"function"==typeof y,A=S?p:g,T=S?y:v,M=u/2,k=u/2,R=u/2-10,I=a||["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"];(0,n.useEffect)(()=>{t&&0!==t.length||console.error("No segments provided to WheelComponent")},[t]);let O=(e,t)=>{if(t<=0)return"";let a=360/t,r=e*a*Math.PI/180,n=(e+1)*a*Math.PI/180,i=M+R*Math.cos(r),s=k+R*Math.sin(r),l=M+R*Math.cos(n),c=k+R*Math.sin(n);return"M ".concat(M," ").concat(k," L ").concat(i," ").concat(s," A ").concat(R," ").concat(R," 0 ").concat(+(a>180)," 1 ").concat(l," ").concat(c," Z")},D=(e,t)=>{if(t<=0)return{x:M,y:k,rotation:0};let a=360/t,r=e*a+a/2,n=r*Math.PI/180,i=.7*R;return{x:M+i*Math.cos(n),y:k+i*Math.sin(n),rotation:r}},P=(e,t)=>{if(t<=0)return{x:M,y:k,rotation:0};let a=360/t,r=e*a+a/2,n=r*Math.PI/180,i=.4*R;return{x:M+i*Math.cos(n),y:k+i*Math.sin(n),rotation:r}};return(0,n.useEffect)(()=>{console.log("WheelComponent mounted with",(null==t?void 0:t.length)||0,"segments"),t&&t.length>0&&console.log("First segment:",t[0])},[t]),(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-3 z-10",children:(0,r.jsx)(c,{size:32,color:l,fill:l})}),(!t||0===t.length)&&(0,r.jsx)("div",{className:"bg-red-800 text-white p-4 rounded-md mb-2",children:"No segments provided to wheel"}),(0,r.jsx)("div",{className:"relative",style:{width:"".concat(u,"px"),height:"".concat(u,"px")},children:(0,r.jsxs)("svg",{width:u,height:u,viewBox:"0 0 ".concat(u," ").concat(u),className:"rounded-full border-4 border-[#3c3c3c]",children:[(0,r.jsx)("circle",{cx:M,cy:k,r:R,fill:"#2d2d2d"}),t&&t.length>0&&(0,r.jsx)("g",{ref:E,transform:"rotate(".concat(N," ").concat(M," ").concat(k,")"),children:t.map((e,a)=>(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:O(a,t.length),fill:e.color||I[a%I.length],stroke:"#111",strokeWidth:"1"}),e.image&&(0,r.jsx)("g",{transform:"\n                          translate(".concat(P(a,t.length).x,", ").concat(P(a,t.length).y,") \n                          rotate(").concat(P(a,t.length).rotation+90,")\n                        "),children:(0,r.jsx)("circle",{r:"15",fill:"white",opacity:"0.9"})}),(0,r.jsx)("g",{transform:"\n                        translate(".concat(D(a,t.length).x,", ").concat(D(a,t.length).y,") \n                        rotate(").concat(D(a,t.length).rotation+90,")\n                      "),children:e.isReward&&e.rewardValue?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("text",{x:"0",y:"-8",fontFamily:f,fontSize:"12",fontWeight:"bold",fill:o,textAnchor:"middle",dominantBaseline:"middle",children:e.text}),(0,r.jsx)("text",{x:"0",y:"8",fontFamily:f,fontSize:"12",fontWeight:"bold",fill:o,textAnchor:"middle",dominantBaseline:"middle",children:e.rewardValue})]}):(0,r.jsx)("text",{x:"0",y:"0",fontFamily:f,fontSize:"12",fontWeight:"bold",fill:o,textAnchor:"middle",dominantBaseline:"middle",children:e.text})})]},e.id||a))}),(0,r.jsx)("circle",{cx:M,cy:k,r:"20",fill:l})]})})]}),(0,r.jsx)("button",{className:"mt-6 px-8 py-2 rounded-full text-center text-xl font-bold tracking-wide ".concat(A||h&&b||!t||0===t.length?"bg-gray-600 cursor-not-allowed":"bg-[#007acc] hover:bg-[#0069ac] cursor-pointer"," text-white transition-all duration-300"),onClick:()=>{if(!t||0===t.length)return void console.error("Cannot spin: No segments provided");if(A||h&&b)return;T(!0),j(!0);let e=i;if(null===e){let a=t.map(e=>e.probability||1),r=Math.random()*a.reduce((e,t)=>e+t,0),n=0;for(let i=0;i<t.length;i++)if(r<=(n+=a[i])){e=i;break}}let a=360/t.length,r=0,n=1800+(360-e*a+.8*a*Math.random()),l=performance.now(),c=m+x,o=a=>{let r=Math.min((a-l)/c,1);if(r<1){let e;w((r<m/c?m/c*Math.pow(r*c/m,2):m/c+x/c*(1-Math.pow(1-(r-m/c)*c/x,3)))*n),requestAnimationFrame(o)}else{w(n),T(!1);let a=e;a>=0&&a<t.length?s(t[a]):(console.error("Invalid winning segment index:",a),s(t[0]))}};requestAnimationFrame(o)},disabled:A||h&&b||!t||0===t.length,children:d})]})};var d=a(2596);let h=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,u=d.$;var m=a(3999);let x=((e,t)=>a=>{var r;if((null==t?void 0:t.variants)==null)return u(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:n,defaultVariants:i}=t,s=Object.keys(n).map(e=>{let t=null==a?void 0:a[e],r=null==i?void 0:i[e];if(null===t)return null;let s=h(t)||h(r);return n[e][s]}),l=a&&Object.entries(a).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return u(e,s,null==t||null==(r=t.compoundVariants)?void 0:r.reduce((e,t)=>{let{class:a,className:r,...n}=t;return Object.entries(n).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...i,...l}[t]):({...i,...l})[t]===a})?[...e,a,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)})("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary",vscode:"bg-[#007acc] text-white hover:bg-[#0069ac]"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",xs:"h-7 px-2 rounded-md text-xs",icon:"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}}),f=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:s=!1,...l}=e;return(0,r.jsx)("button",{className:(0,m.cn)(x({variant:n,size:i,className:a})),ref:t,...l})});f.displayName="Button";var p=a(4416);function y(e){let{isOpen:t,onCloseAction:a,children:i,title:s,className:l}=e;return(n.useEffect(()=>{let e=e=>{"Escape"===e.key&&t&&a()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,a]),t)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:(0,m.cn)("relative w-full max-w-md max-h-[90vh] overflow-auto bg-[#1e1e1e] border border-[#3c3c3c] rounded-md shadow-lg",l),children:[s&&(0,r.jsxs)("div",{className:"flex justify-between items-center border-b border-[#3c3c3c] p-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:s}),(0,r.jsx)("button",{onClick:a,className:"p-1 rounded-full hover:bg-[#3c3c3c] transition-colors",children:(0,r.jsx)(p.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("div",{className:(0,m.cn)(!s&&"pt-4"),children:i})]})}):null}var g=a(4995),v=a(8482),N=a(238);let w=(0,l.A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),b=(0,l.A)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),j=(0,l.A)("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),E=(0,l.A)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);var S=a(4631);let A=(0,l.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),T=(0,l.A)("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),M=(0,l.A)("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),k=(0,l.A)("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);var R=a(9509);let I=R.env.NEXT_PUBLIC_API_URL||"http://opsched.deltavn.vn:8014/luckydraw/api",O={EVENTS:"".concat(I,"/table-data/fetch/events"),PARTICIPANTS:"".concat(I,"/table-data/fetch/participants"),REWARDS:"".concat(I,"/table-data/fetch/rewards"),REGIONS:"".concat(I,"/table-data/fetch/regions"),PROVINCES:"".concat(I,"/table-data/fetch/provinces"),GOLDEN_HOURS:"".concat(I,"/table-data/fetch/goldenHours"),USERS:"".concat(I,"/table-data/fetch/users"),ROLES:"".concat(I,"/table-data/fetch/roles"),AUDIT_LOGS:"".concat(I,"/table-data/fetch/auditLogs"),SPIN_HISTORIES:"".concat(I,"/table-data/fetch/spinHistories")};O.EVENTS,O.PARTICIPANTS,O.REWARDS,O.REGIONS,O.PROVINCES,O.GOLDEN_HOURS,O.USERS,O.ROLES,O.AUDIT_LOGS,O.SPIN_HISTORIES;let D={USE_MOCK_DATA:"true"===R.env.NEXT_PUBLIC_USE_MOCK_DATA,ENABLE_AUTH:"true"===R.env.NEXT_PUBLIC_ENABLE_AUTH||!0};var P=a(3589);let _={spinWheel:async e=>{if(D.USE_MOCK_DATA){let e=Math.random()>.7,t=e?Math.floor(25*Math.random())+1:null,a=["#e91e63","#9c27b0","#3f51b5","#2196f3","#009688"];return{id:Math.floor(1e4*Math.random()),spinId:Math.floor(1e3*Math.random()),outcome:e?"WIN":"LOSE",rewardId:t,rewardName:e?"Prize ".concat(t):null,rewardValue:e?"$".concat(Math.floor(100*Math.random())):null,rewardColor:e?a[Math.floor(Math.random()*a.length)]:null,timestamp:new Date().toISOString(),multiplier:Math.random()>.2?2:1,isGoldenHour:Math.random()>.7}}try{let t=await fetch("".concat(I,"/events/spin"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)});if(!t.ok)throw Error("Spin failed with status: ".concat(t.status));return await t.json()}catch(e){throw console.error("Error spinning wheel:",e),e}},getRemainingSpins:async(e,t)=>{if(D.USE_MOCK_DATA)return Math.floor(5*Math.random())+1;try{let a=await fetch("".concat(I,"/events/").concat(e,"/participants/").concat(t,"/spins-remaining"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!a.ok)throw Error("Failed to get remaining spins with status: ".concat(a.status));return(await a.json()).remainingSpins}catch(e){throw console.error("Error getting remaining spins:",e),e}},getSpinHistory:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(D.USE_MOCK_DATA){let n=P.B.rows.filter(a=>a.data.eventId===Number(e)&&(!t||a.data.participantId===Number(t)));return{spins:n.slice(a*r,(a+1)*r).map(e=>({id:e.data.id,outcome:e.data.outcome,rewardId:e.data.rewardId,rewardName:e.data.rewardId?"Prize ".concat(e.data.rewardId):null,timestamp:e.data.createdAt,claimed:e.data.claimed,claimedDate:e.data.claimedDate})),totalItems:n.length,totalPages:Math.ceil(n.length/r)}}try{let n="".concat(I,"/events/").concat(e,"/spins?page=").concat(a,"&size=").concat(r);t&&(n+="&participantId=".concat(t));let i=await fetch(n,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!i.ok)throw Error("Failed to get spin history with status: ".concat(i.status));return await i.json()}catch(e){throw console.error("Error getting spin history:",e),e}},claimReward:async e=>{if(D.USE_MOCK_DATA)return{success:!0,message:"Reward claimed successfully"};try{let t=await fetch("".concat(I,"/rewards/claim/").concat(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!t.ok)throw Error("Failed to claim reward with status: ".concat(t.status));return await t.json()}catch(e){throw console.error("Error claiming reward:",e),e}}},C=function(e){"string"==typeof e?console.log("Toast:",e):console.log("Toast:",e.title,e.description,e.variant)},L=[{id:1,name:"Gift Card",description:"A $50 gift card for your next purchase",value:"$50",color:"#e91e63",icon:N.A},{id:2,name:"Free Product",description:"One free product of your choice",value:"$25",color:"#9c27b0",icon:w},{id:3,name:"Discount",description:"25% off your next purchase",value:"25% OFF",color:"#3f51b5",icon:b},{id:4,name:"Bonus Spins",description:"Get 3 additional spins",value:"3 Spins",color:"#2196f3",icon:j},{id:5,name:"Premium Pass",description:"Access to exclusive content for 30 days",value:"30 Days",color:"#009688",icon:E}],B=e=>{let t=[];e.forEach(e=>{t.push({id:e.id,text:e.name,color:e.color,isReward:!0,rewardValue:e.value,probability:15})});let a=Math.max(3,Math.floor(.6*t.length));for(let e=0;e<a;e++)t.push({id:1e3+e,text:"Try Again",color:"#607d8b",isReward:!1,probability:25});return t};function U(){let[e,t]=(0,n.useState)(!1),[a,l]=(0,n.useState)([]),[c,d]=(0,n.useState)("Summer Giveaway"),[h,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(null),[p,N]=(0,n.useState)(3),[w,b]=(0,n.useState)([]),[j,E]=(0,n.useState)(!0),[R,I]=(0,n.useState)(null),O=(0,i.useSearchParams)(),D=(null==O?void 0:O.get("event"))||"1";if((0,n.useEffect)(()=>{(async()=>{try{E(!0);let e=B(L);l(e),d("Summer Giveaway");let t=await _.getRemainingSpins(D,"1");N(t);let a=(await _.getSpinHistory(D,"1")).spins.map(e=>({result:{id:e.rewardId||0,text:e.rewardName||"Try Again",color:"WIN"===e.outcome?"#1e3a5f":"#607d8b",isReward:"WIN"===e.outcome,rewardValue:e.rewardName?"".concat(e.rewardName):void 0},timestamp:new Date(e.timestamp).toLocaleTimeString(),claimed:e.claimed,spinId:e.id}));b(a),E(!1)}catch(e){console.error("Error loading wheel data:",e),I("Failed to load wheel data. Please try again later."),E(!1)}})()},[D,"1"]),j)return(0,r.jsx)(s.default,{children:(0,r.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,r.jsxs)("div",{className:"text-center p-8",children:[(0,r.jsx)(S.A,{className:"animate-spin h-10 w-10 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Loading wheel..."})]})})});if(R)return(0,r.jsx)(s.default,{children:(0,r.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,r.jsxs)("div",{className:"text-center p-8 bg-red-900/20 rounded-lg",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-red-500",children:R}),(0,r.jsx)("button",{className:"bg-[#007acc] text-white px-3 py-2 rounded",onClick:()=>window.location.reload(),children:"Try Again"})]})})});if(!a||0===a.length)return(0,r.jsx)(s.default,{children:(0,r.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,r.jsx)("div",{className:"text-center p-8",children:(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"No prizes available for this event"})})})});let P=async e=>{try{let e,a=await _.spinWheel({eventId:D,participantId:"1"});if("WIN"===a.outcome&&a.rewardId){var t;e={id:a.rewardId,text:a.rewardName||"Prize",color:a.rewardColor||"#007acc",isReward:!0,rewardValue:null!=(t=a.rewardValue)?t:void 0}}else e={id:0,text:"Try Again",color:"#607d8b",isReward:!1};b(t=>[{result:e,timestamp:new Date().toLocaleTimeString(),spinId:a.id?String(a.id):void 0,claimed:!1},...t]),N(e=>Math.max(0,e-1)),x(e),u(!0)}catch(e){console.error("Error in handleSpinFinished:",e),C({title:"Error",description:"Something went wrong with your spin. Please try again.",variant:"destructive"})}},U=()=>{u(!1)},H=async()=>{try{let e=w[0].spinId;if(!e)throw Error("No spin ID found");let t=await _.claimReward(Number(e));if(t.success)C({title:"Success!",description:"Reward claimed successfully. Check your email for details."}),b(e=>e.map((e,t)=>0===t?{...e,claimed:!0}:e));else throw Error(t.message||"Failed to claim reward");U()}catch(e){console.error("Error claiming reward:",e),C({title:"Error",description:"Failed to claim reward. Please try again later.",variant:"destructive"})}};return(0,r.jsxs)(s.default,{children:[(0,r.jsxs)("main",{className:"container mx-auto py-6 px-4",children:[(0,r.jsxs)(g.Qp,{className:"mb-6",children:[(0,r.jsx)(g.J5,{children:(0,r.jsx)(g.w1,{href:"/",children:"Home"})}),(0,r.jsx)(g.J5,{children:(0,r.jsx)(g.w1,{href:"/events",children:"Events"})}),(0,r.jsx)(g.J5,{isCurrentPage:!0,children:(0,r.jsx)(g.w1,{children:"Lucky Draw Wheel"})})]}),(0,r.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,r.jsxs)("h1",{className:"text-2xl font-bold",children:[c," - Lucky Draw"]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)(v.Zp,{children:[(0,r.jsxs)(v.aR,{children:[(0,r.jsx)(v.ZB,{children:"Your Spins"}),(0,r.jsx)(v.BT,{children:"Remaining spins and status"})]}),(0,r.jsx)(v.Wu,{children:(0,r.jsxs)("div",{className:"flex flex-col items-center py-4",children:[(0,r.jsx)("div",{className:"text-4xl font-bold text-[#007acc] mb-2",children:p}),(0,r.jsx)("div",{className:"text-gray-400",children:"Remaining Spins"}),(0,r.jsx)("div",{className:"mt-6 w-full",children:(0,r.jsx)(f,{className:"w-full",disabled:p<=0,onClick:()=>{var e;null==(e=document.getElementById("wheel-section"))||e.scrollIntoView({behavior:"smooth"})},children:p>0?"Spin Now":"No Spins Left"})}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-[#2d2d2d] rounded-md w-full",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(A,{size:16,className:"mr-2 text-gray-400"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"You can earn more spins by participating in other event activities."})]})})]})})]}),(0,r.jsxs)(v.Zp,{children:[(0,r.jsxs)(v.aR,{children:[(0,r.jsx)(v.ZB,{children:"Rewards Overview"}),(0,r.jsx)(v.BT,{children:"Potential prizes you can win"})]}),(0,r.jsx)(v.Wu,{className:"max-h-[400px] overflow-y-auto",children:(0,r.jsx)("div",{className:"space-y-3",children:L.map(e=>(0,r.jsxs)("div",{className:"p-3 bg-[#2d2d2d] rounded-md flex items-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full mr-3",style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:e.value})]})]},e.id))})})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center",id:"wheel-section",children:[(0,r.jsxs)(v.Zp,{className:"w-full",children:[(0,r.jsxs)(v.aR,{children:[(0,r.jsx)(v.ZB,{className:"text-center",children:"Spin The Wheel"}),(0,r.jsx)(v.BT,{className:"text-center",children:"Try your luck today!"})]}),(0,r.jsx)(v.Wu,{className:"flex justify-center py-8",children:(0,r.jsx)(o,{segments:a,primaryColor:"#007acc",contrastColor:"#ffffff",buttonText:e?"SPINNING...":"SPIN",size:280,upDuration:100,downDuration:1e3,onFinished:P,spinning:e,setSpinning:t,isOnlyOnce:!1})})]}),(0,r.jsxs)("div",{className:"mt-4 flex flex-col items-center justify-center p-4 bg-[#2d2d2d] rounded-md w-full",children:[(0,r.jsx)(T,{className:"h-5 w-5 text-[#007acc] mb-2"}),(0,r.jsx)("p",{className:"text-sm text-center text-gray-300",children:"Golden Hours offer 2x the chances to win! Check the schedule and come back during these special times."})]})]}),(0,r.jsx)("div",{children:(0,r.jsxs)(v.Zp,{className:"h-full",children:[(0,r.jsxs)(v.aR,{children:[(0,r.jsx)(v.ZB,{children:"Spin History"}),(0,r.jsx)(v.BT,{children:"Your recent spins and results"})]}),(0,r.jsx)(v.Wu,{children:w.length>0?(0,r.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2",children:w.map((e,t)=>(0,r.jsxs)("div",{className:"p-3 rounded-md flex items-center ".concat(e.result.isReward?"bg-[#1e3a5f]":"bg-[#2d2d2d]"),children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full mr-3 flex items-center justify-center",style:{backgroundColor:e.result.color},children:e.result.isReward?"\uD83C\uDF81":"âœ“"}),(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsxs)("div",{className:"font-medium",children:[e.result.text,e.result.rewardValue&&" - ".concat(e.result.rewardValue)]}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:e.timestamp})]}),e.result.isReward&&!e.claimed&&(0,r.jsx)(f,{variant:"secondary",size:"sm",onClick:()=>{x(e.result),u(!0)},children:"Claim"}),e.result.isReward&&e.claimed&&(0,r.jsx)("span",{className:"text-xs px-2 py-1 bg-green-800/30 text-green-400 rounded",children:"Claimed"})]},t))}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 text-gray-400",children:[(0,r.jsx)(A,{size:48,className:"mb-3 opacity-50"}),(0,r.jsx)("p",{children:"No spins yet. Start spinning to see your history!"})]})})]})})]})]}),(0,r.jsx)(y,{isOpen:h,onCloseAction:U,title:(null==m?void 0:m.isReward)?"Congratulations! \uD83C\uDF89":"Better Luck Next Time",className:"max-w-md",children:(0,r.jsxs)("div",{className:"p-6 flex flex-col items-center text-center",children:[(null==m?void 0:m.isReward)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-24 h-24 rounded-full bg-[#1e3a5f] flex items-center justify-center mb-4",children:(0,r.jsx)(M,{size:48,className:"text-[#007acc]"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"You Won!"}),(0,r.jsxs)("p",{className:"mb-4 text-gray-300",children:["You've won a ",m.text," ",m.rewardValue&&"(".concat(m.rewardValue,")"),"!"]}),(0,r.jsx)(f,{onClick:H,className:"mt-2 w-full",children:"Claim Your Prize"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-24 h-24 rounded-full bg-[#2d2d2d] flex items-center justify-center mb-4",children:(0,r.jsx)(k,{size:48,className:"text-gray-400"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"No Prize This Time"}),(0,r.jsxs)("p",{className:"mb-4 text-gray-300",children:["Don't give up! You still have ",p," spins left."]}),(0,r.jsx)(f,{onClick:U,className:"mt-2 w-full",children:"Try Again"})]}),0===p&&!(null==m?void 0:m.isReward)&&(0,r.jsx)("p",{className:"mt-4 text-yellow-500",children:"You've used all your spins. Come back tomorrow for more chances!"})]})})]})}},8482:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>s,aR:()=>l});var r=a(5155),n=a(2115),i=a(3999);let s=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border border-[#3c3c3c] bg-[#252526] text-card-foreground shadow-sm",a),...n})});s.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...n})});l.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight text-white",a),...n})});c.displayName="CardTitle";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-gray-400",a),...n})});o.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"}},e=>{var t=t=>e(e.s=t);e.O(0,[874,104,441,684,358],()=>t(6679)),_N_E=e.O()}]);