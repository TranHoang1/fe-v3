(()=>{var e={};e.id=922,e.ids=[922],e.modules={249:(e,t,r)=>{Promise.resolve().then(r.bind(r,6171))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1860:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(8962).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2358:(e,t,r)=>{Promise.resolve().then(r.bind(r,8969))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3125:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(8962).A)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},6171:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var a=r(687),n=r(3210),s=r(6189),i=r(7678),l=r(8962);let o=(0,l.A)("ArrowBigDown",[["path",{d:"M15 6v6h4l-7 7-7-7h4V6h6z",key:"1thax2"}]]),d=({segments:e,segColors:t,winningSegment:r=null,onFinished:s,primaryColor:i="#007acc",contrastColor:l="#ffffff",buttonText:d="SPIN",isOnlyOnce:c=!1,size:h=290,upDuration:u=100,downDuration:m=1e3,fontFamily:x="Geist, sans-serif",spinning:p,setSpinning:f})=>{let[y,g]=(0,n.useState)(!1),[v,N]=(0,n.useState)(0),[b,w]=(0,n.useState)(!1),E=(0,n.useRef)(null),j="boolean"==typeof p&&"function"==typeof f,S=j?p:y,A=j?f:g,T=h/2,k=h/2,M=h/2-10,I=t||["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"];(0,n.useEffect)(()=>{e&&0!==e.length||console.error("No segments provided to WheelComponent")},[e]);let R=(e,t)=>{if(t<=0)return"";let r=360/t,a=e*r*Math.PI/180,n=(e+1)*r*Math.PI/180,s=T+M*Math.cos(a),i=k+M*Math.sin(a),l=T+M*Math.cos(n),o=k+M*Math.sin(n);return`M ${T} ${k} L ${s} ${i} A ${M} ${M} 0 ${+(r>180)} 1 ${l} ${o} Z`},_=(e,t)=>{if(t<=0)return{x:T,y:k,rotation:0};let r=360/t,a=e*r+r/2,n=a*Math.PI/180,s=.7*M;return{x:T+s*Math.cos(n),y:k+s*Math.sin(n),rotation:a}},P=(e,t)=>{if(t<=0)return{x:T,y:k,rotation:0};let r=360/t,a=e*r+r/2,n=a*Math.PI/180,s=.4*M;return{x:T+s*Math.cos(n),y:k+s*Math.sin(n),rotation:a}};return(0,n.useEffect)(()=>{console.log("WheelComponent mounted with",e?.length||0,"segments"),e&&e.length>0&&console.log("First segment:",e[0])},[e]),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-3 z-10",children:(0,a.jsx)(o,{size:32,color:i,fill:i})}),(!e||0===e.length)&&(0,a.jsx)("div",{className:"bg-red-800 text-white p-4 rounded-md mb-2",children:"No segments provided to wheel"}),(0,a.jsx)("div",{className:"relative",style:{width:`${h}px`,height:`${h}px`},children:(0,a.jsxs)("svg",{width:h,height:h,viewBox:`0 0 ${h} ${h}`,className:"rounded-full border-4 border-[#3c3c3c]",children:[(0,a.jsx)("circle",{cx:T,cy:k,r:M,fill:"#2d2d2d"}),e&&e.length>0&&(0,a.jsx)("g",{ref:E,transform:`rotate(${v} ${T} ${k})`,children:e.map((t,r)=>(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:R(r,e.length),fill:t.color||I[r%I.length],stroke:"#111",strokeWidth:"1"}),t.image&&(0,a.jsx)("g",{transform:`
                          translate(${P(r,e.length).x}, ${P(r,e.length).y}) 
                          rotate(${P(r,e.length).rotation+90})
                        `,children:(0,a.jsx)("circle",{r:"15",fill:"white",opacity:"0.9"})}),(0,a.jsx)("g",{transform:`
                        translate(${_(r,e.length).x}, ${_(r,e.length).y}) 
                        rotate(${_(r,e.length).rotation+90})
                      `,children:t.isReward&&t.rewardValue?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("text",{x:"0",y:"-8",fontFamily:x,fontSize:"12",fontWeight:"bold",fill:l,textAnchor:"middle",dominantBaseline:"middle",children:t.text}),(0,a.jsx)("text",{x:"0",y:"8",fontFamily:x,fontSize:"12",fontWeight:"bold",fill:l,textAnchor:"middle",dominantBaseline:"middle",children:t.rewardValue})]}):(0,a.jsx)("text",{x:"0",y:"0",fontFamily:x,fontSize:"12",fontWeight:"bold",fill:l,textAnchor:"middle",dominantBaseline:"middle",children:t.text})})]},t.id||r))}),(0,a.jsx)("circle",{cx:T,cy:k,r:"20",fill:i})]})})]}),(0,a.jsx)("button",{className:`mt-6 px-8 py-2 rounded-full text-center text-xl font-bold tracking-wide ${S||c&&b||!e||0===e.length?"bg-gray-600 cursor-not-allowed":"bg-[#007acc] hover:bg-[#0069ac] cursor-pointer"} text-white transition-all duration-300`,onClick:()=>{if(!e||0===e.length)return void console.error("Cannot spin: No segments provided");if(S||c&&b)return;A(!0),w(!0);let t=r;if(null===t){let r=e.map(e=>e.probability||1),a=Math.random()*r.reduce((e,t)=>e+t,0),n=0;for(let s=0;s<e.length;s++)if(a<=(n+=r[s])){t=s;break}}let a=360/e.length,n=0,i=1800+(360-t*a+.8*a*Math.random()),l=performance.now(),o=u+m,d=r=>{let a=Math.min((r-l)/o,1);if(a<1){let e;N((a<u/o?u/o*Math.pow(a*o/u,2):u/o+m/o*(1-Math.pow(1-(a-u/o)*o/m,3)))*i),requestAnimationFrame(d)}else{N(i),A(!1);let r=t;r>=0&&r<e.length?s(e[r]):(console.error("Invalid winning segment index:",r),s(e[0]))}};requestAnimationFrame(d)},disabled:S||c&&b||!e||0===e.length,children:d})]})};var c=r(9384);let h=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,u=c.$;var m=r(6241);let x=((e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return u(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:n,defaultVariants:s}=t,i=Object.keys(n).map(e=>{let t=null==r?void 0:r[e],a=null==s?void 0:s[e];if(null===t)return null;let i=h(t)||h(a);return n[e][i]}),l=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return u(e,i,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:r,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...l}[t]):({...s,...l})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)})("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary",vscode:"bg-[#007acc] text-white hover:bg-[#0069ac]"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",xs:"h-7 px-2 rounded-md text-xs",icon:"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}}),p=n.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>(0,a.jsx)("button",{className:(0,m.cn)(x({variant:t,size:r,className:e})),ref:i,...s}));p.displayName="Button";var f=r(1860);function y({isOpen:e,onCloseAction:t,children:r,title:s,className:i}){return(n.useEffect(()=>{let r=r=>{"Escape"===r.key&&e&&t()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[e,t]),e)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:(0,m.cn)("relative w-full max-w-md max-h-[90vh] overflow-auto bg-[#1e1e1e] border border-[#3c3c3c] rounded-md shadow-lg",i),children:[s&&(0,a.jsxs)("div",{className:"flex justify-between items-center border-b border-[#3c3c3c] p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:s}),(0,a.jsx)("button",{onClick:t,className:"p-1 rounded-full hover:bg-[#3c3c3c] transition-colors",children:(0,a.jsx)(f.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:(0,m.cn)(!s&&"pt-4"),children:r})]})}):null}var g=r(4993),v=r(5192),N=r(428);let b=(0,l.A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),w=(0,l.A)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),E=(0,l.A)("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),j=(0,l.A)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);var S=r(3125);let A=(0,l.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),T=(0,l.A)("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),k=(0,l.A)("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),M=(0,l.A)("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),I=process.env.NEXT_PUBLIC_API_URL||"http://opsched.deltavn.vn:8014/luckydraw/api",R={EVENTS:`${I}/table-data/fetch/events`,PARTICIPANTS:`${I}/table-data/fetch/participants`,REWARDS:`${I}/table-data/fetch/rewards`,REGIONS:`${I}/table-data/fetch/regions`,PROVINCES:`${I}/table-data/fetch/provinces`,GOLDEN_HOURS:`${I}/table-data/fetch/goldenHours`,USERS:`${I}/table-data/fetch/users`,ROLES:`${I}/table-data/fetch/roles`,AUDIT_LOGS:`${I}/table-data/fetch/auditLogs`,SPIN_HISTORIES:`${I}/table-data/fetch/spinHistories`,DASHBOARD:`${I}/table-data/fetch/dashboard`,WHEEL_SPIN:`${I}/events/spin`,WHEEL_REMAINING_SPINS:`${I}/events/{eventId}/participants/{participantId}/spins-remaining`,WHEEL_HISTORY:`${I}/events/{eventId}/spins`,WHEEL_CLAIM_REWARD:`${I}/rewards/claim/{spinId}`};R.EVENTS,R.PARTICIPANTS,R.REWARDS,R.REGIONS,R.PROVINCES,R.GOLDEN_HOURS,R.USERS,R.ROLES,R.AUDIT_LOGS,R.SPIN_HISTORIES;let _={USE_MOCK_DATA:"true"===process.env.NEXT_PUBLIC_USE_MOCK_DATA,ENABLE_AUTH:"true"===process.env.NEXT_PUBLIC_ENABLE_AUTH||!0};r(7917);let P={spinWheel:async e=>{if(_.USE_MOCK_DATA){let e=Math.random()>.7,t=e?Math.floor(25*Math.random())+1:null,r=["#e91e63","#9c27b0","#3f51b5","#2196f3","#009688"];return{id:Math.floor(1e4*Math.random()),spinId:Math.floor(1e3*Math.random()),outcome:e?"WIN":"LOSE",rewardId:t,rewardName:e?`Prize ${t}`:null,rewardValue:e?`$${Math.floor(100*Math.random())}`:null,rewardColor:e?r[Math.floor(Math.random()*r.length)]:null,timestamp:new Date().toISOString(),multiplier:Math.random()>.2?2:1,isGoldenHour:Math.random()>.7}}try{let t=await fetch(`${I}/events/spin`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)});if(!t.ok)throw Error(`Spin failed with status: ${t.status}`);return await t.json()}catch(e){throw console.error("Error spinning wheel:",e),e}},claimReward:async e=>{if(_.USE_MOCK_DATA)return{success:!0,message:"Reward claimed successfully"};try{let t=await fetch(`${I}/rewards/claim/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw Error(`Failed to claim reward with status: ${t.status}`);return await t.json()}catch(e){throw console.error("Error claiming reward:",e),e}}},O=function(e){"string"==typeof e?console.log("Toast:",e):console.log("Toast:",e.title,e.description,e.variant)},$=[{id:1,name:"Gift Card",description:"A $50 gift card for your next purchase",value:"$50",color:"#e91e63",icon:N.A},{id:2,name:"Free Product",description:"One free product of your choice",value:"$25",color:"#9c27b0",icon:b},{id:3,name:"Discount",description:"25% off your next purchase",value:"25% OFF",color:"#3f51b5",icon:w},{id:4,name:"Bonus Spins",description:"Get 3 additional spins",value:"3 Spins",color:"#2196f3",icon:E},{id:5,name:"Premium Pass",description:"Access to exclusive content for 30 days",value:"30 Days",color:"#009688",icon:j}];function D(){let[e,t]=(0,n.useState)(!1),[r,l]=(0,n.useState)([]),[o,c]=(0,n.useState)("Summer Giveaway"),[h,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(null),[f,N]=(0,n.useState)(3),[b,w]=(0,n.useState)([]),[E,j]=(0,n.useState)(!0),[I,R]=(0,n.useState)(null),_=(0,s.useSearchParams)(),D=_?.get("event")||"1";if(E)return(0,a.jsx)(i.default,{children:(0,a.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)(S.A,{className:"animate-spin h-10 w-10 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Loading wheel..."})]})})});if(I)return(0,a.jsx)(i.default,{children:(0,a.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,a.jsxs)("div",{className:"text-center p-8 bg-red-900/20 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-red-500",children:I}),(0,a.jsx)("button",{className:"bg-[#007acc] text-white px-3 py-2 rounded",onClick:()=>window.location.reload(),children:"Try Again"})]})})});if(!r||0===r.length)return(0,a.jsx)(i.default,{children:(0,a.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,a.jsx)("div",{className:"text-center p-8",children:(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"No prizes available for this event"})})})});let C=async e=>{try{let e,t=await P.spinWheel({eventId:D,participantId:"1"});e="WIN"===t.outcome&&t.rewardId?{id:t.rewardId,text:t.rewardName||"Prize",color:t.rewardColor||"#007acc",isReward:!0,rewardValue:t.rewardValue??void 0}:{id:0,text:"Try Again",color:"#607d8b",isReward:!1},w(r=>[{result:e,timestamp:new Date().toLocaleTimeString(),spinId:t.id?String(t.id):void 0,claimed:!1},...r]),N(e=>Math.max(0,e-1)),x(e),u(!0)}catch(e){console.error("Error in handleSpinFinished:",e),O({title:"Error",description:"Something went wrong with your spin. Please try again.",variant:"destructive"})}},L=()=>{u(!1)},U=async()=>{try{let e=b[0].spinId;if(!e)throw Error("No spin ID found");let t=await P.claimReward(Number(e));if(t.success)O({title:"Success!",description:"Reward claimed successfully. Check your email for details."}),w(e=>e.map((e,t)=>0===t?{...e,claimed:!0}:e));else throw Error(t.message||"Failed to claim reward");L()}catch(e){console.error("Error claiming reward:",e),O({title:"Error",description:"Failed to claim reward. Please try again later.",variant:"destructive"})}};return(0,a.jsxs)(i.default,{children:[(0,a.jsxs)("main",{className:"container mx-auto py-6 px-4",children:[(0,a.jsxs)(g.Qp,{className:"mb-6",children:[(0,a.jsx)(g.J5,{children:(0,a.jsx)(g.w1,{href:"/",children:"Home"})}),(0,a.jsx)(g.J5,{children:(0,a.jsx)(g.w1,{href:"/events",children:"Events"})}),(0,a.jsx)(g.J5,{isCurrentPage:!0,children:(0,a.jsx)(g.w1,{children:"Lucky Draw Wheel"})})]}),(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsxs)("h1",{className:"text-2xl font-bold",children:[o," - Lucky Draw"]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)(v.Zp,{children:[(0,a.jsxs)(v.aR,{children:[(0,a.jsx)(v.ZB,{children:"Your Spins"}),(0,a.jsx)(v.BT,{children:"Remaining spins and status"})]}),(0,a.jsx)(v.Wu,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center py-4",children:[(0,a.jsx)("div",{className:"text-4xl font-bold text-[#007acc] mb-2",children:f}),(0,a.jsx)("div",{className:"text-gray-400",children:"Remaining Spins"}),(0,a.jsx)("div",{className:"mt-6 w-full",children:(0,a.jsx)(p,{className:"w-full",disabled:f<=0,onClick:()=>{document.getElementById("wheel-section")?.scrollIntoView({behavior:"smooth"})},children:f>0?"Spin Now":"No Spins Left"})}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-[#2d2d2d] rounded-md w-full",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(A,{size:16,className:"mr-2 text-gray-400"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"You can earn more spins by participating in other event activities."})]})})]})})]}),(0,a.jsxs)(v.Zp,{children:[(0,a.jsxs)(v.aR,{children:[(0,a.jsx)(v.ZB,{children:"Rewards Overview"}),(0,a.jsx)(v.BT,{children:"Potential prizes you can win"})]}),(0,a.jsx)(v.Wu,{className:"max-h-[400px] overflow-y-auto",children:(0,a.jsx)("div",{className:"space-y-3",children:$.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-[#2d2d2d] rounded-md flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full mr-3",style:{backgroundColor:e.color}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:e.value})]})]},e.id))})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",id:"wheel-section",children:[(0,a.jsxs)(v.Zp,{className:"w-full",children:[(0,a.jsxs)(v.aR,{children:[(0,a.jsx)(v.ZB,{className:"text-center",children:"Spin The Wheel"}),(0,a.jsx)(v.BT,{className:"text-center",children:"Try your luck today!"})]}),(0,a.jsx)(v.Wu,{className:"flex justify-center py-8",children:(0,a.jsx)(d,{segments:r,primaryColor:"#007acc",contrastColor:"#ffffff",buttonText:e?"SPINNING...":"SPIN",size:280,upDuration:100,downDuration:1e3,onFinished:C,spinning:e,setSpinning:t,isOnlyOnce:!1})})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col items-center justify-center p-4 bg-[#2d2d2d] rounded-md w-full",children:[(0,a.jsx)(T,{className:"h-5 w-5 text-[#007acc] mb-2"}),(0,a.jsx)("p",{className:"text-sm text-center text-gray-300",children:"Golden Hours offer 2x the chances to win! Check the schedule and come back during these special times."})]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)(v.Zp,{className:"h-full",children:[(0,a.jsxs)(v.aR,{children:[(0,a.jsx)(v.ZB,{children:"Spin History"}),(0,a.jsx)(v.BT,{children:"Your recent spins and results"})]}),(0,a.jsx)(v.Wu,{children:b.length>0?(0,a.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2",children:b.map((e,t)=>(0,a.jsxs)("div",{className:`p-3 rounded-md flex items-center ${e.result.isReward?"bg-[#1e3a5f]":"bg-[#2d2d2d]"}`,children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full mr-3 flex items-center justify-center",style:{backgroundColor:e.result.color},children:e.result.isReward?"\uD83C\uDF81":"âœ“"}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.result.text,e.result.rewardValue&&` - ${e.result.rewardValue}`]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.timestamp})]}),e.result.isReward&&!e.claimed&&(0,a.jsx)(p,{variant:"secondary",size:"sm",onClick:()=>{x(e.result),u(!0)},children:"Claim"}),e.result.isReward&&e.claimed&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 bg-green-800/30 text-green-400 rounded",children:"Claimed"})]},t))}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 text-gray-400",children:[(0,a.jsx)(A,{size:48,className:"mb-3 opacity-50"}),(0,a.jsx)("p",{children:"No spins yet. Start spinning to see your history!"})]})})]})})]})]}),(0,a.jsx)(y,{isOpen:h,onCloseAction:L,title:m?.isReward?"Congratulations! \uD83C\uDF89":"Better Luck Next Time",className:"max-w-md",children:(0,a.jsxs)("div",{className:"p-6 flex flex-col items-center text-center",children:[m?.isReward?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-[#1e3a5f] flex items-center justify-center mb-4",children:(0,a.jsx)(k,{size:48,className:"text-[#007acc]"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"You Won!"}),(0,a.jsxs)("p",{className:"mb-4 text-gray-300",children:["You've won a ",m.text," ",m.rewardValue&&`(${m.rewardValue})`,"!"]}),(0,a.jsx)(p,{onClick:U,className:"mt-2 w-full",children:"Claim Your Prize"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-[#2d2d2d] flex items-center justify-center mb-4",children:(0,a.jsx)(M,{size:48,className:"text-gray-400"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"No Prize This Time"}),(0,a.jsxs)("p",{className:"mb-4 text-gray-300",children:["Don't give up! You still have ",f," spins left."]}),(0,a.jsx)(p,{onClick:L,className:"mt-2 w-full",children:"Try Again"})]}),0===f&&!m?.isReward&&(0,a.jsx)("p",{className:"mt-4 text-yellow-500",children:"You've used all your spins. Come back tomorrow for more chances!"})]})})]})}},6567:(e,t,r)=>{"use strict";r.d(t,{Lx:()=>n,PU:()=>l,RJ:()=>i,an:()=>a,r3:()=>s,vh:()=>o});var a=function(e){return e.Event="Event",e.Region="Region",e.Province="Province",e.Reward="Reward",e.RewardEvent="RewardEvent",e.GoldenHour="GoldenHour",e.SpinHistory="SpinHistory",e.AuditLog="AuditLog",e.Statistics="Statistics",e.User="User",e.Role="Role",e.Permission="Permission",e.Configuration="Configuration",e.BlacklistedToken="BlacklistedToken",e.EventLocation="EventLocation",e.Participant="Participant",e.ParticipantEvent="ParticipantEvent",e.JobImportHistory="JobImportHistory",e.JobImportHistoryDetail="JobImportHistoryDetail",e.RewardDistribute="RewardDistribute",e.DailyRewardDistribution="DailyRewardDistribution",e}({}),n=function(e){return e.SUCCESS="SUCCESS",e.NO_DATA="NO_DATA",e.ERROR="ERROR",e.INVALID_REQUEST="INVALID_REQUEST",e.ACCESS_DENIED="ACCESS_DENIED",e}({}),s=function(e){return e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING",e.NONE="NONE",e.UNSORTABLE="UNSORTABLE",e}({}),i=function(e){return e.EQUALS="EQUALS",e.NOT_EQUALS="NOT_EQUALS",e.LESS_THAN="LESS_THAN",e.LESS_THAN_OR_EQUALS="LESS_THAN_OR_EQUALS",e.GREATER_THAN="GREATER_THAN",e.GREATER_THAN_OR_EQUALS="GREATER_THAN_OR_EQUALS",e.BETWEEN="BETWEEN",e.IN="IN",e.NOT_IN="NOT_IN",e.CONTAINS="CONTAINS",e.STARTS_WITH="STARTS_WITH",e.ENDS_WITH="ENDS_WITH",e}({}),l=function(e){return e.STRING="STRING",e.NUMBER="NUMBER",e.BOOLEAN="BOOLEAN",e.DATE="DATE",e.DATETIME="DATETIME",e.TIME="TIME",e.OBJECT="OBJECT",e}({}),o=function(e){return e.ADD="ADD",e.UPDATE="UPDATE",e.DELETE="DELETE",e.VIEW="VIEW",e.EXPORT="EXPORT",e.IMPORT="IMPORT",e}({})},7e3:(e,t,r)=>{"use strict";r.d(t,{BB:()=>l,DJ:()=>s,Ob:()=>o,RT:()=>i,he:()=>n});var a=r(6567);function n(e,t,r,s=r.length,i=0,l=10){let o={};return r.length>0&&Object.keys(r[0].data).forEach(t=>{let n={objectType:e,fieldName:t,fieldType:function(e){if(null==e)return a.PU.STRING;switch(typeof e){case"number":return a.PU.NUMBER;case"boolean":return a.PU.BOOLEAN;case"string":if(!isNaN(Date.parse(e))&&e.includes("-"))return a.PU.DATE;return a.PU.STRING;case"object":if(e instanceof Date)return a.PU.DATE;return a.PU.OBJECT;default:return a.PU.STRING}}(r[0].data[t]),sortType:a.r3.NONE};o[t]=n}),{status:a.Lx.SUCCESS,message:"Success",originalRequest:{page:i,size:l,sorts:[],filters:[],search:{},objectType:e},key:{keys:["id"]},totalPage:Math.ceil(s/l),currentPage:i,pageSize:l,totalElements:s,tableName:t,fieldNameMap:o,rows:r,relatedLinkedObjects:{},statistics:{charts:{}},first:0===i,last:i>=Math.ceil(s/l)-1,empty:0===r.length,numberOfElements:r.length}}function s(){let e=new Date,t=new Date;return t.setFullYear(e.getFullYear()-1),new Date(t.getTime()+Math.random()*(e.getTime()-t.getTime())).toISOString().split("T")[0]}function i(){let e=new Date,t=new Date;t.setMonth(e.getMonth()-Math.floor(6*Math.random()));let r=new Date;return r.setMonth(e.getMonth()+1+Math.floor(12*Math.random())),[t.toISOString().split("T")[0],r.toISOString().split("T")[0]]}function l(e){return e[Math.floor(Math.random()*e.length)]}function o(e=.5){return Math.random()<e}},7917:(e,t,r)=>{"use strict";r.d(t,{B:()=>o});var a=r(6567),n=r(7e3);let s=["WIN","LOSE","INVALID","ERROR"],i=["MOBILE","DESKTOP","TABLET","KIOSK"],l=Array(50).fill(null).map((e,t)=>{let r=Math.floor(20*Math.random())+1,a=Math.floor(5*Math.random())+1,l=Math.random()>.3?Math.floor(25*Math.random())+1:null,o=l?"WIN":s[Math.floor(Math.random()*s.length)],d=(0,n.DJ)(),c=`${Math.floor(24*Math.random()).toString().padStart(2,"0")}:${Math.floor(60*Math.random()).toString().padStart(2,"0")}`;return{data:{id:t+1,participantId:r,eventId:a,rewardId:l,outcome:o,spinDate:d,spinTime:c,deviceType:i[Math.floor(Math.random()*i.length)],ipAddress:`${Math.floor(256*Math.random())}.${Math.floor(256*Math.random())}.${Math.floor(256*Math.random())}.${Math.floor(256*Math.random())}`,claimed:"WIN"===o&&Math.random()>.5,claimedDate:"WIN"===o&&Math.random()>.5?(0,n.DJ)():null,goldenHourId:Math.random()>.7?Math.floor(15*Math.random())+1:null,createdAt:d+"T"+c}}}),o=(0,n.he)(a.an.SpinHistory,"spin_history",l,100),d=new Set;o.rows.forEach(e=>{let t=e.data.eventId,r=e.data.participantId,n=e.data.rewardId,s=e.data.goldenHourId;t&&!d.has(`event_${t}`)&&(o.relatedLinkedObjects[`event_${t}`]={id:t,name:`Event ${t}`,objectType:a.an.Event,description:"Parent event",key:{keys:["id"]}},d.add(`event_${t}`)),r&&!d.has(`participant_${r}`)&&(o.relatedLinkedObjects[`participant_${r}`]={id:r,name:`Participant ${r}`,objectType:a.an.Participant,description:"Participant who spun",key:{keys:["id"]}},d.add(`participant_${r}`)),n&&!d.has(`reward_${n}`)&&(o.relatedLinkedObjects[`reward_${n}`]={id:n,name:`Reward ${n}`,objectType:a.an.Reward,description:"Won reward",key:{keys:["id"]}},d.add(`reward_${n}`)),s&&!d.has(`goldenHour_${s}`)&&(o.relatedLinkedObjects[`goldenHour_${s}`]={id:s,name:`Golden Hour ${s}`,objectType:a.an.GoldenHour,description:"Golden hour when spin occurred",key:{keys:["id"]}},d.add(`goldenHour_${s}`))})},8969:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tranhoang/external-app/lucky-draw-migrate/fe-v3/app/wheel/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tranhoang/external-app/lucky-draw-migrate/fe-v3/app/wheel/page.tsx","default")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9468:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=r(5239),n=r(8088),s=r(8170),i=r.n(s),l=r(893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d={children:["",{children:["wheel",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8969)),"/Users/tranhoang/external-app/lucky-draw-migrate/fe-v3/app/wheel/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,5405))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,8014)),"/Users/tranhoang/external-app/lucky-draw-migrate/fe-v3/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,5405))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/tranhoang/external-app/lucky-draw-migrate/fe-v3/app/wheel/page.tsx"],h={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/wheel/page",pathname:"/wheel",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,991,658,972,504],()=>r(9468));module.exports=a})();