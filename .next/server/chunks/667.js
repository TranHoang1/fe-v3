"use strict";exports.id=667,exports.ids=[667],exports.modules={667:(e,t,a)=>{a.d(t,{A:()=>tr});var r=a(687),i=a(3210),n=a(6189),o=a(4993),s=a(7678),l=a(6567);function d(e){let t={id:{objectType:e,fieldName:"ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},version:{objectType:e,fieldName:"Version",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},createdBy:{objectType:e,fieldName:"Created By",fieldType:l.PU.STRING,sortType:l.r3.NONE},createdDate:{objectType:e,fieldName:"Created Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},lastModifiedBy:{objectType:e,fieldName:"Last Modified By",fieldType:l.PU.STRING,sortType:l.r3.NONE},lastModifiedDate:{objectType:e,fieldName:"Last Modified Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},status:{objectType:e,fieldName:"Status",fieldType:l.PU.STRING,sortType:l.r3.NONE}};return({[l.an.JobImportHistory]:{...t,name:{objectType:l.an.JobImportHistoryDetail,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},description:{objectType:l.an.JobImportHistoryDetail,fieldName:"Description",fieldType:l.PU.STRING,sortType:l.r3.NONE},startDate:{objectType:l.an.JobImportHistoryDetail,fieldName:"Start Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},endDate:{objectType:l.an.JobImportHistoryDetail,fieldName:"End Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},location:{objectType:l.an.JobImportHistoryDetail,fieldName:"Location",fieldType:l.PU.STRING,sortType:l.r3.NONE},maxParticipants:{objectType:l.an.JobImportHistoryDetail,fieldName:"Max Participants",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},currentParticipants:{objectType:l.an.JobImportHistoryDetail,fieldName:"Current Participants",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}},[l.an.JobImportHistoryDetail]:{...t,importFile:{objectType:l.an.JobImportHistoryDetail,fieldName:"Import File",fieldType:l.PU.STRING,sortType:l.r3.NONE},importStatus:{objectType:l.an.JobImportHistoryDetail,fieldName:"Import Status",fieldType:l.PU.STRING,sortType:l.r3.NONE},totalRecords:{objectType:l.an.JobImportHistoryDetail,fieldName:"Total Records",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},successRecords:{objectType:l.an.JobImportHistoryDetail,fieldName:"Success Records",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},failedRecords:{objectType:l.an.JobImportHistoryDetail,fieldName:"Failed Records",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},jobImportHistoryId:{objectType:l.an.JobImportHistoryDetail,fieldName:"Job Import History ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}},[l.an.Event]:{...t,name:{objectType:l.an.Event,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},description:{objectType:l.an.Event,fieldName:"Description",fieldType:l.PU.STRING,sortType:l.r3.NONE},startDate:{objectType:l.an.Event,fieldName:"Start Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},endDate:{objectType:l.an.Event,fieldName:"End Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},location:{objectType:l.an.Event,fieldName:"Location",fieldType:l.PU.STRING,sortType:l.r3.NONE},maxParticipants:{objectType:l.an.Event,fieldName:"Max Participants",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},currentParticipants:{objectType:l.an.Event,fieldName:"Current Participants",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}},[l.an.Participant]:{...t,name:{objectType:l.an.Participant,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},email:{objectType:l.an.Participant,fieldName:"Email",fieldType:l.PU.STRING,sortType:l.r3.NONE},phone:{objectType:l.an.Participant,fieldName:"Phone",fieldType:l.PU.STRING,sortType:l.r3.NONE},joinDate:{objectType:l.an.Participant,fieldName:"Join Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},points:{objectType:l.an.Participant,fieldName:"Points",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},eventId:{objectType:l.an.Participant,fieldName:"Event ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}},[l.an.Reward]:{...t,name:{objectType:l.an.Reward,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},description:{objectType:l.an.Reward,fieldName:"Description",fieldType:l.PU.STRING,sortType:l.r3.NONE},points:{objectType:l.an.Reward,fieldName:"Points",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},quantity:{objectType:l.an.Reward,fieldName:"Quantity",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},eventId:{objectType:l.an.Reward,fieldName:"Event ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},redeemCount:{objectType:l.an.Reward,fieldName:"Redeem Count",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}},[l.an.RewardEvent]:{...t,rewardId:{objectType:l.an.RewardEvent,fieldName:"Reward ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},eventId:{objectType:l.an.RewardEvent,fieldName:"Event ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},quantity:{objectType:l.an.RewardEvent,fieldName:"Quantity",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},status:{objectType:l.an.RewardEvent,fieldName:"Status",fieldType:l.PU.STRING,sortType:l.r3.NONE}},[l.an.Region]:{...t,name:{objectType:l.an.Region,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},code:{objectType:l.an.Region,fieldName:"Code",fieldType:l.PU.STRING,sortType:l.r3.NONE},description:{objectType:l.an.Region,fieldName:"Description",fieldType:l.PU.STRING,sortType:l.r3.NONE}},[l.an.Province]:{...t,name:{objectType:l.an.Province,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},code:{objectType:l.an.Province,fieldName:"Code",fieldType:l.PU.STRING,sortType:l.r3.NONE},regionId:{objectType:l.an.Province,fieldName:"Region ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}},[l.an.GoldenHour]:{...t,name:{objectType:l.an.GoldenHour,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},startTime:{objectType:l.an.GoldenHour,fieldName:"Start Time",fieldType:l.PU.STRING,sortType:l.r3.NONE},endTime:{objectType:l.an.GoldenHour,fieldName:"End Time",fieldType:l.PU.STRING,sortType:l.r3.NONE},multiplier:{objectType:l.an.GoldenHour,fieldName:"Multiplier",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},eventId:{objectType:l.an.GoldenHour,fieldName:"Event ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}},[l.an.User]:{...t,username:{objectType:l.an.User,fieldName:"Username",fieldType:l.PU.STRING,sortType:l.r3.NONE},email:{objectType:l.an.User,fieldName:"Email",fieldType:l.PU.STRING,sortType:l.r3.NONE},fullName:{objectType:l.an.User,fieldName:"Full Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},roleId:{objectType:l.an.User,fieldName:"Role ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},lastLogin:{objectType:l.an.User,fieldName:"Last Login",fieldType:l.PU.DATETIME,sortType:l.r3.NONE}},[l.an.Role]:{...t,name:{objectType:l.an.Role,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},description:{objectType:l.an.Role,fieldName:"Description",fieldType:l.PU.STRING,sortType:l.r3.NONE},permissions:{objectType:l.an.Role,fieldName:"Permissions",fieldType:l.PU.STRING,sortType:l.r3.NONE}},[l.an.AuditLog]:{...t,action:{objectType:l.an.AuditLog,fieldName:"Action",fieldType:l.PU.STRING,sortType:l.r3.NONE},entityType:{objectType:l.an.AuditLog,fieldName:"Entity Type",fieldType:l.PU.STRING,sortType:l.r3.NONE},entityId:{objectType:l.an.AuditLog,fieldName:"Entity ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},userId:{objectType:l.an.AuditLog,fieldName:"User ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},details:{objectType:l.an.AuditLog,fieldName:"Details",fieldType:l.PU.STRING,sortType:l.r3.NONE}},[l.an.SpinHistory]:{...t,participantId:{objectType:l.an.SpinHistory,fieldName:"Participant ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},eventId:{objectType:l.an.SpinHistory,fieldName:"Event ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},rewardId:{objectType:l.an.SpinHistory,fieldName:"Reward ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},spinDate:{objectType:l.an.SpinHistory,fieldName:"Spin Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},pointsUsed:{objectType:l.an.SpinHistory,fieldName:"Points Used",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},result:{objectType:l.an.SpinHistory,fieldName:"Result",fieldType:l.PU.STRING,sortType:l.r3.NONE}},[l.an.Statistics]:{...t,name:{objectType:l.an.Statistics,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},category:{objectType:l.an.Statistics,fieldName:"Category",fieldType:l.PU.STRING,sortType:l.r3.NONE},value:{objectType:l.an.Statistics,fieldName:"Value",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},period:{objectType:l.an.Statistics,fieldName:"Period",fieldType:l.PU.STRING,sortType:l.r3.NONE},date:{objectType:l.an.Statistics,fieldName:"Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE}},[l.an.Permission]:{...t,name:{objectType:l.an.Permission,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},code:{objectType:l.an.Permission,fieldName:"Code",fieldType:l.PU.STRING,sortType:l.r3.NONE},description:{objectType:l.an.Permission,fieldName:"Description",fieldType:l.PU.STRING,sortType:l.r3.NONE},roleId:{objectType:l.an.Permission,fieldName:"Role ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}},[l.an.Configuration]:{...t,key:{objectType:l.an.Configuration,fieldName:"Key",fieldType:l.PU.STRING,sortType:l.r3.NONE},value:{objectType:l.an.Configuration,fieldName:"Value",fieldType:l.PU.STRING,sortType:l.r3.NONE},description:{objectType:l.an.Configuration,fieldName:"Description",fieldType:l.PU.STRING,sortType:l.r3.NONE},type:{objectType:l.an.Configuration,fieldName:"Type",fieldType:l.PU.STRING,sortType:l.r3.NONE}},[l.an.BlacklistedToken]:{...t,token:{objectType:l.an.BlacklistedToken,fieldName:"Token",fieldType:l.PU.STRING,sortType:l.r3.NONE},expiryDate:{objectType:l.an.BlacklistedToken,fieldName:"Expiry Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},reason:{objectType:l.an.BlacklistedToken,fieldName:"Reason",fieldType:l.PU.STRING,sortType:l.r3.NONE},userId:{objectType:l.an.BlacklistedToken,fieldName:"User ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}},[l.an.EventLocation]:{...t,name:{objectType:l.an.EventLocation,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},address:{objectType:l.an.EventLocation,fieldName:"Address",fieldType:l.PU.STRING,sortType:l.r3.NONE},city:{objectType:l.an.EventLocation,fieldName:"City",fieldType:l.PU.STRING,sortType:l.r3.NONE},state:{objectType:l.an.EventLocation,fieldName:"State",fieldType:l.PU.STRING,sortType:l.r3.NONE},country:{objectType:l.an.EventLocation,fieldName:"Country",fieldType:l.PU.STRING,sortType:l.r3.NONE},zipCode:{objectType:l.an.EventLocation,fieldName:"Zip Code",fieldType:l.PU.STRING,sortType:l.r3.NONE},capacity:{objectType:l.an.EventLocation,fieldName:"Capacity",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},eventId:{objectType:l.an.EventLocation,fieldName:"Event ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}},[l.an.ParticipantEvent]:{...t,participantId:{objectType:l.an.ParticipantEvent,fieldName:"Participant ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},eventId:{objectType:l.an.ParticipantEvent,fieldName:"Event ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},joinDate:{objectType:l.an.ParticipantEvent,fieldName:"Join Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},checkInDate:{objectType:l.an.ParticipantEvent,fieldName:"Check-in Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},attendance:{objectType:l.an.ParticipantEvent,fieldName:"Attendance",fieldType:l.PU.BOOLEAN,sortType:l.r3.NONE},notes:{objectType:l.an.ParticipantEvent,fieldName:"Notes",fieldType:l.PU.STRING,sortType:l.r3.NONE}},[l.an.RewardDistribute]:{...t,name:{objectType:l.an.RewardDistribute,fieldName:"Name",fieldType:l.PU.STRING,sortType:l.r3.NONE},description:{objectType:l.an.RewardDistribute,fieldName:"Description",fieldType:l.PU.STRING,sortType:l.r3.NONE},startDate:{objectType:l.an.RewardDistribute,fieldName:"Start Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},endDate:{objectType:l.an.RewardDistribute,fieldName:"End Date",fieldType:l.PU.DATETIME,sortType:l.r3.NONE},totalRewards:{objectType:l.an.RewardDistribute,fieldName:"Total Rewards",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},distributedRewards:{objectType:l.an.RewardDistribute,fieldName:"Distributed Rewards",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},participantId:{objectType:l.an.RewardDistribute,fieldName:"Participant ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}},[l.an.DailyRewardDistribution]:{...t,date:{objectType:l.an.DailyRewardDistribution,fieldName:"Date",fieldType:l.PU.DATE,sortType:l.r3.NONE},amount:{objectType:l.an.DailyRewardDistribution,fieldName:"Amount",fieldType:l.PU.NUMBER,sortType:l.r3.NONE},status:{objectType:l.an.DailyRewardDistribution,fieldName:"Status",fieldType:l.PU.STRING,sortType:l.r3.NONE},rewardDistributeId:{objectType:l.an.DailyRewardDistribution,fieldName:"Reward Distribute ID",fieldType:l.PU.NUMBER,sortType:l.r3.NONE}}})[e]||t}var c=a(7e3);let p=["Summer Giveaway","Winter Promo","Back to School Special","New Year Celebration","Holiday Bonanza","Spring Festival","Lunar New Year","Anniversary Event","Grand Opening","Black Friday Special","Customer Appreciation","VIP Member Event"],m=["ACTIVE","SCHEDULED","COMPLETED","CANCELLED"],u=Array(15).fill(null).map((e,t)=>{let[a,r]=(0,c.RT)(),i=(0,c.Ob)(.7),n=(0,c.BB)(m),o=`${(0,c.BB)(p)} ${new Date().getFullYear()}`;return{data:{id:t+1,name:o,description:`Description for ${o}`,startDate:a,endDate:r,status:n,active:i,participantCount:Math.floor(1e4*Math.random()),winnerCount:Math.floor(1e3*Math.random()),spinCount:Math.floor(15e3*Math.random()),rewardCount:Math.floor(500*Math.random()),createdAt:new Date(Date.now()-1e10*Math.random()).toISOString(),updatedAt:new Date().toISOString()}}}),h=(0,c.he)(l.an.Event,"events",u,u.length);h.relatedLinkedObjects={rewards:{id:1,objectType:l.an.Reward,description:"Rewards for this event",key:{keys:["id"]}},participants:{id:2,objectType:l.an.Participant,description:"Participants in this event",key:{keys:["id"]}},eventLocations:{id:3,objectType:l.an.EventLocation,description:"Locations for this event",key:{keys:["id"]}}},h.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["rewards","participants","eventLocations"])});let y=["North","South","East","West","Central","Northeast","Northwest","Southeast","Southwest","Highlands","Coastal","Delta"].map((e,t)=>({data:{id:t+1,name:e,code:e.substring(0,3).toUpperCase(),description:`${e} region of the country`,active:Math.random()>.2,createdAt:new Date(Date.now()-1e10*Math.random()).toISOString()}})),f=(0,c.he)(l.an.Region,"regions",y,y.length);f.relatedLinkedObjects={provinces:{id:1,objectType:l.an.Province,description:"Provinces in this region",key:{keys:["id"]}}},f.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["provinces"])});let g=[{name:"Hanoi",regionId:1},{name:"Hai Phong",regionId:1},{name:"Bac Ninh",regionId:1},{name:"Ho Chi Minh City",regionId:2},{name:"Vung Tau",regionId:2},{name:"Can Tho",regionId:2},{name:"Hue",regionId:3},{name:"Da Nang",regionId:3},{name:"Quang Nam",regionId:3},{name:"Dien Bien",regionId:4},{name:"Son La",regionId:4},{name:"Lai Chau",regionId:4},{name:"Nghe An",regionId:5},{name:"Ha Tinh",regionId:5},{name:"Thanh Hoa",regionId:5}],b=g.map((e,t)=>({data:{id:t+1,name:e.name,code:e.name.substring(0,3).toUpperCase(),regionId:e.regionId,population:Math.floor(5e6*Math.random())+5e5,area:Math.floor(5e3*Math.random())+500,active:Math.random()>.1,createdAt:new Date(Date.now()-1e10*Math.random()).toISOString()}})),N=(0,c.he)(l.an.Province,"provinces",b,b.length);N.relatedLinkedObjects={eventLocations:{id:1,objectType:l.an.EventLocation,description:"Event locations in this province",key:{keys:["id"]}},participants:{id:2,objectType:l.an.Participant,description:"Participants from this province",key:{keys:["id"]}}},N.rows.forEach((e,t)=>{let a=g[t].regionId;N.relatedLinkedObjects[`region_${a}`]={id:a,name:`Region ${a}`,objectType:l.an.Region,description:"Parent region",key:{keys:["id"]}},"data"in e&&e.data.id&&(e.relatedTables=["eventLocations","participants"])});let T=["CASH","VOUCHER","PRODUCT","SERVICE","DISCOUNT"],E=["Cash Prize","Gift Card","Shopping Voucher","Free Product","Discount Coupon","Free Subscription","Movie Tickets","Restaurant Voucher","Travel Package","Electronics"],x=Array(25).fill(null).map((e,t)=>{let a=(0,c.BB)(T),r=`${(0,c.BB)(E)} - ${a}`,i=10*Math.floor(500*Math.random()),n=Math.floor(100*Math.random())+1,o=Math.floor(5*Math.random())+1;return{data:{id:t+1,name:r,type:a,description:`${r} - ${i} value`,value:i,quantity:n,quantityRemaining:Math.floor(Math.random()*n),imageUrl:`/assets/images/rewards/${a.toLowerCase()}_${Math.floor(5*Math.random())+1}.jpg`,active:Math.random()>.2,createdAt:(0,c.DJ)(),eventId:o}}}),v=(0,c.he)(l.an.Reward,"rewards",x,x.length);v.relatedLinkedObjects={spinHistory:{id:1,objectType:l.an.SpinHistory,description:"Spin history for this reward",key:{keys:["id"]}}},v.rows.forEach(e=>{let t=e.data.eventId;v.relatedLinkedObjects[`event_${t}`]={id:t,name:`Event ${t}`,objectType:l.an.Event,description:"Parent event",key:{keys:["id"]}},"data"in e&&e.data.id&&(e.relatedTables=["spinHistory"])});let j=["08:00-10:00","10:00-12:00","12:00-14:00","14:00-16:00","16:00-18:00","18:00-20:00","20:00-22:00","22:00-00:00"],w=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],I=Array(15).fill(null).map((e,t)=>{let a=Math.floor(5*Math.random())+1,r=(0,c.BB)(j),i=Math.floor(3*Math.random())+2,n=Array.from({length:Math.floor(7*Math.random())+1}).map(()=>(0,c.BB)(w)).filter((e,t,a)=>a.indexOf(e)===t);return{data:{id:t+1,name:`${i}X Rewards - ${r}`,eventId:a,startTime:r.split("-")[0],endTime:r.split("-")[1],multiplier:i,applicableDays:n.join(","),active:Math.random()>.3,description:`${i}X reward multiplier during ${r} on ${n.join(", ")}`,createdAt:new Date(Date.now()-1e10*Math.random()).toISOString()}}}),D=(0,c.he)(l.an.GoldenHour,"golden_hours",I,I.length);D.relatedLinkedObjects={spinHistory:{id:1,objectType:l.an.SpinHistory,description:"Spin history during this golden hour",key:{keys:["id"]}}},D.rows.forEach(e=>{let t=e.data.eventId;D.relatedLinkedObjects[`event_${t}`]={id:t,name:`Event ${t}`,objectType:l.an.Event,description:"Parent event",key:{keys:["id"]}},"data"in e&&e.data.id&&(e.relatedTables=["spinHistory"])});var S=a(7917);let R=["CREATE","UPDATE","DELETE","LOGIN","LOGOUT","ACCESS","EXPORT","IMPORT"],M=["Event","Participant","Reward","User","Role","Configuration","SpinHistory"],A=["SUCCESS","FAILURE","WARNING","ERROR"],C=Array(100).fill(null).map((e,t)=>{let a=R[Math.floor(Math.random()*R.length)],r=M[Math.floor(Math.random()*M.length)],i=Math.floor(100*Math.random())+1,n=Math.floor(10*Math.random())+1,o=A[Math.floor(Math.random()*A.length)],s=(0,c.DJ)(),l=`${Math.floor(24*Math.random()).toString().padStart(2,"0")}:${Math.floor(60*Math.random()).toString().padStart(2,"0")}`;return{data:{id:t+1,timestamp:`${s}T${l}:${Math.floor(60*Math.random()).toString().padStart(2,"0")}.${Math.floor(1e3*Math.random()).toString().padStart(3,"0")}Z`,actionType:a,entityType:r,entityId:i,userId:n,username:`user${n}`,ipAddress:`${Math.floor(256*Math.random())}.${Math.floor(256*Math.random())}.${Math.floor(256*Math.random())}.${Math.floor(256*Math.random())}`,details:`${a} operation on ${r} with ID ${i}`,status:o,requestData:"ACCESS"!==a?JSON.stringify({id:i,someField:"someValue"}):null,responseData:"SUCCESS"!==o?JSON.stringify({error:"Some error message"}):null}}}),O=(0,c.he)(l.an.AuditLog,"audit_log",C,200),P=[{data:{id:1,name:"Overall Statistics",description:"System-wide statistics overview",lastUpdated:new Date().toISOString()}}],U=(0,c.he)(l.an.Statistics,"statistics",P,P.length);U.statistics={charts:{participation:[{chartName:"Daily Participation",chartType:"line",chartData:{labels:Array.from({length:30}).map((e,t)=>{let a=new Date;return a.setDate(a.getDate()-29+t),a.toISOString().split("T")[0]}),values:Array.from({length:30}).map(()=>String(Math.floor(1e3*Math.random())+100))}},{chartName:"Participation by Region",chartType:"pie",chartData:{labels:["North","South","East","West","Central"],values:Array.from({length:5}).map(()=>String(Math.floor(1e4*Math.random())+1e3))}}],rewards:[{chartName:"Reward Distribution",chartType:"pie",chartData:{labels:["Cash","Voucher","Product","Service","Discount"],values:Array.from({length:5}).map(()=>String(Math.floor(500*Math.random())+50))}},{chartName:"Claims Over Time",chartType:"bar",chartData:{labels:Array.from({length:12}).map((e,t)=>{let a=new Date;return a.setMonth(a.getMonth()-11+t),a.toLocaleDateString("en-US",{month:"short",year:"numeric"})}),values:Array.from({length:12}).map(()=>String(Math.floor(200*Math.random())+20))}}],events:[{chartName:"Event Performance",chartType:"bar",chartData:{labels:["Summer Giveaway","Winter Promo","Back to School","New Year"],values:Array.from({length:4}).map(()=>String(Math.floor(5e3*Math.random())+1e3))}}]}};let k=["John","Jane","Robert","Sarah","Michael","Emily","David","Laura"],L=["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson"],$=["ACTIVE","INACTIVE","LOCKED","PENDING"],B=Array(10).fill(null).map((e,t)=>{let a=t+1,r=k[Math.floor(Math.random()*k.length)],i=L[Math.floor(Math.random()*L.length)],n=`${r.toLowerCase()}${i.toLowerCase()}${a}`,o=`${n}@example.com`;return{data:{id:a,username:n,firstName:r,lastName:i,email:o,phone:`+84${Math.floor(1e9*Math.random())}`,status:$[Math.floor(Math.random()*$.length)],lastLogin:Math.random()>.3?(0,c.DJ)()+"T"+`${Math.floor(24*Math.random()).toString().padStart(2,"0")}:${Math.floor(60*Math.random()).toString().padStart(2,"0")}:${Math.floor(60*Math.random()).toString().padStart(2,"0")}Z`:null,createdAt:(0,c.DJ)(),createdBy:"system",updatedAt:(0,c.DJ)(),updatedBy:"system",roleIds:Array.from({length:Math.floor(3*Math.random())+1}).map(()=>Math.floor(5*Math.random())+1).filter((e,t,a)=>a.indexOf(e)===t)}}}),G=(0,c.he)(l.an.User,"users",B,B.length);G.relatedLinkedObjects={roles:{id:1,objectType:l.an.Role,description:"User roles",key:{keys:["id"]}},auditLog:{id:2,objectType:l.an.AuditLog,description:"User audit log",key:{keys:["id"]}}},G.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["roles","auditLog"])});let H=[{name:"ADMIN",description:"Administrator with full access"},{name:"EVENT_MANAGER",description:"Can manage events and rewards"},{name:"PARTICIPANT_MANAGER",description:"Can manage participants"},{name:"REPORT_VIEWER",description:"Can view reports and statistics"},{name:"USER",description:"Regular user with limited access"}].map((e,t)=>({data:{id:t+1,name:e.name,description:e.description,active:!0,createdAt:new Date(Date.now()-1e10*Math.random()).toISOString(),createdBy:"system",updatedAt:new Date().toISOString(),updatedBy:"system"}})),_=(0,c.he)(l.an.Role,"roles",H,H.length);_.relatedLinkedObjects={users:{id:1,objectType:l.an.User,description:"Users with this role",key:{keys:["id"]}},permissions:{id:2,objectType:l.an.Permission,description:"Permissions for this role",key:{keys:["id"]}}},_.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["users","permissions"])});let F=[{name:"VIEW_EVENTS",description:"View events"},{name:"CREATE_EVENT",description:"Create a new event"},{name:"EDIT_EVENT",description:"Edit existing events"},{name:"DELETE_EVENT",description:"Delete events"},{name:"VIEW_PARTICIPANTS",description:"View participants"},{name:"CREATE_PARTICIPANT",description:"Create participants"},{name:"EDIT_PARTICIPANT",description:"Edit participants"},{name:"DELETE_PARTICIPANT",description:"Delete participants"},{name:"VIEW_REWARDS",description:"View rewards"},{name:"CREATE_REWARD",description:"Create rewards"},{name:"EDIT_REWARD",description:"Edit rewards"},{name:"DELETE_REWARD",description:"Delete rewards"},{name:"VIEW_REPORTS",description:"View reports"},{name:"EXPORT_DATA",description:"Export data"},{name:"MANAGE_USERS",description:"Manage users"},{name:"MANAGE_ROLES",description:"Manage roles"},{name:"ACCESS_ADMIN",description:"Access admin area"},{name:"ACCESS_API",description:"Access API"}].map((e,t)=>({data:{id:t+1,name:e.name,description:e.description,active:!0,category:e.name.split("_")[0],action:e.name.split("_")[1],createdAt:new Date(Date.now()-1e10*Math.random()).toISOString()}})),J=(0,c.he)(l.an.Permission,"permissions",F,F.length);J.relatedLinkedObjects={roles:{id:1,objectType:l.an.Role,description:"Roles with this permission",key:{keys:["id"]}}},J.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["roles"])});let V=[{name:"DEFAULT_EVENT_DURATION_DAYS",value:"30",description:"Default event duration in days"},{name:"MAX_DAILY_SPINS",value:"3",description:"Maximum spins allowed per day per participant"},{name:"LOGIN_ATTEMPTS_BEFORE_LOCKOUT",value:"5",description:"Number of failed login attempts before account is locked"},{name:"PASSWORD_EXPIRY_DAYS",value:"90",description:"Number of days before password expires"},{name:"SESSION_TIMEOUT_MINUTES",value:"30",description:"User session timeout in minutes"},{name:"EMAIL_NOTIFICATION_ENABLED",value:"true",description:"Enable email notifications"},{name:"SMS_NOTIFICATION_ENABLED",value:"false",description:"Enable SMS notifications"},{name:"MAINTENANCE_MODE",value:"false",description:"Enable maintenance mode"},{name:"DEFAULT_LANGUAGE",value:"en",description:"Default application language"},{name:"MAX_FILE_UPLOAD_SIZE",value:"5242880",description:"Maximum file upload size in bytes"},{name:"ALLOWED_FILE_TYPES",value:"jpg,jpeg,png,pdf",description:"Allowed file types for upload"},{name:"SYSTEM_EMAIL",value:"system@example.com",description:"System email address"}].map((e,t)=>({data:{id:t+1,name:e.name,value:e.value,description:e.description,dataType:"number"==typeof e.value?"NUMBER":"true"===e.value||"false"===e.value?"BOOLEAN":"STRING",editable:!0,category:e.name.split("_")[0],lastModified:new Date().toISOString(),modifiedBy:"system"}}));(0,c.he)(l.an.Configuration,"configurations",V,V.length);let W=Array(20).fill(null).map((e,t)=>{let a=t+1,r=Math.floor(10*Math.random())+1,i=(0,c.DJ)();return{data:{id:a,token:`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.${Buffer.from(JSON.stringify({userId:r,exp:Date.now()+36e5})).toString("base64")}.signature${a}`,userId:r,username:`user${r}`,blacklistedAt:`${i}T${Math.floor(24*Math.random()).toString().padStart(2,"0")}:${Math.floor(60*Math.random()).toString().padStart(2,"0")}:${Math.floor(60*Math.random()).toString().padStart(2,"0")}Z`,reason:["LOGOUT","PASSWORD_CHANGE","ADMIN_ACTION","SUSPICIOUS_ACTIVITY"][Math.floor(4*Math.random())],expirationDate:new Date(Date.now()+864e5*Math.random()*30).toISOString()}}});(0,c.he)(l.an.BlacklistedToken,"blacklisted_tokens",W,W.length);let z=["STORE","MALL","OFFICE","POPUP","OUTDOOR","ONLINE"],q=Array(30).fill(null).map((e,t)=>{let a=t+1;return{data:{id:a,name:`Location ${a}`,address:`${Math.floor(1e3*Math.random())} Main Street`,city:["Hanoi","Ho Chi Minh City","Da Nang","Hue","Can Tho"][Math.floor(5*Math.random())],provinceId:Math.floor(15*Math.random())+1,eventId:Math.floor(5*Math.random())+1,type:z[Math.floor(Math.random()*z.length)],capacity:Math.floor(500*Math.random())+50,active:Math.random()>.2,startDate:new Date(Date.now()-864e5*Math.random()*30).toISOString().split("T")[0],endDate:new Date(Date.now()+864e5*Math.random()*30).toISOString().split("T")[0],latitude:10*Math.random()+10,longitude:10*Math.random()+105,createdAt:new Date(Date.now()-1e10*Math.random()).toISOString(),updatedAt:new Date().toISOString()}}}),K=(0,c.he)(l.an.EventLocation,"event_locations",q,q.length);K.relatedLinkedObjects={participants:{id:1,objectType:l.an.Participant,description:"Participants at this location",key:{keys:["id"]}}},K.rows.forEach(e=>{let t=e.data.eventId,a=e.data.provinceId;K.relatedLinkedObjects[`event_${t}`]={id:t,name:`Event ${t}`,objectType:l.an.Event,description:"Parent event",key:{keys:["id"]}},K.relatedLinkedObjects[`province_${a}`]={id:a,name:`Province ${a}`,objectType:l.an.Province,description:"Location province",key:{keys:["id"]}},"data"in e&&e.data.id&&(e.relatedTables=["participants"])});let Y=["John","Mary","Robert","Lisa","James","Jennifer","David","Sarah","Michael","Emily"],Q=["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor"],X=Array(50).fill(null).map((e,t)=>{let a=Y[Math.floor(Math.random()*Y.length)],r=Q[Math.floor(Math.random()*Q.length)],i=`${a.toLowerCase()}.${r.toLowerCase()}${Math.floor(100*Math.random())}@example.com`;return{data:{id:t+1,firstName:a,lastName:r,email:i,phone:`+84${Math.floor(1e9*Math.random())}`,gender:["MALE","FEMALE","OTHER"][Math.floor(3*Math.random())],age:Math.floor(60*Math.random())+18,address:`${Math.floor(1e3*Math.random())} ${["Main St","Oak Ave","Maple Rd","Pine Blvd"][Math.floor(4*Math.random())]}`,city:["Hanoi","Ho Chi Minh City","Da Nang","Hue","Can Tho"][Math.floor(5*Math.random())],provinceId:Math.floor(15*Math.random())+1,registrationDate:(0,c.DJ)(),totalSpins:Math.floor(50*Math.random()),winCount:Math.floor(10*Math.random()),active:Math.random()>.1}}}),Z=(0,c.he)(l.an.Participant,"participants",X,100);Z.relatedLinkedObjects={participantEvents:{id:1,objectType:l.an.ParticipantEvent,description:"Events this participant joined",key:{keys:["id"]}},spinHistory:{id:2,objectType:l.an.SpinHistory,description:"Spin history for this participant",key:{keys:["id"]}}},Z.rows.forEach(e=>{let t=e.data.provinceId;Z.relatedLinkedObjects[`province_${t}`]={id:t,name:`Province ${t}`,objectType:l.an.Province,description:"Participant's province",key:{keys:["id"]}},"data"in e&&e.data.id&&(e.relatedTables=["participantEvents","spinHistory"])});let ee=Array(100).fill(null).map((e,t)=>{let a=Math.floor(50*Math.random())+1,r=Math.floor(5*Math.random())+1,i=Math.floor(30*Math.random())+1;return{data:{id:t+1,participantId:a,eventId:r,joinDate:(0,c.DJ)(),locationId:Math.random()>.3?i:null,status:["ACTIVE","INACTIVE","BANNED","COMPLETED"][Math.floor(4*Math.random())],totalSpins:Math.floor(20*Math.random()),lastSpinDate:Math.random()>.6?(0,c.DJ)():null,notes:Math.random()>.8?`Note for participant ${a} in event ${r}`:null,createdAt:(0,c.DJ)()}}}),et=(0,c.he)(l.an.ParticipantEvent,"participant_events",ee,200),ea=new Set;et.rows.forEach(e=>{let t=e.data.participantId,a=e.data.eventId,r=e.data.locationId;t&&!ea.has(`participant_${t}`)&&(et.relatedLinkedObjects[`participant_${t}`]={id:t,name:`Participant ${t}`,objectType:l.an.Participant,description:"Participant",key:{keys:["id"]}},ea.add(`participant_${t}`)),a&&!ea.has(`event_${a}`)&&(et.relatedLinkedObjects[`event_${a}`]={id:a,name:`Event ${a}`,objectType:l.an.Event,description:"Event",key:{keys:["id"]}},ea.add(`event_${a}`)),r&&!ea.has(`location_${r}`)&&(et.relatedLinkedObjects[`location_${r}`]={id:r,name:`Location ${r}`,objectType:l.an.EventLocation,description:"Event location where participant joined",key:{keys:["id"]}},ea.add(`location_${r}`))}),et.relatedLinkedObjects.spinHistory={id:1,objectType:l.an.SpinHistory,description:"Spin history for this participation",key:{keys:["id"]}},et.rows.forEach(e=>{"data"in e&&e.data.id&&(e.relatedTables=["spinHistory"])});let er=localStorage.getItem("token"),ei={baseUrl:process.env.NEXT_PUBLIC_API_BASE_URL||"http://opsched.deltavn.vn:8014/luckydraw/api",useMockData:"true"===process.env.NEXT_PUBLIC_USE_MOCK_DATA,timeout:3e4,headers:{"Content-Type":"application/json",...er?{Authorization:`Bearer ${er}`}:{}}},en={events:h,participants:Z,regions:f,provinces:N,rewards:v,golden_hours:D,audit_log:O,spin_history:S.B,users:G,roles:_};function eo(e){let t=l.an[e.objectType].toLowerCase(),a=en[t];if(!a){let e={participant:"participants",event:"events",reward:"rewards",user:"users",role:"roles",region:"regions",province:"provinces",goldenhour:"golden_hours",auditlog:"audit_log",spinhistory:"spin_history"}[t];e&&(a=en[e])}return a?{...a,currentPage:e.page,pageSize:e.size,originalRequest:e}:function(e){let{objectType:t,page:a,size:r,sorts:i,filters:n,search:o}=e;try{var s,c;let p=function(e,t){let a=[],r=new Date,i=["ACTIVE","INACTIVE","PENDING","COMPLETED"];for(let t=1;t<=100;t++){let n=new Date(r);n.setDate(r.getDate()-Math.floor(30*Math.random()));let o={id:t,version:0,createdBy:`user${Math.floor(5*Math.random())+1}`,createdDate:n.toISOString(),lastModifiedBy:`user${Math.floor(5*Math.random())+1}`,lastModifiedDate:new Date().toISOString(),status:i[Math.floor(Math.random()*i.length)]};switch(e){case l.an.Event:a.push({...o,name:`Event ${t}`,description:`Description for Event ${t}`,startDate:new Date(r.getTime()+864e5*t).toISOString(),endDate:new Date(r.getTime()+864e5*(t+7)).toISOString(),location:`Location ${t}`,maxParticipants:100+10*t,currentParticipants:Math.floor(Math.random()*(100+10*t))});break;case l.an.Participant:a.push({...o,name:`Participant ${t}`,email:`participant${t}@example.com`,phone:`+1${Math.floor(1e9+9e9*Math.random())}`,joinDate:n.toISOString(),points:Math.floor(1e3*Math.random()),eventId:Math.floor(5*Math.random())+1});break;case l.an.Reward:a.push({...o,name:`Reward ${t}`,description:`Description for Reward ${t}`,points:Math.floor(500*Math.random())+50,quantity:Math.floor(100*Math.random()),eventId:Math.floor(5*Math.random())+1,redeemCount:Math.floor(50*Math.random())});break;case l.an.Region:a.push({...o,name:`Region ${t}`,code:`R${t}`,description:`Description for Region ${t}`});break;case l.an.Province:a.push({...o,name:`Province ${t}`,code:`P${t}`,regionId:Math.floor(5*Math.random())+1});break;case l.an.GoldenHour:a.push({...o,name:`Golden Hour ${t}`,startTime:`${Math.floor(24*Math.random())}:00`,endTime:`${Math.floor(24*Math.random())}:00`,multiplier:3*Math.random()+1,eventId:Math.floor(5*Math.random())+1});break;case l.an.User:a.push({...o,username:`user${t}`,email:`user${t}@example.com`,fullName:`User ${t}`,roleId:Math.floor(3*Math.random())+1,lastLogin:new Date(r.getTime()-Math.floor(864e5*Math.random()*7)).toISOString()});break;case l.an.Role:a.push({...o,name:`Role ${t}`,description:`Description for Role ${t}`,permissions:["READ","WRITE","DELETE"].slice(0,Math.floor(3*Math.random())+1).join(",")});break;case l.an.AuditLog:a.push({...o,action:["CREATE","UPDATE","DELETE","LOGIN","LOGOUT"][Math.floor(5*Math.random())],entityType:Object.values(l.an)[Math.floor(Math.random()*Object.values(l.an).length)],entityId:Math.floor(100*Math.random())+1,userId:Math.floor(5*Math.random())+1,details:`User performed action on ${new Date(r.getTime()-Math.floor(864e5*Math.random()*30)).toISOString()}`});break;case l.an.SpinHistory:a.push({...o,participantId:Math.floor(100*Math.random())+1,eventId:Math.floor(5*Math.random())+1,rewardId:Math.floor(20*Math.random())+1,spinDate:new Date(r.getTime()-Math.floor(864e5*Math.random()*30)).toISOString(),pointsUsed:Math.floor(100*Math.random())+10,result:Math.random()>.3?"WIN":"LOSE"});break;default:a.push({...o,name:`Item ${t}`,description:`Generic item ${t} description`})}}return a}(t,100),m=(s=function(e,t,a){if(!t||0===Object.keys(t).length)return e;let r=t[a];if(!r?.data?.data?._search)return e;let i=r.data.data._search.toLowerCase();return e.filter(e=>Object.values(e).some(e=>null!=e&&String(e).toLowerCase().includes(i)))}(p,o,t),c=n&&0!==n.length?s.filter(e=>n.every(t=>{let{field:a,filterType:r,minValue:i,maxValue:n}=t,o=e[a];if(void 0===o)return!0;switch(r){case l.RJ.EQUALS:if("number"==typeof o)return o===Number(i);return o===i;case l.RJ.CONTAINS:return"string"==typeof o&&o.toLowerCase().includes(i.toLowerCase());case l.RJ.STARTS_WITH:return"string"==typeof o&&o.toLowerCase().startsWith(i.toLowerCase());case l.RJ.ENDS_WITH:return"string"==typeof o&&o.toLowerCase().endsWith(i.toLowerCase());case l.RJ.BETWEEN:if("number"==typeof o){let e=""!==i?Number(i):null,t=""!==n?Number(n):null;return(null===e||o>=e)&&(null===t||o<=t)}if(o instanceof Date||"string"==typeof o&&!isNaN(Date.parse(o))){let e=new Date(o).getTime(),t=""!==i?new Date(i).getTime():null,a=""!==n?new Date(n).getTime():null;return(null===t||e>=t)&&(null===a||e<=a)}return!0;default:return!0}})):s,i&&0!==i.length?[...c].sort((e,t)=>{for(let a of i){let{field:r,sortType:i}=a;if(void 0!==e[r]&&void 0!==t[r]){if(e[r]<t[r])return i===l.r3.ASCENDING?-1:1;if(e[r]>t[r])return i===l.r3.ASCENDING?1:-1}}return 0}):c),{items:u,totalItems:h,totalPages:y}=function(e,t,a){let r=e.length,i=Math.ceil(r/a),n=t*a;return{items:e.slice(n,n+a),totalItems:r,totalPages:i}}(m,a,r),f=u.map(e=>({data:e,tableInfo:{key:{keys:[]},status:l.Lx.SUCCESS,message:"",totalPage:y,currentPage:a,pageSize:r,totalElements:h,tableName:t,fieldNameMap:d(t),rows:[],relatedLinkedObjects:{}}}));return{key:{keys:[]},status:l.Lx.SUCCESS,message:"",totalPage:y,currentPage:a,pageSize:r,totalElements:h,tableName:t,rows:f,fieldNameMap:d(t),originalRequest:e,statistics:{charts:{statusDistribution:[{chartName:"Status Distribution",chartType:"pie",chartData:{ACTIVE:[Math.floor(30*Math.random())+20+""],INACTIVE:[Math.floor(20*Math.random())+10+""],PENDING:[Math.floor(15*Math.random())+5+""],COMPLETED:[Math.floor(10*Math.random())+2+""]}}]}},relatedLinkedObjects:{},first:0===a,last:a===y-1,empty:0===f.length,numberOfElements:f.length}}catch(a){return console.error("Error generating mock data:",a),{key:{keys:[]},status:l.Lx.ERROR,message:`Error generating mock data: ${a.message}`,totalPage:0,currentPage:0,pageSize:0,totalElements:0,tableName:t,rows:[],fieldNameMap:{},originalRequest:e,statistics:{charts:{}},relatedLinkedObjects:{},first:!0,last:!0,empty:!0,numberOfElements:0}}}(e)}let es={[l.an.Event]:"events",[l.an.Region]:"regions",[l.an.Province]:"provinces",[l.an.Reward]:"rewards",[l.an.GoldenHour]:"goldenHours",[l.an.Participant]:"participants",[l.an.SpinHistory]:"spinHistories",[l.an.AuditLog]:"auditLogs",[l.an.Statistics]:"statistics",[l.an.User]:"users",[l.an.Role]:"roles",[l.an.Permission]:"permissions",[l.an.Configuration]:"configurations",[l.an.BlacklistedToken]:"blacklistedTokens",[l.an.EventLocation]:"eventLocations",[l.an.ParticipantEvent]:"participantEvents",[l.an.RewardEvent]:"rewardEvents",[l.an.JobImportHistory]:"jobImportHistory",[l.an.JobImportHistoryDetail]:"jobImportHistoryDetail",[l.an.RewardDistribute]:"rewardDistribute",[l.an.DailyRewardDistribution]:"dailyRewardDistribution"};function el(e){let t=ei.baseUrl.endsWith("/")?ei.baseUrl.slice(0,-1):ei.baseUrl,a=e.startsWith("/")?e:`/${e}`;return`${t}${a}`}let ed=new Map;async function ec(e){try{if(void 0===e.objectType)throw console.error("Missing objectType in request:",e),Error("objectType is required in the request");if(ei.useMockData)return eo(e);let t=JSON.stringify({objectType:e.objectType,page:e.page,size:e.size,sorts:e.sorts,filters:e.filters}),a=ed.get(t);if(a){if(Date.now()-a.timestamp<5e3)return console.log(`Using cached response for ${e.objectType}`),a.response||a.promise;ed.delete(t)}console.log("Sending table data request:",e);let r=es[e.objectType];if(!r)throw Error(`No API endpoint mapping found for ObjectType: ${e.objectType}`);let i=`${ei.baseUrl}/table-data/fetch/${r}`,n={...e,entityName:r};console.log(`Fetching data from: ${i}`,n);let o=(async()=>{try{let a=await fetch(i,{method:"POST",headers:{...ei.headers,"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(n),cache:"no-store"});if(!a.ok){let e=await a.text();throw console.error(`API request failed with status ${a.status}:`,e),Error(`API error: ${a.status} ${e?"- "+e:""}`)}let r=await a.json();if(ed.has(t)&&(ed.get(t).response=r),ei.useMockData&&(!r||!r.rows||0===r.rows.length))return console.log(`No data returned from API for ${e.objectType}, using mock data instead.`),eo(e);return r}catch(a){if(ed.delete(t),console.error("Error fetching table data:",a),ei.useMockData)return console.log(`API request failed, using mock data as fallback for ${e.objectType}`),eo(e);throw a}})();return ed.set(t,{timestamp:Date.now(),promise:o}),o}catch(e){throw console.error("Error in fetchTableData:",e),e}}async function ep(e,t,a,r,i){console.log(`Performing ${e} for entity type:`,t,"with data:",a);try{let n={objectType:t,action:e,entityName:t.toString(),data:a};i&&(n.uploadFile=i),r&&r.originalRequest&&r.originalRequest.filters&&(n.filters=r.originalRequest.filters),r&&r.originalRequest&&r.originalRequest.sorts&&(n.sorts=r.originalRequest.sorts),r&&r.originalRequest&&r.originalRequest.search&&(n.search=r.originalRequest.search);let o=el(`table-data/action/${"object"==typeof t&&es[t]?es[t]:`${String(t).toLowerCase()}s`.replace(/\/+$/,"")}`);console.log("Making API call to:",o);let s=await fetch(o,{method:"POST",headers:{...ei.headers},body:JSON.stringify(n)});if(!s.ok){let t=await s.text();return console.error(`Error performing ${e}:`,t),{success:!1,message:`API error: ${s.status} ${t||""}`}}let d=await s.json();if(console.log(`${e} API response:`,d),e===l.vh.EXPORT&&d.data&&d.data.data&&d.data.data.downloadToken){let e=d.data.data.downloadToken,t=d.data.data.fileName||"export.xlsx",a=el(`table-data/download/${t}?token=${e}`),r=document.createElement("a");r.href=a,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}return{success:!0,...d}}catch(t){return console.error(`Error performing ${e}:`,t),{success:!1,message:t instanceof Error?t.message:"Unknown error"}}}async function em(e,t,a){return ep(l.vh.ADD,e,t,a)}async function eu(e,t,a){return ep(l.vh.UPDATE,e,t,a)}async function eh(e,t,a){return ep(l.vh.DELETE,e,t,a)}let ey=async(e,t)=>{try{let a=eb("Export started","Your export is being prepared...","info"),r="string"==typeof e?e.toLowerCase():"object"==typeof e&&es[e]?es[e]:String(e).toLowerCase(),i=r.endsWith("s")?r:`${r}s`,n=el(`table-data/action/${i}`);console.log("Using final API URL:",n);let o={action:"EXPORT",objectType:e,filters:t.originalRequest?.filters||[],sorts:t.originalRequest?.sorts||[],search:t.originalRequest?.search||{}};console.log("Export request payload:",o);let s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok){let e=await s.text();return console.error("Export failed with status:",s.status),console.error("Error response:",e),eN(a,"Export failed",`Server error: ${s.status}`,"error"),!1}let l=await s.json(),d=l.data?.data?.downloadToken,c=l.data?.data?.fileName;if(!d||!c)return console.error("Invalid export response:",l),eN(a,"Export failed","Invalid response from server","error"),!1;{let e=el(`table-data/download/${c}?token=${d}`);return eN(a,"Export in progress","Your file is being prepared...","info"),await ef(e,c,a)}}catch(e){return console.error("Error exporting data:",e),!1}},ef=async(e,t,a,r=30,i=2e3)=>{let n=1;for(;-1===r||n<=r;)try{eN(a,"Export in progress",-1===r?`Waiting for file to be ready... (attempt ${n})`:`Waiting for file to be ready... (attempt ${n}/${r})`,"info"),await new Promise(e=>setTimeout(e,i));let o=await fetch(e,{method:"HEAD"});console.log(`HEAD request status: ${o.status}`);let s={};if(o.headers.forEach((e,t)=>{s[t]=e}),console.log("Response headers:",s),200===o.status||202!==o.status&&o.headers.get("Content-Disposition")){if(await eg(e,t))return eN(a,"Export complete","Your file is ready","success"),!0;return eN(a,"Export failed","Download could not be started","error"),!1}if(202===o.status){let e,t=o.headers.get("Retry-After");t?(e=1e3*parseInt(t,10),console.log(`Server requested retry after ${e}ms`)):e=Math.min(1.5*i,1e4),i=e,n++;continue}return eN(a,"Export failed",`Server returned status ${o.status}`,"error"),!1}catch(e){console.error("Error polling for file:",e),n++}return eN(a,"Export timed out","File took too long to prepare","error"),!1},eg=async(e,t)=>new Promise(a=>{try{console.log(`Attempting to download file from: ${e}`),fetch(e,{method:"GET",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/octet-stream"}}).then(e=>{console.log(`GET request status: ${e.status}`);let t={};e.headers.forEach((e,a)=>{t[a]=e}),console.log("Response headers:",t);let a=e.headers.get("Content-Type"),r=e.headers.get("Content-Disposition"),i=e.headers.get("Content-Length");if(console.log("Content-Type:",a),console.log("Content-Disposition:",r),console.log("Content-Length:",i),!e.ok)throw Error(`HTTP error! Status: ${e.status}`);if(202===e.status)return console.log("File still not ready (202 status)"),null;if(i&&0>=parseInt(i,10))throw console.error("Empty response received"),Error("Server returned empty file");return e.blob()}).then(e=>{if(!e)return void a(!1);if(console.log(`Received blob of type: ${e.type}, size: ${e.size} bytes`),e.size<=0){console.error("Empty blob received"),a(!1);return}let r=window.URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download=t,i.style.display="none",document.body.appendChild(i),i.click(),setTimeout(()=>{window.URL.revokeObjectURL(r),document.body.removeChild(i),a(!0)},100)}).catch(e=>{console.error("Download error:",e),a(!1)})}catch(e){console.error("Error triggering download:",e),a(!1)}}),eb=(e,t,a)=>{let r=`notification-${Date.now()}`,i=document.getElementById("notification-container");i||((i=document.createElement("div")).id="notification-container",i.style.position="fixed",i.style.bottom="20px",i.style.right="20px",i.style.zIndex="9999",document.body.appendChild(i));let n=document.createElement("div");n.id=r,n.className=`notification notification-${a}`,n.style.padding="12px 16px",n.style.margin="8px 0",n.style.borderRadius="4px",n.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)",n.style.backgroundColor="info"===a?"#007acc":"success"===a?"#28a745":"#dc3545",n.style.color="white",n.style.position="relative",n.innerHTML=`
        <div style="font-weight: bold;">${e}</div>
        <div style="font-size: 0.875em;">${t}</div>
    `;let o=document.createElement("button");return o.innerHTML="&times;",o.style.position="absolute",o.style.top="8px",o.style.right="8px",o.style.background="none",o.style.border="none",o.style.color="white",o.style.fontSize="16px",o.style.cursor="pointer",o.onclick=()=>i.removeChild(n),n.appendChild(o),i.appendChild(n),"error"!==a&&setTimeout(()=>{document.getElementById(r)&&i.removeChild(n)},2e4),r},eN=(e,t,a,r)=>{let i=document.getElementById(e);if(!i)return;i.style.backgroundColor="info"===r?"#007acc":"success"===r?"#28a745":"#dc3545",i.innerHTML=`
        <div style="font-weight: bold;">${t}</div>
        <div style="font-size: 0.875em;">${a}</div>
    `;let n=document.createElement("button");n.innerHTML="&times;",n.style.position="absolute",n.style.top="8px",n.style.right="8px",n.style.background="none",n.style.border="none",n.style.color="white",n.style.fontSize="16px",n.style.cursor="pointer",n.onclick=()=>{let e=i.parentElement;e&&e.removeChild(i)},i.appendChild(n),"success"===r&&setTimeout(()=>{if(document.getElementById(e)){let e=i.parentElement;e&&e.removeChild(i)}},5e3)},eT=async function(e,t){try{let a=eb("Import started","Your import result is being prepared...","info"),r=await t.arrayBuffer(),i=new Uint8Array(r),n="";for(let e=0;e<i.length;e++)n+=String.fromCharCode(i[e]);let o=btoa(n),s=String(e).toLowerCase(),l={action:"IMPORT",objectType:e,filters:[],sorts:[],search:{},uploadFile:{fileName:t.name,fileContent:o}},d=el(`/table-data/action/${s}`),c=await fetch(d,{method:"POST",headers:{...ei.headers},body:JSON.stringify(l)});if(!c.ok){let e=await c.text();return console.error("Import failed with status:",c.status),console.error("Error response:",e),eN(a,"Import failed",`Server error: ${c.status}`,"error"),!1}let p=await c.json(),m=p.jobId;if(!m)return console.error("Invalid import response:",p),eN(a,"Import failed","Invalid response from server","error"),!1;{let e=el(`table-data/import-status/${m}`);return eN(a,"Import in progress","Import file is processing...","info"),await eE(e,a)}}catch(e){return console.error("Error importing table data:",e),!1}},eE=async(e,t,a=30,r=2e3)=>{let i=1;for(;-1===a||i<=a;)try{eN(t,"Import in progress",-1===a?`Waiting for process complete... (attempt ${i})`:`Waiting for process complate... (attempt ${i}/${a})`,"info"),await new Promise(e=>setTimeout(e,r));let n=await fetch(e,{method:"GET"}),o=await n.json();if(200!==n.status)return eN(t,"Export failed","Import could not be started","error"),!1;if("PROGRESS"!==o.status)return eN(t,"Import complete","Check in import history is ready","success"),!0;{let e;e=1e3*parseInt("2",10),console.log(`Server requested retry after ${e}ms`),r=e,i++;continue}}catch(e){console.error("Error polling for file:",e),i++}return eN(t,"Import timed out","File took too long to prepare","error"),!1},ex=e=>null==e?"-":"object"==typeof e?e instanceof Date?e.toLocaleString():"string"==typeof e&&e.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(e).toLocaleString():e?.id&&e?.name?e.name:e?.token&&e?.tokenType?`${e.tokenType}: ${e.token.substring(0,10)}...`:"{Object}":"boolean"==typeof e?e?"✓":"✗":String(e),ev=e=>e?Object.entries(e).map(([e,t])=>{let a,i=t.fieldName.charAt(0).toUpperCase()+t.fieldName.slice(1).replace(/([A-Z])/g," $1");"BOOLEAN"===t.fieldType&&(a=e=>!0===e?"✓":!1===e?"✗":"-"),["DATETIME","DATE"].includes(t.fieldType)&&(a=e=>e?new Date(e).toLocaleString():"-"),"status"===e&&(a=e=>(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs ${"ACTIVE"===e?"bg-green-800 text-green-200":"INACTIVE"===e?"bg-red-800 text-red-200":"bg-gray-800 text-gray-200"}`,children:e}));let n="id"===e,o="viewId"===e,s=t.sortType===l.r3.UNSORTABLE&&!o,d=n||"currentServerTime"===e,c=!["id","viewId","version","createdBy","updatedBy","createdDate","lastModifiedDate"].includes(e);return{key:e,header:"viewId"===e?"ID":i,fieldType:t.fieldType,sortable:!!o||!s,filterable:!0,render:a,editable:c&&!1!==t.editable,hidden:d}}).sort((e,t)=>"viewId"===e.key?-1:"viewId"===t.key?1:"status"===e.key?-1:"status"===t.key?1:e.key.localeCompare(t.key)):[],ej=({initialData:e,columns:t,actions:a,entityType:n,fetchData:o,onEdit:s,onDelete:d,onSave:c,onAdd:p,onSearchChange:m,onSortChange:u,onPageChange:h,onFilterChange:y})=>{let f={totalPage:0,currentPage:0,pageSize:10,totalElements:0,tableName:n||"empty",rows:[],status:"NO_DATA",message:"No data available",fieldNameMap:{},originalRequest:{page:0,size:10,sorts:[],filters:[],search:Object.values(l.an).reduce((e,t)=>(e[t]={objectType:t,key:{keys:[]},fieldNameMap:{},description:"",data:{data:{}},order:0},e),{}),objectType:n},statistics:{charts:{}},relatedLinkedObjects:{},first:!0,last:!0,empty:!0,numberOfElements:0},g=e||f,b=(0,i.useRef)(g),[N,T]=(0,i.useState)(g),[E,x]=(0,i.useState)(null),[v,j]=(0,i.useState)(""),[w,I]=(0,i.useState)({}),[D,S]=(0,i.useState)(null),[R,M]=(0,i.useState)({pageIndex:0,pageSize:10,totalItems:g.totalElements,totalPages:Math.max(1,g.totalPage)}),[A,C]=(0,i.useState)(null),[O,P]=(0,i.useState)(!1),[U,k]=(0,i.useState)(null),[L,$]=(0,i.useState)(null),[B,G]=(0,i.useState)("asc"),[H,_]=(0,i.useState)(!1),[F,J]=(0,i.useState)(!1),[V,W]=(0,i.useState)(!1),[z,q]=(0,i.useState)(!1),[K,Y]=(0,i.useState)(null),[Q,X]=(0,i.useState)(null),[Z,ee]=(0,i.useState)(null),[et,ea]=(0,i.useState)(!1),er=(0,i.useRef)(!1),ei=(0,i.useRef)(!1),en=(0,i.useRef)(null),eo=(0,i.useRef)(null),es=(0,i.useRef)(null),el=(0,i.useRef)("asc"),ed=(0,i.useMemo)(()=>(t||(N?.fieldNameMap?ev(N.fieldNameMap):[])).filter(e=>!e.hidden),[t,N?.fieldNameMap]),ep=(0,i.useCallback)(e=>{e.data?.id&&E!==e.data?.id&&x(e.data?.id),C(e.data?.id||null),X(e),s&&s(e)},[E,s]),ef=(0,i.useCallback)(()=>{ee("cancel"),J(!0)},[]),eg=(0,i.useCallback)((e,t)=>{let a=Object.entries(t).reduce((e,[t,a])=>(("id"===t||null!==a&&"object"!=typeof a)&&(e[t]=a),e),{});console.log("Clean data:",a),X({data:a}),ee("save"),requestAnimationFrame(()=>{W(!0)})},[]),eb=(0,i.useCallback)(e=>{Y({data:e}),ee("delete"),q(!0)},[]),eN=(0,i.useMemo)(()=>[{label:"Edit",onClick:e=>{e&&ep(e)},color:"blue",iconLeft:(0,r.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,r.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),showDetail:!0},{label:"Delete",onClick:e=>{e?.data&&eb(e.data)},color:"red",iconLeft:(0,r.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,r.jsx)("path",{d:"M10 11v6"}),(0,r.jsx)("path",{d:"M14 11v6"})]})}],[ep,eb]),eE=(0,i.useMemo)(()=>{let e=(a||[]).filter(e=>!e.isTableAction);return e.length>0?e.concat(eN):eN},[a,eN]),ex=(0,i.useMemo)(()=>(a||[]).filter(e=>e.isTableAction),[a]),ej=(0,i.useMemo)(()=>Object.entries(w).filter(([e,t])=>t.active).map(([e])=>e),[w]),ew=async e=>{try{let t=n&&("string"==typeof n?l.an[n.toUpperCase()]:n),a={...e,objectType:e.objectType||t};if(!a.objectType)return console.error("No objectType provided for request:",a),f;return await ec(a)}catch(e){return console.error(`Error fetching ${n} data:`,e),f}},eI=o||ew,eD=(0,i.useCallback)(async(t={})=>{eo.current&&(clearTimeout(eo.current),eo.current=null);let{pageIndex:a=R.pageIndex,pageSize:r=R.pageSize,sortField:i=es.current||L,sortDirection:o=el.current||B,filters:s=w,searchTerm:d=v,isInitialLoad:c=!1,isForceReload:p=!1,isSortChange:m=!1}=t;if(e&&!p&&!c&&!m||!er.current)return;let u=JSON.stringify({pageIndex:a,pageSize:r,sortField:i,sortDirection:o,filters:s,searchTerm:d});if((u!==en.current||p)&&(!c||!ei.current)){en.current=u,_(!0);try{let e=Object.entries(s).filter(([e,t])=>t.active).map(([e,t])=>{let a,r=String(t.value||""),i=String(t.secondValue||"");switch(t.operator){case"equals":default:a=l.RJ.EQUALS;break;case"contains":a=l.RJ.CONTAINS;break;case"startsWith":a=l.RJ.STARTS_WITH;break;case"endsWith":a=l.RJ.ENDS_WITH;break;case"greaterThan":a=l.RJ.GREATER_THAN;break;case"lessThan":a=l.RJ.LESS_THAN;break;case"between":a=l.RJ.BETWEEN}return{field:e,filterType:a,minValue:r,maxValue:i}}),t={page:a,size:r,sorts:i?[{field:i,sortType:"asc"===o?l.r3.ASCENDING:l.r3.DESCENDING}]:[],filters:e,search:b.current.originalRequest?.search||{},objectType:n};"string"==typeof n?t.entityName=n.toLowerCase():t.entityName=String(n).toLowerCase(),console.log("Sending table data request:",t);let d=await eI(t);b.current=d,T(d),M({pageIndex:d.currentPage,pageSize:d.pageSize,totalItems:d.totalElements,totalPages:Math.max(1,d.totalPage)}),c&&(ei.current=!0)}catch(e){console.error(`Error fetching data for ${n}:`,e)}finally{_(!1)}}},[n,e,R,L,B,w,v,eI]);(0,i.useEffect)(()=>(er.current=!0,e||(eo.current=setTimeout(()=>eD({isInitialLoad:!0}),50)),()=>{er.current=!1,eo.current&&clearTimeout(eo.current)}),[n,e,eD]),(0,i.useEffect)(()=>{if(!e&&ei.current)return eo.current&&clearTimeout(eo.current),eo.current=setTimeout(()=>{es.current=L,el.current=B,eD()},300),()=>{eo.current&&clearTimeout(eo.current)}},[R.pageIndex,R.pageSize,L,B,w,v,eD,e]);let eS=(0,i.useCallback)(()=>{let e={};ed.forEach(t=>e[t.key]=null),k({data:{id:-1,...e}}),P(!0),p&&p()},[ed,p]),eR=(0,i.useCallback)(async e=>{if("cancel"===Z)J(!1),e&&(C(null),P(!1));else if("save"===Z){if(W(!1),e&&Q)try{let e=O||Q.data?.id===void 0||Q.data?.id<0;if(c)await c(null,Q)&&(C(null),P(!1),eD({isForceReload:!0}));else{let t={data:Q.data},a=e?await em(n,t,N):await eu(n,t,N);a.success?(C(null),P(!1),eD({isForceReload:!0})):console.error("Error saving record:",a.message)}}catch(e){console.error("Error during save operation:",e)}}else if("delete"===Z&&(q(!1),e&&K))try{if(d)await d(K);else{let e=await eh(n,K,N);e.success?eD({isForceReload:!0}):console.error("Error deleting record:",e.message)}}catch(e){console.error("Error during delete operation:",e)}},[Z,Q,A,O,eD,c,n,N,K,d]),eM=async()=>{_(!0);try{await ey(n,N)}catch(e){console.error("Export error:",e)}finally{_(!1)}},eA=async(e,t)=>{if(ea(!1),_(!0),e)try{console.log("Import action confirmed"),await eT(n,t)}catch(e){console.error("Import error:",e)}finally{_(!1)}};return{data:N,pagination:R,setPagination:e=>{M(t=>({...t,...e})),eD({pageIndex:e.pageIndex,pageSize:e.pageSize,isSortChange:!0})},activeFilters:w,setActiveFilters:e=>{I(e),eD({filters:e,isSortChange:!0})},openFilterColumn:D,setOpenFilterColumn:S,expandedRowId:E,setExpandedRowId:e=>{null!==A||O||x(E===e?null:e)},editingRowId:A,isAddingNewRow:O,newRowData:U,isLoading:H,searchTerm:v,setSearchTerm:e=>{j(e),m&&m(e),eo.current&&clearTimeout(eo.current),eo.current=setTimeout(()=>eD({searchTerm:e}),500)},sortField:L,sortDirection:B,handleSortClick:e=>{let t=L===e&&"asc"===B?"desc":"asc";es.current=e,el.current=t,$(e),G(t),u&&u(e,t),eo.current&&clearTimeout(eo.current),eD({sortField:e,sortDirection:t,isSortChange:!0})},handleEdit:ep,handleCancelEdit:ef,handleSaveEdit:eg,handleDeleteClick:eb,handleAddNewRow:eS,handleConfirmation:eR,isEditConfirmOpen:F,isSaveConfirmOpen:V,isDeleteConfirmOpen:z,editAction:Z,effectiveColumns:ed,effectiveActions:eE,tableActions:ex,columnsWithActiveFilters:ej,handleExportTable:eM,handleImportTable:e=>{ea(e)},isImportDialogOpen:et,setIsImportDialogOpen:ea,handleImportComplete:()=>{eD({isForceReload:!0})},handleActionImportTable:eA}};var ew=a(1860);let eI=({column:e,filterState:t,onChange:a,onClose:i})=>(0,r.jsxs)("div",{className:"p-2 bg-[#2d2d2d] border border-[#3c3c3c] rounded shadow-lg absolute z-[200] w-64 mt-1",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium",children:["Filter ",e.header]}),(0,r.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-white","aria-label":"Close filter",children:(0,r.jsx)(ew.A,{size:16})})]}),(0,r.jsxs)("select",{className:"mb-2 w-full bg-[#3c3c3c] text-white p-1 rounded",value:t.operator,onChange:e=>a({...t,operator:e.target.value}),children:[(0,r.jsx)("option",{value:"equals",children:"Equals"}),(0,r.jsx)("option",{value:"contains",children:"Contains"}),(0,r.jsx)("option",{value:"startsWith",children:"Starts with"}),(0,r.jsx)("option",{value:"endsWith",children:"Ends with"})]}),(0,r.jsx)("input",{type:"text",className:"w-full bg-[#3c3c3c] text-white p-1 rounded mb-2",value:t.value||"",onChange:e=>a({...t,value:e.target.value}),placeholder:"Enter value..."}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{className:"bg-red-700 text-white px-2 py-1 rounded text-xs",onClick:()=>a({...t,active:!1,value:""}),children:"Clear"}),(0,r.jsx)("button",{className:"bg-[#007acc] text-white px-2 py-1 rounded text-xs",onClick:()=>{a({...t,active:!0}),i()},children:"Apply"})]})]}),eD=({column:e,filterState:t,onChange:a,onClose:i})=>{let n=["DATE","DATETIME","TIME"].includes(e.fieldType),o=n?"TIME"===e.fieldType?"time":"datetime-local":"number";return(0,r.jsxs)("div",{className:"p-2 bg-[#2d2d2d] border border-[#3c3c3c] rounded shadow-lg absolute z-[200] w-64 mt-1",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium",children:["Filter ",e.header]}),(0,r.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-white","aria-label":"Close filter",children:(0,r.jsx)(ew.A,{size:16})})]}),(0,r.jsxs)("select",{className:"mb-2 w-full bg-[#3c3c3c] text-white p-1 rounded",value:t.operator,onChange:e=>a({...t,operator:e.target.value}),children:[(0,r.jsx)("option",{value:"equals",children:"Equals"}),(0,r.jsx)("option",{value:"greaterThan",children:"Greater than"}),(0,r.jsx)("option",{value:"lessThan",children:"Less than"}),(0,r.jsx)("option",{value:"between",children:"Between"})]}),"between"===t.operator?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("input",{type:o,className:"flex-1 bg-[#3c3c3c] text-white p-1 rounded",value:t.value||"",onChange:e=>a({...t,value:e.target.value}),placeholder:"Min value"}),(0,r.jsx)("span",{children:"to"}),(0,r.jsx)("input",{type:o,className:"flex-1 bg-[#3c3c3c] text-white p-1 rounded",value:t.secondValue||"",onChange:e=>a({...t,secondValue:e.target.value}),placeholder:"Max value"})]})}):(0,r.jsx)("input",{type:o,className:"w-full bg-[#3c3c3c] text-white p-1 rounded mb-2",value:t.value||"",onChange:e=>a({...t,value:e.target.value}),placeholder:n?"Select date/time...":"Enter value..."}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{className:"bg-red-700 text-white px-2 py-1 rounded text-xs",onClick:()=>a({...t,active:!1,value:"",secondValue:""}),children:"Clear"}),(0,r.jsx)("button",{className:"bg-[#007acc] text-white px-2 py-1 rounded text-xs",onClick:()=>{a({...t,active:!0}),i()},children:"Apply"})]})]})},eS=({column:e,filterState:t,onChange:a,onClose:i})=>(0,r.jsxs)("div",{className:"p-2 bg-[#2d2d2d] border border-[#3c3c3c] rounded shadow-lg absolute z-[200] w-64 mt-1",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium",children:["Filter ",e.header]}),(0,r.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-white","aria-label":"Close filter",children:(0,r.jsx)(ew.A,{size:16})})]}),(0,r.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:`bool-filter-${e.key}`,checked:!0===t.value,onChange:()=>a({...t,value:!0}),className:"mr-1"}),"True"]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:`bool-filter-${e.key}`,checked:!1===t.value,onChange:()=>a({...t,value:!1}),className:"mr-1"}),"False"]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:`bool-filter-${e.key}`,checked:null===t.value||void 0===t.value,onChange:()=>a({...t,value:null}),className:"mr-1"}),"All"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{className:"bg-red-700 text-white px-2 py-1 rounded text-xs",onClick:()=>a({...t,active:!1,value:null}),children:"Clear"}),(0,r.jsx)("button",{className:"bg-[#007acc] text-white px-2 py-1 rounded text-xs",onClick:()=>{a({...t,active:null!==t.value}),i()},children:"Apply"})]})]}),eR=({column:e,filterState:t,onChange:a,onClose:i})=>"BOOLEAN"===e.fieldType?(0,r.jsx)(eS,{column:e,filterState:t,onChange:a,onClose:i}):["NUMBER","DATE","DATETIME","TIME"].includes(e.fieldType)?(0,r.jsx)(eD,{column:e,filterState:t,onChange:a,onClose:i}):(0,r.jsx)(eI,{column:e,filterState:t,onChange:a,onClose:i});var eM=a(3589),eA=a(5891),eC=a(8492),eO=a(6474);let eP=({columns:e,sortField:t,sortDirection:a,handleSortClick:i,activeFilters:n,openFilterColumn:o,setOpenFilterColumn:s,setActiveFilters:l,showDetailView:d,showDefaultActions:c,handleAddNewRow:p,isAddingNewRow:m,editingRowId:u})=>(0,r.jsx)("thead",{className:"bg-[#2d2d2d] text-white font-medium sticky top-0 z-[10]",children:(0,r.jsxs)("tr",{children:[d&&(0,r.jsx)("th",{className:"w-10 p-3 whitespace-nowrap",scope:"col"}),e.map(e=>(0,r.jsxs)("th",{className:"text-left p-3 relative",scope:"col",style:{width:"viewId"===e.key?"80px":"auto",minWidth:"viewId"===e.key?"80px":"120px"},children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsxs)("button",{className:`flex-grow flex flex-wrap items-center mr-5 ${e.sortable?"cursor-pointer hover:text-[#007acc]":""} ${t===e.key?"text-[#007acc]":""}`,onClick:()=>e.sortable&&i(e.key),disabled:!e.sortable,"aria-sort":t===e.key?"asc"===a?"ascending":"descending":"none","aria-label":`Sort by ${e.header}`,children:[(0,r.jsx)("span",{className:"break-words hyphens-auto pr-1",children:e.header}),t===e.key&&("asc"===a?(0,r.jsx)(eM.A,{className:"h-4 w-4"}):(0,r.jsx)(eA.A,{className:"h-4 w-4"}))]}),e.filterable&&(0,r.jsx)("button",{className:`absolute right-3 top-3 p-1 rounded-full hover:bg-[#3c3c3c] ${n[e.key]?.active?"text-[#007acc]":"text-gray-400"}`,onClick:t=>{t.stopPropagation(),s(o===e.key?null:e.key)},"aria-label":`Filter by ${e.header}`,children:(0,r.jsx)(eC.A,{size:14})})]}),o===e.key&&(0,r.jsx)(eR,{column:e,filterState:n[e.key]||{field:e.key,operator:"BOOLEAN"===e.fieldType||["NUMBER","DATE","DATETIME","TIME"].includes(e.fieldType)?"equals":"contains",value:null,active:!1},onChange:t=>l({...n,[e.key]:t}),onClose:()=>s(null)})]},e.key)),c&&(0,r.jsx)("th",{className:"text-right p-3 whitespace-nowrap",scope:"col",style:{width:"auto",minWidth:"150px"},children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Actions"}),(0,r.jsx)("button",{onClick:p,className:"flex items-center justify-center p-1 bg-green-700 text-white rounded hover:bg-green-800",title:"Add new row",disabled:m||null!==u,"aria-label":"Add new row",children:(0,r.jsx)(eO.A,{size:16})})]})})]})});var eU=a(5673),ek=a(6241);let eL=eU.bL,e$=i.forwardRef(({className:e,...t},a)=>(0,r.jsx)(eU.B8,{ref:a,className:(0,ek.cn)("inline-flex items-center justify-center rounded-md bg-[#252525] p-1 text-white",e),...t}));e$.displayName=eU.B8.displayName;let eB=i.forwardRef(({className:e,...t},a)=>(0,r.jsx)(eU.l9,{ref:a,className:(0,ek.cn)("inline-flex items-center justify-center whitespace-nowrap px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-[#37373d] data-[state=active]:text-white data-[state=active]:shadow-sm",e),...t}));eB.displayName=eU.l9.displayName;let eG=i.forwardRef(({className:e,...t},a)=>(0,r.jsx)(eU.UC,{ref:a,className:(0,ek.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2",e),...t}));eG.displayName=eU.UC.displayName;var eH=a(3125),e_=a(8819),eF=a(3851);let eJ={[l.an.Province]:{region:{relatedEntity:l.an.Region,dropdownKey:"regions",idField:"regionId",displayField:"name",labelField:"Region"}},[l.an.EventLocation]:{region:{relatedEntity:l.an.Region,dropdownKey:"regions",idField:"regionId",displayField:"name",labelField:"Region"},event:{relatedEntity:l.an.Event,dropdownKey:"events",idField:"eventId",displayField:"name",labelField:"Event"}},[l.an.Participant]:{province:{relatedEntity:l.an.Province,dropdownKey:"provinces",idField:"provinceId",displayField:"name",labelField:"Province"}},[l.an.User]:{role:{relatedEntity:l.an.Role,dropdownKey:"roles",idField:"roleId",displayField:"name",labelField:"Role"}},[l.an.Reward]:{},[l.an.GoldenHour]:{},[l.an.Event]:{},[l.an.Region]:{},[l.an.RewardEvent]:{reward:{relatedEntity:l.an.Reward,dropdownKey:"rewards",idField:"rewardId",displayField:"name",labelField:"Reward"},event:{relatedEntity:l.an.Event,dropdownKey:"events",idField:"eventId",displayField:"name",labelField:"Event"}},[l.an.SpinHistory]:{participant:{relatedEntity:l.an.Participant,dropdownKey:"participants",idField:"participantId",displayField:"name",labelField:"Participant"},reward:{relatedEntity:l.an.Reward,dropdownKey:"rewards",idField:"rewardId",displayField:"name",labelField:"Reward"}},[l.an.ParticipantEvent]:{participant:{relatedEntity:l.an.Participant,dropdownKey:"participants",idField:"participantId",displayField:"name",labelField:"Participant"},eventLocation:{relatedEntity:l.an.EventLocation,dropdownKey:"eventLocations",idField:"eventLocationId",displayField:"description",labelField:"Event Location"}},[l.an.Role]:{},[l.an.Permission]:{},[l.an.AuditLog]:{},[l.an.BlacklistedToken]:{},[l.an.Configuration]:{},[l.an.Statistics]:{},[l.an.JobImportHistory]:{},[l.an.JobImportHistoryDetail]:{jobImportHistory:{relatedEntity:l.an.JobImportHistory,dropdownKey:"jobImportHistories",idField:"jobImportHistoryId",displayField:"id",labelField:"Job Import History"}},[l.an.RewardDistribute]:{},[l.an.DailyRewardDistribution]:{}};var eV=a(3002);let eW=({initialImage:e,onImageChange:t,className:a=""})=>{let[n,o]=(0,i.useState)(e||null),[s,l]=(0,i.useState)(!1),d=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),c=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),l(!0)},[]),p=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),l(!1)},[]),m=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),l(!1);let t=e.dataTransfer.files[0];t&&t.type.startsWith("image/")&&u(t)},[]),u=(0,i.useCallback)(e=>{if(!["image/jpeg","image/png","image/gif","image/webp"].includes(e.type))return void alert("Please upload a valid image file (JPEG, PNG, GIF, or WebP)");if(e.size>5242880)return void alert("Image size should be less than 5MB");let a=new FileReader;a.onloadend=()=>{o(a.result)},a.readAsDataURL(e),t(e)},[t]),h=(0,i.useCallback)(e=>{let t=e.target.files?.[0];t&&u(t)},[u]),y=(0,i.useCallback)(()=>{o(null),t(null)},[t]);return(0,r.jsx)("div",{className:`relative bg-[#1e1e1e] rounded-lg border-2 border-dashed 
        ${s?"border-blue-500 bg-[#252525]":"border-[#3c3c3c]"} 
        ${a}`,onDragEnter:c,onDragLeave:p,onDragOver:d,onDrop:m,children:n?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:n,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}),(0,r.jsx)("button",{onClick:y,className:"absolute top-2 right-2 p-1.5 bg-red-500/80 text-white rounded-full hover:bg-red-600 focus:outline-none transition-colors",type:"button",title:"Remove image",children:(0,r.jsx)(ew.A,{size:16})})]}):(0,r.jsxs)("label",{className:"flex flex-col items-center justify-center p-8 cursor-pointer",children:[(0,r.jsx)(eV.A,{className:"w-10 h-10 text-gray-400 mb-3"}),(0,r.jsxs)("span",{className:"text-sm text-gray-400 text-center",children:["Drag and drop an image here",(0,r.jsx)("br",{}),"or click to select"]}),(0,r.jsx)("span",{className:"mt-2 text-xs text-gray-500",children:"Supported formats: JPEG, PNG, GIF, WebP (max 5MB)"}),(0,r.jsx)("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:h})]})})};function ez({label:e,value:t,isEditing:a=!1,onChange:i,className:n=""}){return a?(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("span",{className:"text-gray-400",children:[e,":"]}),(0,r.jsx)(eW,{initialImage:t,onImageChange:i??(()=>{}),className:"w-full aspect-video max-w-md"})]}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("span",{className:"text-gray-400",children:[e,":"]}),t?(0,r.jsx)("img",{src:t,alt:e,className:"w-full max-w-md aspect-video object-cover rounded-lg"}):(0,r.jsx)("span",{className:"text-gray-500",children:"No image"})]})}let eq=({tableRow:e,entityType:t,tableInfo:a,search:n,isEditing:o=!1,isNewRow:s=!1,onCancelEdit:d,onSaveEdit:c,columns:p,excludedStatusOptions:m=[]})=>{let[u,h]=(0,i.useState)("details"),[y,f]=(0,i.useState)({details:!0}),[g,b]=(0,i.useState)({}),[N,T]=(0,i.useState)({}),[E,x]=(0,i.useState)({}),[v,j]=(0,i.useState)({}),[w,I]=(0,i.useState)({}),D=e=>{let t={[l.an.Event]:["eventLocations","rewards"],[l.an.Participant]:["participantEvents","spinHistory","province"],[l.an.Reward]:[],[l.an.EventLocation]:["participants"],[l.an.GoldenHour]:["spinHistory","event"],[l.an.SpinHistory]:["participant","reward","goldenHour"],[l.an.Province]:["participants","eventLocations"],[l.an.Region]:["provinces","eventLocations"],[l.an.User]:["participants","auditLogs","role"],[l.an.Role]:["users","permissions"],[l.an.Permission]:["roles"],[l.an.AuditLog]:["user"],[l.an.ParticipantEvent]:["participant","event"],[l.an.RewardEvent]:["reward","event"],[l.an.Statistics]:[],[l.an.Configuration]:[],[l.an.BlacklistedToken]:["user"],[l.an.JobImportHistory]:["jobImportHistoryDetail"],[l.an.JobImportHistoryDetail]:[],[l.an.RewardDistribute]:["dailyRewardDistribution"],[l.an.DailyRewardDistribution]:[]}[e]||[],a=l.an[e].toLowerCase(),r=a+"s";return t.filter(t=>t!==a&&t!==r&&t!==l.an[e])},S=()=>["ACTIVE","INACTIVE","DELETE"].filter(e=>!m.includes(e)),R=(0,i.useMemo)(()=>(console.log("\uD83D\uDD0D DEBUG: Normalizing tableRow data structure:",e),console.log("\uD83D\uDD0D DEBUG: tableRow type:",typeof e),console.log("\uD83D\uDD0D DEBUG: tableRow keys:",e?Object.keys(e):"no tableRow"),e?.data)?(console.log("\uD83D\uDD0D DEBUG: Found tableRow.data:",e.data),console.log("\uD83D\uDD0D DEBUG: Row data keys:",Object.keys(e.data)),console.log("\uD83D\uDD0D DEBUG: locations field:",e.data.locations),e.data):!e||"object"!=typeof e||"relatedTables"in e||"tableInfo"in e?(console.warn("\uD83D\uDD0D DEBUG: No valid data found in tableRow"),null):(console.log("\uD83D\uDD0D DEBUG: TableRow appears to be direct data object, using as row data"),console.log("\uD83D\uDD0D DEBUG: Direct object keys:",Object.keys(e)),e),[e]);(0,i.useEffect)(()=>{(async()=>{if(!o)return;let e=eJ[t];if(e)for(let[t,a]of Object.entries(e)){let e=a.idField.replace("Id","");if(R?.[e]&&"object"==typeof R[e]&&R[e].id){console.log(`Using existing data for ${a.dropdownKey} from rowData:`,R[e]),I(t=>({...t,[a.dropdownKey]:[R[e]]})),!s&&R[e].id&&j(t=>({...t,[a.idField]:R[e].id}));continue}T(e=>({...e,[`${a.dropdownKey}Dropdown`]:!0}));try{let e={page:0,size:100,sorts:[],filters:[],search:{},objectType:a.relatedEntity,entityName:a.relatedEntity};R?.[a.idField]&&(e.filters=[{field:"id",filterType:l.RJ.EQUALS,minValue:String(R[a.idField]),maxValue:String(R[a.idField])}]);let t=await ec(e);if(console.log(`Loaded ${a.dropdownKey} for dropdown:`,t),t.rows?.length>0){let e=t.rows.map(e=>e.data);if(I(t=>({...t,[a.dropdownKey]:e})),s&&e.length>0&&!v[a.idField]&&!a.isMultiple){let t=e[0].id;j(e=>e[a.idField]!==t?{...e,[a.idField]:t}:e)}else if(!s&&R?.[a.idField]){let t=R[a.idField];if(!e.find(e=>e.id===t)){let r={page:0,size:1,sorts:[],filters:[{field:"id",filterType:l.RJ.EQUALS,minValue:String(t),maxValue:String(t)}],search:{},objectType:a.relatedEntity,entityName:a.relatedEntity},i=await ec(r);if(i.rows?.length>0){let t=i.rows[0].data;I(r=>({...r,[a.dropdownKey]:[...e,t]}))}}}}}catch(e){console.error(`Failed to load ${a.dropdownKey} for dropdown:`,e)}finally{T(e=>({...e,[`${a.dropdownKey}Dropdown`]:!1}))}}})()},[t,R,o,s]),(0,i.useEffect)(()=>{if(o||!R)return;let e=eJ[t];if(e)for(let[t,a]of Object.entries(e)){let e=a.idField.replace("Id","");R[e]&&"object"==typeof R[e]&&void 0!==R[e].id&&(console.log(`Found nested relationship data for ${a.dropdownKey}:`,R[e]),I(t=>({...t,[a.dropdownKey]:[R[e]]})))}},[t,R,o]),(0,i.useEffect)(()=>{o&&R&&j({...R})},[o,R]);let M=(0,i.useMemo)(()=>{if(console.log("\uD83D\uDD0D DEBUG: Getting related tables from tableRow.relatedTables"),console.log("\uD83D\uDD0D DEBUG: tableRow?.relatedTables:",e?.relatedTables),console.log("\uD83D\uDD0D DEBUG: Is array?",Array.isArray(e?.relatedTables)),console.log("\uD83D\uDD0D DEBUG: Is string?","string"==typeof e?.relatedTables),e?.relatedTables){let a;Array.isArray(e.relatedTables)?console.log("\uD83D\uDD0D DEBUG: Found related tables array from tableRow:",a=e.relatedTables):"string"==typeof e.relatedTables?console.log("\uD83D\uDD0D DEBUG: Parsed related tables string from tableRow:",a=e.relatedTables.trim().split(/\s+/).filter(Boolean)):a=[];let r=l.an[t].toLowerCase(),i=r+"s",n=a.filter(e=>e!==r&&e!==i&&e!==l.an[t]);return console.log("\uD83D\uDD0D DEBUG: Filtered related tables:",n),n}let a=D(t);return console.log("\uD83D\uDD0D DEBUG: Auto-determined related tables for",t,":",a),a},[e,t]),A=(0,i.useMemo)(()=>n?Object.keys(n).filter(e=>e!==String(l.an[t.toUpperCase()])):[],[n,t]),C=(0,i.useMemo)(()=>{console.log("\uD83D\uDD0D DEBUG: Building allTabs"),console.log("  searchTabs:",A),console.log("  relatedTables:",M);let e=["details",...A,...M];console.log("  final tabs array:",e);let t=Array.from(new Set(e));return console.log("  unique tabs:",t),t},[A,M]);(0,i.useEffect)(()=>{o&&h("details")},[o]);let O=(e,t)=>{j(a=>({...a,[e]:t}))},P=e=>{if(e in l.an||n&&e in n)return l.an[e];let t={PARTICIPANT:l.an.Participant,EVENT:l.an.Event,REWARD:l.an.Reward,SPIN_HISTORY:l.an.SpinHistory,USER:l.an.User,BLACKLISTED_TOKEN:l.an.BlacklistedToken,EVENT_LOCATION:l.an.EventLocation,PROVINCE:l.an.Province,REGION:l.an.Region,ROLE:l.an.Role,PERMISSION:l.an.Permission,GOLDEN_HOUR:l.an.GoldenHour,AUDIT_LOG:l.an.AuditLog,PARTICIPANT_EVENT:l.an.ParticipantEvent,participants:l.an.Participant,events:l.an.Event,rewards:l.an.Reward,spinHistory:l.an.SpinHistory,users:l.an.User,eventLocations:l.an.EventLocation,provinces:l.an.Province,province:l.an.Province,regions:l.an.Region,region:l.an.Region,roles:l.an.Role,role:l.an.Role,permissions:l.an.Permission,permission:l.an.Permission,goldenHours:l.an.GoldenHour,goldenHour:l.an.GoldenHour,auditLog:l.an.AuditLog,auditLogs:l.an.AuditLog,participantEvents:l.an.ParticipantEvent,event:l.an.Event,participant:l.an.Participant,reward:l.an.Reward,user:l.an.User,jobImportHistoryDetail:l.an.JobImportHistoryDetail,dailyRewardDistribution:l.an.DailyRewardDistribution};return t[e.toUpperCase()]||t[e]};(0,i.useEffect)(()=>{U(u,y,M)},[u,y,M]);let U=async(r,i,o)=>{if(console.log("\uD83D\uDD0D DEBUG: loadRelatedTableData called for tab:",r),console.log("\uD83D\uDD0D DEBUG: relatedTables:",o),console.log("\uD83D\uDD0D DEBUG: loadedTabs:",i),"details"!==r&&!i[r]&&(f(e=>({...e,[r]:!0})),o.includes(r))){let i=P(r);if(console.log("\uD83D\uDD0D DEBUG: objectType for tab",r,":",i),void 0!==i){let o=n||{};o[t]={objectType:t,key:a?.key||"",fieldNameMap:a?.fieldNameMap||{},description:"",data:e},console.log("\uD83D\uDD0D DEBUG: searchContext:",o);let s=String(i);if(N[s])return;T(e=>({...e,[s]:!0})),x(e=>({...e,[s]:null}));try{let e;if(z(t,r)&&R?.id){let a=q(t,r);console.log("\uD83D\uDD0D DEBUG: Using filter for one-to-many relationship. Field:",a,"Value:",R.id),e={page:0,size:20,sorts:[],filters:a?[{field:a,filterType:l.RJ.EQUALS,minValue:String(R.id),maxValue:String(R.id)}]:[],search:{},objectType:i,entityName:i}}else e={page:0,size:20,sorts:[],filters:[],search:o,objectType:i,entityName:i};console.log("\uD83D\uDD0D DEBUG: Making request for",r,":",e);let a=await ec(e);console.log("\uD83D\uDD0D DEBUG: Got response for",r,":",a),b(e=>({...e,[s]:a}))}catch(t){let e=t instanceof Error?t.message:"Failed to load data";console.error("\uD83D\uDD0D DEBUG: Error loading",r,":",t),x(t=>({...t,[s]:e}))}finally{T(e=>({...e,[s]:!1}))}}else console.error("\uD83D\uDD0D DEBUG: Unknown object type for tab:",r),x(e=>({...e,[r]:`Unknown object type for tab: ${r}`}))}},k=async(e,a)=>{let r=K(e,t,R),i=`${a}-single`;if(console.log("\uD83D\uDD0D DEBUG: loadSingleObjectData called"),console.log("\uD83D\uDD0D DEBUG: tabName:",e,"objectType:",a),console.log("\uD83D\uDD0D DEBUG: relationshipValue:",r),!r)return void x(e=>({...e,[i]:"No relationship data available"}));f(e=>({...e,[i]:!0})),T(e=>({...e,[i]:!0})),x(e=>({...e,[i]:null}));try{let e={page:0,size:1,sorts:[],filters:[{field:"id",filterType:l.RJ.EQUALS,minValue:String(r),maxValue:String(r)}],search:{},objectType:a,entityName:a},t=await ec(e);b(e=>({...e,[i]:t}))}catch(t){let e=t instanceof Error?t.message:"Failed to load data";x(t=>({...t,[i]:e}))}finally{T(e=>({...e,[i]:!1}))}},L=e=>e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1").trim(),$=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),B=e=>{if(null==e)return"-";if(e instanceof Date)return e.toLocaleString();if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(e))try{return new Date(e).toLocaleString()}catch(e){}return e}return"boolean"==typeof e?e?"Yes":"No":"object"==typeof e?e.name?e.name:e.id?`ID: ${e.id}`:JSON.stringify(e):String(e)},G=(e,t,a)=>"id"===e||"version"===e||e.includes("createdBy")||e.includes("updatedBy")||e.includes("createdDate")||e.includes("lastModifiedDate")?B(t):"boolean"===a||!0===t||!1===t?(0,r.jsxs)("select",{children:[(0,r.jsx)("option",{value:"",children:"Select"}),(0,r.jsx)("option",{value:"true",children:"Yes"}),(0,r.jsx)("option",{value:"false",children:"No"})]}):"date"===a?(t&&new Date(t).toISOString().split("T")[0],(0,r.jsx)("input",{type:"date",className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:v[e]?new Date(v[e]).toISOString().split("T")[0]:"",onChange:t=>O(e,t.target.value)})):"datetime"===a?(t&&new Date(t).toISOString().slice(0,16),(0,r.jsx)("input",{type:"datetime-local",className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:v[e]?new Date(v[e]).toISOString().slice(0,16):"",onChange:t=>O(e,t.target.value)})):"number"==typeof t?(0,r.jsx)("input",{type:"number",className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:v[e]||"",onChange:t=>O(e,t.target.value?Number(t.target.value):null)}):(0,r.jsx)("input",{type:"text",className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:v[e]||"",onChange:t=>O(e,t.target.value)}),H=(e,a="Details")=>{if(console.log("renderEntityDetails called with data:",e),!e||0===Object.keys(e).length)return o?(0,r.jsxs)("div",{className:"space-y-6 p-4 bg-[#1e1e1e] rounded border border-[#3c3c3c]",children:[(0,r.jsxs)("h2",{className:"text-lg font-medium text-white border-b border-[#3c3c3c] pb-2",children:["Create New ",t," ",(0,r.jsx)("span",{className:"text-[#007acc] ml-2",children:"(Edit Mode)"})]}),H({status:"ACTIVE"},`New ${t}`)]}):(console.warn("No data available for entity details"),(0,r.jsxs)("div",{className:"p-4 text-center text-gray-400",children:["No data available for ",a]}));let i=["relatedTables"];i.push("currentServerTime","id"),o&&s&&i.push("createdBy","updatedBy","lastUpdatedBy","createdDate","lastModifiedDate","updatedDate","createdAt","updatedAt","created","updated");let n=void 0!==e.viewId?{viewId:e.viewId}:{},m=void 0!==e.status?{status:e.status}:{},u={},h={},y={},f={};if(t){let e=eJ[t];e&&Object.entries(e).forEach(([e,t])=>{let a=t.dropdownKey,r=R?.[a]&&"object"==typeof R[a],i=[];if(o&&(i=w[t.dropdownKey]||[],r))if(Array.isArray(R[a])){let e=i.map(e=>e.id),t=R[a].filter(t=>t&&t.id&&!e.includes(t.id));t.length>0&&(i=[...i,...t])}else R[a].id&&(i.find(e=>e.id===R[a].id)||(i=[...i,R[a]]));f[e]={label:t.labelField||L(e),fieldName:t.idField,relationType:t.relatedEntity,relationData:i,isMultiple:t.isMultiple||Array.isArray(R?.[a])}})}let g=p?p.reduce((e,t)=>({...e,[t.key]:t}),{}):null;Object.entries(e).forEach(([e,t])=>{if(!(i.includes(e)||"id"===e||"status"===e||g&&g[e]?.hidden||s&&i.some(t=>e.toLowerCase().includes(t.toLowerCase()))||Object.values(f).some(t=>t.fieldName===e))){if(!s&&("createdBy"===e||"updatedBy"===e||"lastUpdatedBy"===e||"createdDate"===e||"lastModifiedDate"===e||"updatedDate"===e||"createdAt"===e||"updatedAt"===e||e.toLowerCase().includes("created")||e.toLowerCase().includes("updated")||e.toLowerCase().includes("modified"))){"string"==typeof t&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(t),y[e]=t;return}if(null!==t&&"object"==typeof t)if(!(t instanceof Date))return;else u[e]=t;else"string"==typeof t&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(t)?u[e]=t:h[e]=t}});let b=t===l.an.Reward?(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-300 mb-3 border-b border-[#3c3c3c] pb-1",children:"Image"}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(ez,{label:"Reward Image",value:e.media?.id?`${ei.baseUrl}/public/media/file/${e.media.id}`:void 0,isEditing:o,onChange:async e=>{if(e)try{let t=new FormData;t.append("file",e);let a=await fetch(`${ei.baseUrl}/upload/media`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:t});if(!a.ok)throw Error("Failed to upload image");let r=await a.json();O("mediaId",r.data?.id)}catch(e){console.error("Error uploading image:",e)}else O("mediaId",null)}})})]}):null;return(0,r.jsxs)("div",{className:"space-y-6 p-4 bg-[#1e1e1e] rounded border border-[#3c3c3c]",children:[(0,r.jsxs)("h2",{className:"text-lg font-medium text-white border-b border-[#3c3c3c] pb-2",children:[a," ",o&&(0,r.jsx)("span",{className:"text-[#007acc] ml-2",children:"(Edit Mode)"})]}),b,(n.viewId||m.status)&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.viewId&&(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"ID"}),(0,r.jsx)("div",{className:"font-medium",children:n.viewId})]}),m.status&&(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"Status"}),(0,r.jsx)("div",{children:o?(0,r.jsx)("select",{className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:v.status||"",onChange:e=>O("status",e.target.value),children:S().map(e=>(0,r.jsx)("option",{value:e,children:e},e))}):(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs ${"ACTIVE"===m.status?"bg-green-800 text-green-200":"INACTIVE"===m.status?"bg-red-800 text-red-200":"bg-gray-800 text-gray-200"}`,children:m.status})})]})]}),Object.keys(f).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-300 mb-3 border-b border-[#3c3c3c] pb-1",children:"Relationship Information"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(f).map(([t,a])=>(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:a.label}),(0,r.jsx)("div",{className:"font-medium",children:o?N?.regionsDropdown?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(eH.A,{className:"h-4 w-4 text-[#007acc] animate-spin mr-2"}),(0,r.jsx)("span",{children:"Loading..."})]}):(0,r.jsxs)("select",{className:"w-full bg-[#2d2d2d] text-white p-2 rounded border border-[#3c3c3c]",value:v[a.fieldName]||"",onChange:e=>O(a.fieldName,e.target.value?Number(e.target.value):null),children:[(0,r.jsxs)("option",{value:"",children:["Select ",a.label]}),a.relationData.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name||e.code||`ID: ${e.id}`},e.id))]}):(()=>{console.log("check load details");let t=a.fieldName.replace("Id","");if(e[t]&&Array.isArray(e[t])){let a=e[t];if(a.length>0)return a.map(e=>e.name||e.code||`ID: ${e.id}`).join(", ")}if(e[t]&&"object"==typeof e[t]){let a=e[t];if(a&&a.id)return a.name||a.code||`ID: ${a.id}`}if(e[a.relationType.toLowerCase()+"s"]&&Array.isArray(e[a.relationType.toLowerCase()+"s"])){let t=e[a.relationType.toLowerCase()+"s"];if(t.length>0)return t.map(e=>e.name||e.code||`ID: ${e.id}`).join(", ")}let r=e[a.fieldName];if(null!=r){if(a.relationData&&a.relationData.length>0)if(Array.isArray(r)){let e=a.relationData.filter(e=>r.includes(e.id));if(e.length>0)return e.map(e=>e.name||e.code||`ID: ${e.id}`).join(", ")}else{let e=a.relationData.find(e=>e.id===r);if(e)return e.name||e.code||`ID: ${e.id}`}return Array.isArray(r)?r.map(e=>`ID: ${e}`).join(", "):`ID: ${r}`}return"-"})()})]},t))})]}),Object.keys(h).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-300 mb-3 border-b border-[#3c3c3c] pb-1",children:"Basic Information"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(h).filter(([e])=>!g||!g[e]||!o||!1!==g[e].editable).map(([e,t])=>(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:L(e)}),(0,r.jsx)("div",{className:"font-medium overflow-hidden text-ellipsis",children:o?G(e,t,g?.[e]?.fieldType==="BOOLEAN"?"boolean":typeof t):g?.[e]?.fieldType==="BOOLEAN"?(0,r.jsx)("input",{type:"checkbox",disabled:!0,checked:!!t}):B(t)})]},e))})]}),Object.keys(u).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-300 mb-3 border-b border-[#3c3c3c] pb-1",children:"Date & Time Information"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(u).filter(([e])=>!(o&&"currentServerTime"===e||s&&("createdAt"===e||"updatedAt"===e||e.toLowerCase().includes("created")||e.toLowerCase().includes("updated")))&&(!g||!g[e]||!o||!1!==g[e].editable)).map(([e,t])=>(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:L(e)}),(0,r.jsx)("div",{className:"font-medium",children:!o||e.includes("created")||e.includes("updated")||e.includes("modified")?B(t):G(e,t,"datetime")})]},e))})]}),Object.keys(y).length>0&&!s&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-md font-medium text-gray-300 mb-3 border-b border-[#3c3c3c] pb-1",children:"Audit Information"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(y).map(([e,t])=>(0,r.jsxs)("div",{className:"bg-[#252525] p-3 rounded",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:L(e)}),(0,r.jsx)("div",{className:"font-medium",children:B(t)})]},e))})]}),o&&(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 mt-4 border-t border-[#3c3c3c]",children:[(0,r.jsxs)("button",{className:"flex items-center px-4 py-2 bg-[#3c3c3c] text-white rounded hover:bg-[#4c4c4c]",onClick:d,type:"button",children:[(0,r.jsx)(ew.A,{size:16,className:"mr-2"})," ",s?"Cancel Add":"Cancel Edit"]}),(0,r.jsxs)("button",{className:"flex items-center px-4 py-2 bg-[#007acc] text-white rounded hover:bg-[#0069ac]",onClick:()=>c&&c(v),type:"button",children:[(0,r.jsx)(e_.A,{size:16,className:"mr-2"})," ",s?"Create":"Save Changes"]})]})]})},_=e=>{if(console.log(`Rendering search tab for key: ${e}, search:`,n),!n||!n[e])return(0,r.jsxs)("div",{className:"p-4 text-center text-gray-400",children:["No search data available for ",e]});let t=n[e];return(console.log(`Search item for ${e}:`,t),t?.data?.data)?H(t.data.data,`${$(e)} Information`):(0,r.jsxs)("div",{className:"p-4 text-center text-gray-400",children:["No details available for ",$(e)]})},F=e=>{let a=["region","province","event","user","role"],r=l.an[t].toLowerCase(),i=r+"s";return!(a.includes(e)&&D(P(e)).some(e=>e===r||e===i||e===l.an[t]))&&a.includes(e)},J=(e,a)=>{let i=W(e,t),o=K(e,t,R),s=`${a}-single`;if(console.log("\uD83D\uDD0D DEBUG: renderSingleObjectTab called"),console.log("\uD83D\uDD0D DEBUG: tabName:",e),console.log("\uD83D\uDD0D DEBUG: objectType:",a),console.log("\uD83D\uDD0D DEBUG: entityType:",t),console.log("\uD83D\uDD0D DEBUG: relationshipField:",i),console.log("\uD83D\uDD0D DEBUG: relationshipValue:",o),console.log("\uD83D\uDD0D DEBUG: rowData:",R),console.log("\uD83D\uDD0D DEBUG: rowData keys:",R?Object.keys(R):"no rowData"),!i)return console.log("\uD83D\uDD0D DEBUG: No relationship field configured"),(0,r.jsxs)("div",{className:"p-4 text-center text-gray-400",children:[(0,r.jsxs)("p",{children:["No relationship field configured for ",$(e)," in ",t.toLowerCase()]}),(0,r.jsxs)("p",{className:"text-xs mt-2",children:["Debug: relationshipField = ",i]})]});if(!o)return console.log("\uD83D\uDD0D DEBUG: No relationship data found"),(0,r.jsxs)("div",{className:"p-4 text-center text-gray-400",children:[(0,r.jsxs)("p",{children:["No ",$(e)," associated with this ",t.toLowerCase()]}),(0,r.jsxs)("p",{className:"text-xs mt-2",children:["Debug: looking for field '",i,"' in rowData"]}),(0,r.jsxs)("p",{className:"text-xs",children:["Available fields: ",R?Object.keys(R).join(", "):"none"]})]});if(N[s])return(0,r.jsxs)("div",{className:"p-8 flex flex-col items-center justify-center",children:[(0,r.jsx)(eH.A,{className:"h-8 w-8 text-[#007acc] animate-spin mb-2"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["Loading ",$(e)," details..."]})]});if(E[s])return(0,r.jsx)("div",{className:"p-6 text-center",children:(0,r.jsxs)("div",{className:"bg-red-900/20 p-4 rounded-md mb-3",children:[(0,r.jsx)("p",{className:"text-red-400 mb-2",children:E[s]}),(0,r.jsx)("button",{onClick:()=>k(e,a),className:"bg-[#3c3c3c] hover:bg-[#4c4c4c] text-white px-3 py-1 rounded",children:"Retry"})]})});let l=g[s];if(l?.rows?.[0]?.data)if(!F(e))return H(l.rows[0].data,`${$(e)} Details`);else{let e={data:l.rows[0].data,relatedTables:D(a)};return(0,r.jsx)(eq,{tableRow:e,entityType:a,tableInfo:l,search:n,columns:p,excludedStatusOptions:m})}return y[s]?(0,r.jsx)("div",{className:"p-4 text-center text-gray-400",children:(0,r.jsxs)("p",{children:["No ",$(e)," data available"]})}):(k(e,a),(0,r.jsxs)("div",{className:"p-8 flex flex-col items-center justify-center",children:[(0,r.jsx)(eH.A,{className:"h-8 w-8 text-[#007acc] animate-spin mb-2"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["Loading ",$(e)," details..."]})]}))},V=e=>{console.log("\uD83D\uDD0D DEBUG: renderRelatedTableTab called for:",e),console.log("\uD83D\uDD0D DEBUG: entityType:",t);let a=P(e);if(!a)return(0,r.jsxs)("div",{children:["Unknown object type for ",e]});let i=String(a),o=!z(t,e);if(console.log("\uD83D\uDD0D DEBUG: isOneToMany(",t,",",e,") =",z(t,e)),console.log("\uD83D\uDD0D DEBUG: isSingleObject:",o),o)return console.log("\uD83D\uDD0D DEBUG: Rendering single object tab for:",e),J(e,a);if(console.log("\uD83D\uDD0D DEBUG: Rendering table tab for:",e),console.log("\uD83D\uDD0D DEBUG: relatedTableData for",i,":",g[i]),N[i])return(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)(eH.A,{className:"h-6 w-6 animate-spin text-blue-500"}),(0,r.jsxs)("span",{className:"ml-2 text-gray-400",children:["Loading ",$(e),"..."]})]});if(E[i])return(0,r.jsxs)("div",{className:"flex items-center justify-center py-8 text-red-400",children:[(0,r.jsx)(eF.A,{className:"h-6 w-6 mr-2"}),(0,r.jsxs)("span",{children:["Error loading ",$(e),": ",E[i]]})]});let s=g[i];if(!s)return(0,r.jsxs)("div",{className:"text-gray-400 py-4",children:["No ",$(e)," data available"]});if(console.log("\uD83D\uDD0D DEBUG: Table data for",e,":",s),console.log("\uD83D\uDD0D DEBUG: Number of rows:",s.rows?.length||0),!s.rows||0===s.rows.length)return(0,r.jsxs)("div",{className:"text-gray-400 py-4",children:["No ",$(e)," found"]});let l=s.fieldNameMap?Object.entries(s.fieldNameMap).map(([e,t])=>({key:e,header:L(e),fieldType:t.fieldType||"TEXT",editable:!0,hidden:!1,sortable:!0,filterable:!0,render:void 0})):[];return console.log("\uD83D\uDD0D DEBUG: Using columns from related entity:",l),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(e6,{data:s,columns:l,entityType:a,search:n,showDetailView:!0,showSearchBox:!1})})},W=(e,t)=>{let a={province:{[l.an.Participant]:"provinceId"},region:{[l.an.Province]:"regionId",[l.an.EventLocation]:"regionId"},user:{[l.an.AuditLog]:"userId"},role:{[l.an.User]:"roleId"},permission:{[l.an.Role]:"permissionId"},event:{[l.an.ParticipantEvent]:"eventId",[l.an.Reward]:"eventId",[l.an.EventLocation]:"eventId",[l.an.GoldenHour]:"eventId"},participant:{[l.an.ParticipantEvent]:"participantId",[l.an.SpinHistory]:"participantId"},reward:{[l.an.SpinHistory]:"rewardId"},goldenHour:{[l.an.SpinHistory]:"goldenHourId"},auditLog:{}};return a[e]?.[t]||null},z=(e,t)=>{let a={[l.an.Event]:["eventLocations","rewards","participants","goldenHours"],[l.an.Participant]:["participantEvents","spinHistory"],[l.an.Province]:["participants","eventLocations"],[l.an.Region]:["provinces","eventLocations"],[l.an.User]:["participants","auditLogs"],[l.an.Role]:["users"],[l.an.Permission]:["roles"],[l.an.EventLocation]:["participants"],[l.an.Reward]:[],[l.an.GoldenHour]:[],[l.an.SpinHistory]:[],[l.an.ParticipantEvent]:[],[l.an.AuditLog]:[],[l.an.JobImportHistory]:["jobImportHistoryDetail"],[l.an.RewardDistribute]:["dailyRewardDistribution"]};return a[e]?.includes(t)||!1},q=(e,t)=>{let a={eventLocations:{[l.an.Event]:"event.id",[l.an.Reward]:"region.id",[l.an.Region]:"region.id",[l.an.Province]:"region.provinces.id"},rewards:{[l.an.Event]:"rewardEvents.eventLocation.event.id"},participants:{[l.an.EventLocation]:"eventId",[l.an.Province]:"province.id",[l.an.Event]:"participantEvents.eventLocation.event.id"},spinHistory:{[l.an.Participant]:"participantEvent.participant.id",[l.an.Reward]:"reward.d",[l.an.GoldenHour]:"goldenHour.id"},provinces:{[l.an.Region]:"regions.id"},auditLogs:{[l.an.User]:"user.id"},users:{[l.an.Role]:"role.id"},participantEvents:{[l.an.Participant]:"participant.id"},jobImportHistoryDetail:{[l.an.JobImportHistory]:"jobImportHistory.id"},goldenHours:{[l.an.Event]:"eventLocation.event.id"},event:{[l.an.Reward]:"locations.rewardEvents.reward.id"},dailyRewardDistribution:{[l.an.RewardDistribute]:"rewardDistribute.id"}};return a[t]?.[e]||null},K=(e,t,a)=>{let r=W(e,t);if(console.log("\uD83D\uDD0D DEBUG: getRelationshipValue - tabName:",e),console.log("\uD83D\uDD0D DEBUG: getRelationshipValue - entityType:",t),console.log("\uD83D\uDD0D DEBUG: getRelationshipValue - relationshipField:",r),!r||!a)return null;if(console.log("\uD83D\uDD0D DEBUG: Full rowData:",a),void 0!==a[r]&&null!==a[r])return console.log("\uD83D\uDD0D DEBUG: Found direct field value:",a[r]),a[r];let i=r.replace("Id","");if(console.log("\uD83D\uDD0D DEBUG: Trying object field name:",i),void 0!==a[i]&&null!==a[i]){let e=a[i];if(console.log("\uD83D\uDD0D DEBUG: Found nested object:",e),console.log("\uD83D\uDD0D DEBUG: Nested object type:",typeof e),console.log("\uD83D\uDD0D DEBUG: Nested object keys:","object"==typeof e?Object.keys(e):"not an object"),"object"==typeof e&&void 0!==e.id)return console.log("\uD83D\uDD0D DEBUG: Found nested object ID:",e.id),e.id;if("object"!=typeof e)return console.log("\uD83D\uDD0D DEBUG: Found primitive nested value:",e),e}let n=[r,r.toLowerCase(),r.replace("Id","_id"),i+"_id",i,r.replace("Id",""),e+"Id",e.toLowerCase()+"Id",e+"_id"];for(let e of(console.log("\uD83D\uDD0D DEBUG: Trying common field names:",n),n))if(void 0!==a[e]&&null!==a[e]){let t=a[e];if(console.log("\uD83D\uDD0D DEBUG: Found field",e,"with value:",t,"type:",typeof t),"object"==typeof t&&void 0!==t.id)return console.log("\uD83D\uDD0D DEBUG: Found object with ID in field",e,":",t.id),t.id;if("object"!=typeof t)return console.log("\uD83D\uDD0D DEBUG: Found primitive value in field",e,":",t),t}for(let[t,r]of(console.log("\uD83D\uDD0D DEBUG: No relationship value found, tried fields:",n),console.log("\uD83D\uDD0D DEBUG: Available rowData keys:",Object.keys(a)),Object.entries(a)))if(t.toLowerCase().includes(e.toLowerCase())&&"object"==typeof r&&r&&r.id)return console.log("\uD83D\uDD0D DEBUG: Found potential match by name similarity:",t,"with ID:",r.id),r.id;return null};return((0,i.useEffect)(()=>{f({details:!0}),h("details")},[t,e]),R&&0!==Object.keys(R).length)?(0,r.jsxs)(eL,{value:u,onValueChange:h,className:"w-full",children:[(0,r.jsx)(e$,{className:"bg-[#252525] border-b border-[#3c3c3c] w-full flex overflow-x-auto",children:C.map(e=>(0,r.jsx)(eB,{value:e,className:"data-[state=active]:bg-[#2a2d2e] data-[state=active]:shadow-none",disabled:o&&"details"!==e,children:$(e)},e))}),(0,r.jsx)(eG,{value:"details",className:"pt-4",children:H(R,`${t} Details`)}),A.map(e=>(0,r.jsx)(eG,{value:e,className:"pt-4",children:u===e&&_(e)},e)),M.map(e=>(0,r.jsx)(eG,{value:e,className:"pt-4",children:u===e&&V(e)},e))]}):o?(0,r.jsxs)("div",{className:"space-y-6 p-4 bg-[#1e1e1e] rounded border border-[#3c3c3c]",children:[(0,r.jsxs)("h2",{className:"text-lg font-medium text-white border-b border-[#3c3c3c] pb-2",children:["Create New ",t," ",(0,r.jsx)("span",{className:"text-[#007acc] ml-2",children:"(Edit Mode)"})]}),H({status:"ACTIVE"},`New ${t}`)]}):(console.warn("EntityDetailTabs: No rowData available"),(0,r.jsx)("div",{className:"p-4 text-center text-gray-400",children:"No entity data available"}))};var eK=a(4952);let eY=({data:e,columns:t,actions:a,detailView:n,detailViewMode:o,entityType:s,search:l,showDetailView:d,expandedRowId:c,setExpandedRowId:p,editingRowId:m,isAddingNewRow:u,newRowData:h,handleRowClick:y,handleCancelEdit:f,handleSaveEdit:g,isLoading:b,emptyMessage:N,showDefaultActions:T})=>{let E=a=>m===a.data?.id?(0,r.jsx)(eq,{tableRow:a,entityType:s,tableInfo:e,search:l,isEditing:!0,onCancelEdit:f,onSaveEdit:e=>g(a,e),columns:t}):n&&"custom"===o?n(a):(0,r.jsx)(eq,{tableRow:a,entityType:s,tableInfo:e,search:l,isEditing:!1,columns:t});return(0,r.jsxs)("tbody",{className:"divide-y divide-[#3c3c3c]",children:[u&&h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{className:"bg-[#2a2d2e] relative z-[200]",children:[d&&(0,r.jsx)("td",{className:"w-10 p-3",children:(0,r.jsx)(eA.A,{className:"h-4 w-4 text-[#007acc]"})}),t.map(e=>(0,r.jsx)("td",{className:"p-3 break-words",children:e.render?e.render(h.data?.[e.key],h):ex(h.data?.[e.key])},e.key)),T&&(0,r.jsx)("td",{className:"p-3 text-right",children:(0,r.jsx)("div",{className:"flex justify-end space-x-2",children:(0,r.jsxs)("button",{className:"flex items-center text-xs px-2 py-1 rounded bg-red-800 text-red-100",onClick:()=>f(),"aria-label":"Cancel adding new row",children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})}),"Cancel"]})})})]}),(0,r.jsx)("tr",{className:"relative z-[200]",children:(0,r.jsx)("td",{colSpan:t.length+ +!!d+ +!!T,className:"p-0 bg-[#252525] border-t border-[#3c3c3c]",children:(0,r.jsx)("table",{className:"w-full border-collapse",children:(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"p-4 relative",style:{width:"100%",maxWidth:"100%",overflow:"hidden",position:"relative",left:0,tableLayout:"fixed"},children:(0,r.jsx)(eq,{tableRow:h,entityType:s,tableInfo:e,search:l,isEditing:!0,isNewRow:!0,onCancelEdit:f,onSaveEdit:e=>g(h,e),columns:t,excludedStatusOptions:["DELETE"]})})})})})})})]}),b?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:t.length+ +!!d+ +!!T,className:"p-8 text-center",children:(0,r.jsx)("table",{className:"w-full border-collapse",children:(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsxs)("td",{children:[(0,r.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-[#007acc] border-t-transparent rounded-full mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Loading data..."})]})})})})})}):e.rows.length>0?e.rows.map((e,n)=>{let o=e.data?.id,s="object"==typeof o?`row_${n}_${JSON.stringify(o)}`:o?`row_${o}`:`row_${n}`;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)("tr",{className:`${n%2==0?"bg-[#1e1e1e]":"bg-[#252525]"} ${d?"cursor-pointer hover:bg-[#2a2d2e]":""} ${c===e.data?.id?"bg-[#2a2d2e]":""}`,onClick:()=>{null===m&&y(e.data?.id||null)},role:"row",style:{tableLayout:"fixed",width:"100%"},children:[d&&(0,r.jsx)("td",{className:"w-10 p-3",style:{width:"40px",minWidth:"40px",maxWidth:"40px"},children:c===e.data?.id?(0,r.jsx)(eA.A,{className:"h-4 w-4 text-[#007acc]"}):(0,r.jsx)(eK.A,{className:"h-4 w-4 text-gray-400"})}),t.map(t=>{let a="id"===t.key?"80px":"status"===t.key?"120px":"name"===t.key?"200px":"150px";return(0,r.jsx)("td",{className:"p-3 break-words","data-column-key":t.key,style:{width:a,minWidth:a,maxWidth:"description"===t.key?"300px":a},children:t.render?t.render(e.data[t.key],e):ex(e.data[t.key])},t.key)}),T&&(0,r.jsx)("td",{className:"p-3 text-right",style:{width:"150px",minWidth:"150px"},children:(0,r.jsx)("div",{className:"flex justify-end space-x-2",children:a.map(t=>(0,r.jsxs)("button",{className:`flex items-center text-xs px-2 py-1 rounded ${"blue"===t.color?"bg-blue-800 text-blue-100":"red"===t.color?"bg-red-800 text-red-100":"green"===t.color?"bg-green-800 text-green-100":"yellow"===t.color?"bg-yellow-800 text-yellow-100":"bg-[#3c3c3c] text-white"}`,onClick:a=>{a.stopPropagation(),null===m&&!u&&(t.onClick(e),t.showDetail&&"Edit"!==t.label&&y(e.data?.id||null))},disabled:null!==m||u,"aria-label":`${t.label} row ${e.data?.id}`,children:[t.iconLeft,(0,r.jsx)("span",{className:"mx-1",children:t.label}),t.iconRight]},t.label))})})]}),e.data?.id&&(c===e.data.id||m===e.data.id)&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:t.length+ +!!d+ +!!T,children:(0,r.jsx)("div",{className:"bg-[#252525] border-t border-[#3c3c3c] p-4",children:E(e)})})})]},s)}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:t.length+ +!!d+ +!!T,className:"p-8 text-center text-gray-400",children:(0,r.jsx)("table",{className:"w-full border-collapse",children:(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:N})})})})})})]})};var eQ=a(3826),eX=a(7033),eZ=a(6145);let e0=[10,20,30,50,100,500,1e3],e1=({pagination:e,setPagination:t})=>{let{pageIndex:a,pageSize:i,totalItems:n,totalPages:o}=e;return(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 px-2 py-1 border-t border-[#3c3c3c]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:n>0?`Showing ${a*i+1}-${Math.min((a+1)*i,n)} of ${n}`:"No results"}),(0,r.jsx)("select",{value:i,onChange:e=>t({pageSize:Number(e.target.value),pageIndex:0}),className:"bg-[#3c3c3c] text-white text-sm px-2 py-1 rounded","aria-label":"Items per page",children:e0.map(e=>(0,r.jsxs)("option",{value:e,children:[e," per page"]},e))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>t({pageIndex:0}),disabled:0===a,className:`p-1 rounded ${0===a?"text-gray-600":"text-gray-400 hover:bg-[#3c3c3c]"}`,"aria-label":"Go to first page",children:(0,r.jsx)(eQ.A,{size:18})}),(0,r.jsx)("button",{onClick:()=>t({pageIndex:a-1}),disabled:0===a,className:`p-1 rounded ${0===a?"text-gray-600":"text-gray-400 hover:bg-[#3c3c3c]"}`,"aria-label":"Go to previous page",children:(0,r.jsx)(eX.A,{size:18})}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"number",min:1,max:o,value:a+1,onChange:e=>{let a=parseInt(e.target.value)-1;a>=0&&a<o&&t({pageIndex:a})},className:"w-12 bg-[#3c3c3c] text-white text-center py-1 rounded","aria-label":"Current page"}),(0,r.jsxs)("span",{className:"mx-1 text-sm text-gray-400",children:["of ",o]})]}),(0,r.jsx)("button",{onClick:()=>t({pageIndex:a+1}),disabled:a>=o-1,className:`p-1 rounded ${a>=o-1?"text-gray-600":"text-gray-400 hover:bg-[#3c3c3c]"}`,"aria-label":"Go to next page",children:(0,r.jsx)(eK.A,{size:18})}),(0,r.jsx)("button",{onClick:()=>t({pageIndex:o-1}),disabled:a>=o-1,className:`p-1 rounded ${a>=o-1?"text-gray-600":"text-gray-400 hover:bg-[#3c3c3c]"}`,"aria-label":"Go to last page",children:(0,r.jsx)(eZ.A,{size:18})})]})]})};var e3=a(9270);let e2=({showSearchBox:e,searchTerm:t,setSearchTerm:a,columnsWithActiveFilters:i,effectiveColumns:n,activeFilters:o,setActiveFilters:s,filterOptions:l,tableActions:d,addItemButton:c,entityType:p,isLoading:m,handleAddNewRow:u})=>{let h="boolean"==typeof c&&c?{label:`Add ${p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()}`,onClick:u}:c;return(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(e3.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),(0,r.jsx)("input",{type:"text",placeholder:"Search...",className:"pl-9 py-2 pr-4 bg-[#3c3c3c] rounded focus:outline-none focus:ring-1 focus:ring-[#007acc]",value:t,onChange:e=>a(e.target.value),"aria-label":"Search table"})]}),i.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Filters:"}),i.map(e=>{let t=n.find(t=>t.key===e);return t?(0,r.jsxs)("div",{className:"bg-[#3c3c3c] text-white text-xs px-2 py-1 rounded flex items-center gap-1",children:[(0,r.jsx)("span",{children:t.header}),(0,r.jsx)("button",{onClick:()=>s({...o,[e]:{...o[e],active:!1}}),className:"text-gray-400 hover:text-white","aria-label":`Remove filter for ${t.header}`,children:(0,r.jsx)(ew.A,{size:12})})]},e):null}),(0,r.jsx)("button",{onClick:()=>s(Object.keys(o).reduce((e,t)=>({...e,[t]:{...o[t],active:!1}}),{})),className:"text-xs text-[#007acc] hover:underline","aria-label":"Clear all filters",children:"Clear all"})]}),l?.map(e=>(0,r.jsx)("select",{className:"bg-[#3c3c3c] text-white px-3 py-2 rounded focus:outline-none focus:ring-1 focus:ring-[#007acc]",value:o[e.key]?.value||"all",onChange:t=>s({...o,[e.key]:{field:e.key,operator:"equals",value:t.target.value,active:"all"!==t.target.value}}),"aria-label":`Filter by ${e.label}`,children:e.options.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))},e.key))]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[d?.map((e,t)=>(0,r.jsxs)("button",{onClick:()=>e.onClick&&e.onClick(null),className:`px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-1.5 ${e.color?`bg-${e.color}-700 hover:bg-${e.color}-600 text-white`:"bg-blue-700 hover:bg-blue-600 text-white"}`,disabled:m,children:[e.iconLeft&&(0,r.jsx)("span",{children:e.iconLeft}),e.label,e.iconRight&&(0,r.jsx)("span",{children:e.iconRight})]},t)),h&&(0,r.jsxs)("button",{onClick:h.onClick,className:"px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-1.5 bg-blue-700 hover:bg-blue-600 text-white",disabled:m,children:[(0,r.jsx)(eO.A,{className:"h-4 w-4 mr-2"}),h.label]})]})]})},e4=({open:e,handleActionImportTable:t,handleImportTable:a})=>{var i=new File([],"tempFile");return e?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white rounded shadow-lg p-6 min-w-[350px]",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Import Data"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-bold text-gray-500 tracking-wide",children:"Attach file"}),(0,r.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,r.jsxs)("label",{className:"flex flex-col rounded-lg border-4 border-dashed w-full h-60 p-10 group text-center",children:[(0,r.jsxs)("div",{className:"h-full w-full text-center flex flex-col items-center justify-center items-center  ",children:[(0,r.jsx)("div",{className:"flex flex-auto max-h-48 w-2/5 mx-auto -mt-10",children:(0,r.jsx)("img",{className:"has-mask h-36 object-center",src:"https://img.freepik.com/free-vector/image-upload-concept-landing-page_52683-27130.jpg?size=338&ext=jpg",alt:"freepik image"})}),(0,r.jsx)("p",{className:"pointer-none text-gray-500 ",children:(0,r.jsx)("span",{className:"text-sm",children:"Click here to upload"})})]}),(0,r.jsx)("input",{type:"file",className:"hidden",id:"importFile",multiple:!0,onChange:e=>{let t=e.target.files;if(!t||0===t.length)return void console.error("No file selected.");i=t[0]}})]})})]}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:(0,r.jsx)("span",{children:"File type: doc,pdf,types of images"})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>a(!1),children:"Cancel"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>t(!0,i),children:"Import"})]})]})}):null},e5=({isEditConfirmOpen:e,isSaveConfirmOpen:t,isDeleteConfirmOpen:a,handleConfirmation:i,editAction:n})=>{if(!e&&!t&&!a)return null;let o="cancel"===n?"Yes, discard changes":"save"===n?"Yes, save changes":"Yes, delete",s="cancel"===n||"save"===n?"No, continue editing":"No, cancel";return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[300] flex items-center justify-center",role:"dialog","aria-modal":"true","aria-labelledby":`${n}-confirm-title`,children:(0,r.jsxs)("div",{className:"bg-[#2d2d2d] p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,r.jsx)("h3",{id:`${n}-confirm-title`,className:"text-lg font-medium mb-4",children:"cancel"===n?"Confirm Cancel":"save"===n?"Confirm Save":"Confirm Delete"}),(0,r.jsx)("p",{className:"mb-6",children:"cancel"===n?"Are you sure you want to cancel? All unsaved changes will be lost.":"save"===n?"Are you sure you want to save these changes?":"Are you sure you want to delete this record? This action cannot be undone."}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-[#3c3c3c] text-white rounded hover:bg-[#4c4c4c]",onClick:()=>i(!1),"aria-label":s,children:s}),(0,r.jsx)("button",{className:`px-4 py-2 ${"cancel"===n?"bg-red-700 hover:bg-red-800":"save"===n?"bg-green-700 hover:bg-green-800":"bg-red-700 hover:bg-red-800"} text-white rounded`,onClick:()=>i(!0),"aria-label":o,children:o})]})]})})};function e6({data:e,columns:t,actions:a,detailView:n,detailViewMode:o="auto",entityType:s,addItemButton:l,filterOptions:d,urlStatePrefix:c,emptyMessage:p="No data found.",onPageChange:m,onSortChange:u,onSearchChange:h,onFilterChange:y,fetchData:f,showDetailView:g=!0,activeTab:b,statusField:N="status",search:T,showSearchBox:E=!1,onEdit:x,onDelete:v,showDefaultActions:j=!0,onSave:w,onAdd:I}){let{data:D,pagination:S,setPagination:R,activeFilters:M,setActiveFilters:A,openFilterColumn:C,setOpenFilterColumn:O,expandedRowId:P,setExpandedRowId:U,editingRowId:k,isAddingNewRow:L,newRowData:$,isLoading:B,searchTerm:G,setSearchTerm:H,sortField:_,sortDirection:F,handleSortClick:J,handleEdit:V,handleCancelEdit:W,handleSaveEdit:z,handleDeleteClick:q,handleAddNewRow:K,handleConfirmation:Y,isEditConfirmOpen:Q,isSaveConfirmOpen:X,isDeleteConfirmOpen:Z,editAction:ee,effectiveColumns:et,effectiveActions:ea,tableActions:er,columnsWithActiveFilters:ei,isImportDialogOpen:en,handleExportTable:eo,handleImportTable:es,handleActionImportTable:el}=ej({initialData:e,columns:t,actions:a,entityType:s,fetchData:f,onEdit:x,onDelete:v,onSave:w,onAdd:I,onSearchChange:h,onSortChange:u,onPageChange:m,onFilterChange:y}),ed=(0,i.useMemo)(()=>(er||[]).map(e=>"export"===e.label.toLowerCase()?{...e,onClick:()=>eo()}:"import"===e.label.toLowerCase()?{...e,onClick:()=>es(!0)}:e),[er,eo,es]);return(0,r.jsxs)("div",{className:"w-full relative flex flex-col",children:[(0,r.jsx)(e2,{showSearchBox:E,searchTerm:G,setSearchTerm:H,columnsWithActiveFilters:ei,effectiveColumns:et,activeFilters:M,setActiveFilters:A,filterOptions:d,tableActions:ed,addItemButton:l,entityType:s,isLoading:B,handleAddNewRow:K}),(0,r.jsx)("div",{className:"bg-[#1e1e1e] border border-[#3c3c3c] rounded-md overflow-hidden relative w-full flex-grow flex flex-col",children:(0,r.jsxs)("div",{className:"overflow-x-auto w-full flex-1",style:{maxWidth:"100%"},children:[(0,r.jsxs)("table",{className:"relative table-auto min-w-full table-fixed","aria-busy":B,role:"grid",style:{tableLayout:"fixed"},children:[(0,r.jsx)(eP,{columns:et,sortField:_,sortDirection:F,handleSortClick:J,activeFilters:M,openFilterColumn:C,setOpenFilterColumn:O,setActiveFilters:A,showDetailView:g,showDefaultActions:j,handleAddNewRow:K,isAddingNewRow:L,editingRowId:k}),(0,r.jsx)(eY,{data:D,columns:et,actions:ea,detailView:n,detailViewMode:o,entityType:s,search:T,showDetailView:g,expandedRowId:P,setExpandedRowId:U,editingRowId:k,isAddingNewRow:L,newRowData:$,handleRowClick:U,handleCancelEdit:W,handleSaveEdit:z,isLoading:B,emptyMessage:p,showDefaultActions:j})]}),D.rows.length>0&&(0,r.jsx)(e1,{pagination:S,setPagination:R})]})}),(0,r.jsx)(e5,{isEditConfirmOpen:Q,isSaveConfirmOpen:X,isDeleteConfirmOpen:Z,handleConfirmation:Y,editAction:ee}),(0,r.jsx)(e4,{open:en,handleImportTable:es,handleActionImportTable:el})]})}var e8=a(5192),e7=a(1312),e9=a(428),te=a(8730),tt=a(8251);function ta({title:e,entityType:t,breadcrumbPath:a,description:l="",statsCards:d=[],tabs:c=[],addButtonLabel:p,onAddButtonClick:m,actions:u,showSearchBox:h=!1,actionButtons:y}){(0,n.useRouter)(),(0,n.usePathname)(),(0,n.useSearchParams)();let[f,g]=(0,i.useState)(c.length>0?c[0].id:"all"),[b,N]=(0,i.useState)(null),[T,E]=(0,i.useState)(!1),[x,v]=(0,i.useState)(null),j=(e,t)=>{if(t)return t;switch(e){case"blue":return(0,r.jsx)(e7.A,{className:"h-5 w-5"});case"green":return(0,r.jsx)(e9.A,{className:"h-5 w-5"});case"yellow":return(0,r.jsx)(te.A,{className:"h-5 w-5"});default:return(0,r.jsx)(tt.A,{className:"h-5 w-5"})}},w=e=>{switch(e){case"blue":return"bg-gradient-to-br from-[#2a4365] to-[#2c5282] text-white";case"green":return"bg-gradient-to-br from-[#276749] to-[#2f855a] text-white";case"yellow":return"bg-gradient-to-br from-[#975a16] to-[#b7791f] text-white";case"red":return"bg-gradient-to-br from-[#9b2c2c] to-[#c53030] text-white";default:return"bg-[#252526] text-[#cccccc]"}};return(0,r.jsx)(s.default,{children:(0,r.jsxs)("div",{className:"container mx-auto py-6 px-4 max-w-full",children:[(0,r.jsxs)(o.Qp,{className:"mb-6",children:[(0,r.jsx)(o.J5,{children:(0,r.jsx)(o.w1,{href:"/",children:"Home"})}),(0,r.jsx)(o.J5,{isCurrentPage:!0,children:(0,r.jsx)(o.w1,{children:e})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:e}),l&&(0,r.jsx)("p",{className:"text-gray-400 mt-1",children:l})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[y,!y&&p&&(0,r.jsxs)("button",{onClick:m,className:"bg-[#007acc] text-white px-3 py-2 rounded flex items-center hover:bg-[#0069ac]",children:[(0,r.jsx)(eO.A,{className:"h-4 w-4 mr-2"}),p]})]})]}),d.length>0&&(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:d.map((e,t)=>(0,r.jsx)(e8.Zp,{className:w(e.color),children:(0,r.jsx)(e8.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium opacity-80",children:e.label}),(0,r.jsx)("p",{className:"text-2xl font-bold mt-1",children:e.value})]}),(0,r.jsx)("div",{className:`p-2 rounded-full ${e.color?"bg-white bg-opacity-20":"bg-[#3c3c3c]"}`,children:j(e.color,e.icon)})]})})},t))}),c.length>0&&(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("div",{className:"flex space-x-1 rounded-lg bg-[#252525] p-1 w-fit",children:c.map(e=>(0,r.jsx)("button",{onClick:()=>g(e.id),className:`px-4 py-2 text-sm font-medium transition-colors rounded-md ${f===e.id?"bg-[#37373d] text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:e.label},e.id))})}),(0,r.jsxs)("div",{className:"bg-[#252526] rounded-lg shadow p-4 w-full",style:{maxWidth:"100%"},children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsxs)("h2",{className:"font-semibold",children:[c.find(e=>e.id===f)?.label||e," List"]})})}),T?(0,r.jsxs)("div",{className:"flex justify-center items-center py-16",children:[(0,r.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-[#007acc] border-t-transparent rounded-full mr-3"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["Loading ",e.toLowerCase(),"..."]})]}):x?(0,r.jsx)("div",{className:"bg-[#442222] text-red-300 p-4 rounded text-center",children:x}):(0,r.jsx)(e6,{data:b,entityType:t,showDetailView:!0,actions:u,showSearchBox:h})]})]})})}function tr(e){return(0,r.jsx)(i.Suspense,{fallback:(0,r.jsxs)("div",{className:"flex justify-center items-center py-16",children:[(0,r.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-[#007acc] border-t-transparent rounded-full mr-3"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Loading..."})]}),children:(0,r.jsx)(ta,{...e})})}},6567:(e,t,a)=>{a.d(t,{Lx:()=>i,PU:()=>s,RJ:()=>o,an:()=>r,r3:()=>n,vh:()=>l});var r=function(e){return e.Event="Event",e.Region="Region",e.Province="Province",e.Reward="Reward",e.RewardEvent="RewardEvent",e.GoldenHour="GoldenHour",e.SpinHistory="SpinHistory",e.AuditLog="AuditLog",e.Statistics="Statistics",e.User="User",e.Role="Role",e.Permission="Permission",e.Configuration="Configuration",e.BlacklistedToken="BlacklistedToken",e.EventLocation="EventLocation",e.Participant="Participant",e.ParticipantEvent="ParticipantEvent",e.JobImportHistory="JobImportHistory",e.JobImportHistoryDetail="JobImportHistoryDetail",e.RewardDistribute="RewardDistribute",e.DailyRewardDistribution="DailyRewardDistribution",e}({}),i=function(e){return e.SUCCESS="SUCCESS",e.NO_DATA="NO_DATA",e.ERROR="ERROR",e.INVALID_REQUEST="INVALID_REQUEST",e.ACCESS_DENIED="ACCESS_DENIED",e}({}),n=function(e){return e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING",e.NONE="NONE",e.UNSORTABLE="UNSORTABLE",e}({}),o=function(e){return e.EQUALS="EQUALS",e.NOT_EQUALS="NOT_EQUALS",e.LESS_THAN="LESS_THAN",e.LESS_THAN_OR_EQUALS="LESS_THAN_OR_EQUALS",e.GREATER_THAN="GREATER_THAN",e.GREATER_THAN_OR_EQUALS="GREATER_THAN_OR_EQUALS",e.BETWEEN="BETWEEN",e.IN="IN",e.NOT_IN="NOT_IN",e.CONTAINS="CONTAINS",e.STARTS_WITH="STARTS_WITH",e.ENDS_WITH="ENDS_WITH",e}({}),s=function(e){return e.STRING="STRING",e.NUMBER="NUMBER",e.BOOLEAN="BOOLEAN",e.DATE="DATE",e.DATETIME="DATETIME",e.TIME="TIME",e.OBJECT="OBJECT",e}({}),l=function(e){return e.ADD="ADD",e.UPDATE="UPDATE",e.DELETE="DELETE",e.VIEW="VIEW",e.EXPORT="EXPORT",e.IMPORT="IMPORT",e}({})},7e3:(e,t,a)=>{a.d(t,{BB:()=>s,DJ:()=>n,Ob:()=>l,RT:()=>o,he:()=>i});var r=a(6567);function i(e,t,a,n=a.length,o=0,s=10){let l={};return a.length>0&&Object.keys(a[0].data).forEach(t=>{let i={objectType:e,fieldName:t,fieldType:function(e){if(null==e)return r.PU.STRING;switch(typeof e){case"number":return r.PU.NUMBER;case"boolean":return r.PU.BOOLEAN;case"string":if(!isNaN(Date.parse(e))&&e.includes("-"))return r.PU.DATE;return r.PU.STRING;case"object":if(e instanceof Date)return r.PU.DATE;return r.PU.OBJECT;default:return r.PU.STRING}}(a[0].data[t]),sortType:r.r3.NONE};l[t]=i}),{status:r.Lx.SUCCESS,message:"Success",originalRequest:{page:o,size:s,sorts:[],filters:[],search:{},objectType:e},key:{keys:["id"]},totalPage:Math.ceil(n/s),currentPage:o,pageSize:s,totalElements:n,tableName:t,fieldNameMap:l,rows:a,relatedLinkedObjects:{},statistics:{charts:{}},first:0===o,last:o>=Math.ceil(n/s)-1,empty:0===a.length,numberOfElements:a.length}}function n(){let e=new Date,t=new Date;return t.setFullYear(e.getFullYear()-1),new Date(t.getTime()+Math.random()*(e.getTime()-t.getTime())).toISOString().split("T")[0]}function o(){let e=new Date,t=new Date;t.setMonth(e.getMonth()-Math.floor(6*Math.random()));let a=new Date;return a.setMonth(e.getMonth()+1+Math.floor(12*Math.random())),[t.toISOString().split("T")[0],a.toISOString().split("T")[0]]}function s(e){return e[Math.floor(Math.random()*e.length)]}function l(e=.5){return Math.random()<e}},7917:(e,t,a)=>{a.d(t,{B:()=>l});var r=a(6567),i=a(7e3);let n=["WIN","LOSE","INVALID","ERROR"],o=["MOBILE","DESKTOP","TABLET","KIOSK"],s=Array(50).fill(null).map((e,t)=>{let a=Math.floor(20*Math.random())+1,r=Math.floor(5*Math.random())+1,s=Math.random()>.3?Math.floor(25*Math.random())+1:null,l=s?"WIN":n[Math.floor(Math.random()*n.length)],d=(0,i.DJ)(),c=`${Math.floor(24*Math.random()).toString().padStart(2,"0")}:${Math.floor(60*Math.random()).toString().padStart(2,"0")}`;return{data:{id:t+1,participantId:a,eventId:r,rewardId:s,outcome:l,spinDate:d,spinTime:c,deviceType:o[Math.floor(Math.random()*o.length)],ipAddress:`${Math.floor(256*Math.random())}.${Math.floor(256*Math.random())}.${Math.floor(256*Math.random())}.${Math.floor(256*Math.random())}`,claimed:"WIN"===l&&Math.random()>.5,claimedDate:"WIN"===l&&Math.random()>.5?(0,i.DJ)():null,goldenHourId:Math.random()>.7?Math.floor(15*Math.random())+1:null,createdAt:d+"T"+c}}}),l=(0,i.he)(r.an.SpinHistory,"spin_history",s,100),d=new Set;l.rows.forEach(e=>{let t=e.data.eventId,a=e.data.participantId,i=e.data.rewardId,n=e.data.goldenHourId;t&&!d.has(`event_${t}`)&&(l.relatedLinkedObjects[`event_${t}`]={id:t,name:`Event ${t}`,objectType:r.an.Event,description:"Parent event",key:{keys:["id"]}},d.add(`event_${t}`)),a&&!d.has(`participant_${a}`)&&(l.relatedLinkedObjects[`participant_${a}`]={id:a,name:`Participant ${a}`,objectType:r.an.Participant,description:"Participant who spun",key:{keys:["id"]}},d.add(`participant_${a}`)),i&&!d.has(`reward_${i}`)&&(l.relatedLinkedObjects[`reward_${i}`]={id:i,name:`Reward ${i}`,objectType:r.an.Reward,description:"Won reward",key:{keys:["id"]}},d.add(`reward_${i}`)),n&&!d.has(`goldenHour_${n}`)&&(l.relatedLinkedObjects[`goldenHour_${n}`]={id:n,name:`Golden Hour ${n}`,objectType:r.an.GoldenHour,description:"Golden hour when spin occurred",key:{keys:["id"]}},d.add(`goldenHour_${n}`))})}};